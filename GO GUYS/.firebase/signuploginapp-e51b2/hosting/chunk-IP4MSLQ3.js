import{a as z,b as Ce,c as Dp,d as N,e as OE,f as $c,g as FE,h as LE,i as VE,j as Tp,k as jE,l as Oa,m as Cp,n as qc,o as UE,p as BE,q as bp,r as Le,s as xi,t as An,u as zc,v as Fa,w as $E,x as qE,y as Pr,z as St}from"./chunk-U3NIYLHF.js";function zE(n,e){return Object.is(n,e)}var it=null,Hc=!1,Gc=1,Zn=Symbol("SIGNAL");function ye(n){let e=it;return it=n,e}function HE(){return it}var Va={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Rp(n){if(Hc)throw new Error("");if(it===null)return;it.consumerOnSignalRead(n);let e=it.nextProducerIndex++;if(Yc(it),e<it.producerNode.length&&it.producerNode[e]!==n&&La(it)){let t=it.producerNode[e];Qc(t,it.producerIndexOfThis[e])}it.producerNode[e]!==n&&(it.producerNode[e]=n,it.producerIndexOfThis[e]=La(it)?QE(n,it,e):0),it.producerLastReadVersion[e]=n.version}function GM(){Gc++}function GE(n){if(!(La(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Gc)){if(!n.producerMustRecompute(n)&&!Mp(n)){n.dirty=!1,n.lastCleanEpoch=Gc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Gc}}function WE(n){if(n.liveConsumerNode===void 0)return;let e=Hc;Hc=!0;try{for(let t of n.liveConsumerNode)t.dirty||WM(t)}finally{Hc=e}}function KE(){return it?.consumerAllowSignalWrites!==!1}function WM(n){n.dirty=!0,WE(n),n.consumerMarkedDirty?.(n)}function Kc(n){return n&&(n.nextProducerIndex=0),ye(n)}function xp(n,e){if(ye(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(La(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Qc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Mp(n){Yc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(GE(t),r!==t.version))return!0}return!1}function Np(n){if(Yc(n),La(n))for(let e=0;e<n.producerNode.length;e++)Qc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function QE(n,e,t){if(YE(n),n.liveConsumerNode.length===0&&ZE(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=QE(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Qc(n,e){if(YE(n),n.liveConsumerNode.length===1&&ZE(n))for(let r=0;r<n.producerNode.length;r++)Qc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Yc(i),i.producerIndexOfThis[r]=e}}function La(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function YE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function ZE(n){return n.producerNode!==void 0}function JE(n){let e=Object.create(KM);e.computation=n;let t=()=>{if(GE(e),Rp(e),e.value===Wc)throw e.error;return e.value};return t[Zn]=e,t}var Sp=Symbol("UNSET"),Ap=Symbol("COMPUTING"),Wc=Symbol("ERRORED"),KM=Ce(z({},Va),{value:Sp,dirty:!0,error:null,equal:zE,producerMustRecompute(n){return n.value===Sp||n.value===Ap},producerRecomputeValue(n){if(n.value===Ap)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Ap;let t=Kc(n),r;try{r=n.computation()}catch(i){r=Wc,n.error=i}finally{xp(n,t)}if(e!==Sp&&e!==Wc&&r!==Wc&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function QM(){throw new Error}var XE=QM;function eD(){XE()}function tD(n){XE=n}var YM=null;function nD(n){let e=Object.create(iD);e.value=n;let t=()=>(Rp(e),e.value);return t[Zn]=e,t}function Pp(n,e){KE()||eD(),n.equal(n.value,e)||(n.value=e,ZM(n))}function rD(n,e){KE()||eD(),Pp(n,e(n.value))}var iD=Ce(z({},Va),{equal:zE,value:void 0});function ZM(n){n.version++,GM(),WE(n),YM?.()}function ne(n){return typeof n=="function"}function Oo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Zc=Oo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Mi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Be=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof Zc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{oD(o)}catch(s){e=e??[],s instanceof Zc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Zc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)oD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Mi(t,e)}remove(e){let{_finalizers:t}=this;t&&Mi(t,e),e instanceof n&&e._removeParent(this)}};Be.EMPTY=(()=>{let n=new Be;return n.closed=!0,n})();var kp=Be.EMPTY;function Jc(n){return n instanceof Be||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function oD(n){ne(n)?n():n.unsubscribe()}var fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Fo={setTimeout(n,e,...t){let{delegate:r}=Fo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Fo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xc(n){Fo.setTimeout(()=>{let{onUnhandledError:e}=fn;if(e)e(n);else throw n})}function ja(){}var sD=Op("C",void 0,void 0);function aD(n){return Op("E",void 0,n)}function uD(n){return Op("N",n,void 0)}function Op(n,e,t){return{kind:n,value:e,error:t}}var Ni=null;function Lo(n){if(fn.useDeprecatedSynchronousErrorHandling){let e=!Ni;if(e&&(Ni={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ni;if(Ni=null,t)throw r}}else n()}function cD(n){fn.useDeprecatedSynchronousErrorHandling&&Ni&&(Ni.errorThrown=!0,Ni.error=n)}var Pi=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Jc(e)&&e.add(this)):this.destination=eN}static create(e,t,r){return new Jn(e,t,r)}next(e){this.isStopped?Lp(uD(e),this):this._next(e)}error(e){this.isStopped?Lp(aD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Lp(sD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JM=Function.prototype.bind;function Fp(n,e){return JM.call(n,e)}var Vp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){el(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){el(r)}else el(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){el(t)}}},Jn=class extends Pi{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&fn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Fp(e.next,o),error:e.error&&Fp(e.error,o),complete:e.complete&&Fp(e.complete,o)}):i=e}this.destination=new Vp(i)}};function el(n){fn.useDeprecatedSynchronousErrorHandling?cD(n):Xc(n)}function XM(n){throw n}function Lp(n,e){let{onStoppedNotification:t}=fn;t&&Fo.setTimeout(()=>t(n,e))}var eN={closed:!0,next:ja,error:XM,complete:ja};var Vo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function At(n){return n}function jp(...n){return Up(n)}function Up(n){return n.length===0?At:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=nN(t)?t:new Jn(t,r,i);return Lo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=lD(r),new r((i,o)=>{let s=new Jn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Vo](){return this}pipe(...t){return Up(t)(this)}toPromise(t){return t=lD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function lD(n){var e;return(e=n??fn.Promise)!==null&&e!==void 0?e:Promise}function tN(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function nN(n){return n&&n instanceof Pi||tN(n)&&Jc(n)}function Bp(n){return ne(n?.lift)}function ie(n){return e=>{if(Bp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,i){return new $p(n,e,t,r,i)}var $p=class extends Pi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function jo(){return ie((n,e)=>{let t=null;n._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Uo=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Bp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;let t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return jo()(this)}};var dD=Oo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new tl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new dD}next(t){Lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?kp:(this.currentObservers=null,o.push(t),new Be(()=>{this.currentObservers=null,Mi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new tl(e,t),n})(),tl=class extends $e{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:kp}};var dt=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ua={now(){return(Ua.delegate||Date).now()},delegate:void 0};var nl=class extends $e{constructor(e=1/0,t=1/0,r=Ua){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var rl=class extends Be{constructor(e,t){super()}schedule(e,t=0){return this}};var Ba={setInterval(n,e,...t){let{delegate:r}=Ba;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ba;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Bo=class extends rl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ba.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ba.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Mi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var $o=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};$o.now=Ua.now;var qo=class extends $o{constructor(e,t=$o.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ki=new qo(Bo);var il=class extends Bo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ol=class extends qo{};var qp=new ol(il);var Rt=new ce(n=>n.complete());function hD(n){return n&&ne(n.schedule)}function zp(n){return n[n.length-1]}function sl(n){return ne(zp(n))?n.pop():void 0}function Rn(n){return hD(zp(n))?n.pop():void 0}function fD(n,e){return typeof zp(n)=="number"?n.pop():e}var al=n=>n&&typeof n.length=="number"&&typeof n!="function";function ul(n){return ne(n?.then)}function cl(n){return ne(n[Vo])}function ll(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function dl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hl=rN();function fl(n){return ne(n?.[hl])}function pl(n){return FE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield $c(t.read());if(i)return yield $c(void 0);yield yield $c(r)}}finally{t.releaseLock()}})}function gl(n){return ne(n?.getReader)}function Pe(n){if(n instanceof ce)return n;if(n!=null){if(cl(n))return iN(n);if(al(n))return oN(n);if(ul(n))return sN(n);if(ll(n))return pD(n);if(fl(n))return aN(n);if(gl(n))return uN(n)}throw dl(n)}function iN(n){return new ce(e=>{let t=n[Vo]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oN(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function sN(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xc)})}function aN(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function pD(n){return new ce(e=>{cN(n,e).catch(t=>e.error(t))})}function uN(n){return pD(pl(n))}function cN(n,e){var t,r,i,o;return OE(this,void 0,void 0,function*(){try{for(t=LE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ut(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ht(n,e=0){return ie((t,r)=>{t.subscribe(oe(r,i=>Ut(r,n,()=>r.next(i),e),()=>Ut(r,n,()=>r.complete(),e),i=>Ut(r,n,()=>r.error(i),e)))})}function pn(n,e=0){return ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function gD(n,e){return Pe(n).pipe(pn(e),Ht(e))}function mD(n,e){return Pe(n).pipe(pn(e),Ht(e))}function yD(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function vD(n,e){return new ce(t=>{let r;return Ut(t,e,()=>{r=n[hl](),Ut(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function ml(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{Ut(t,e,()=>{let r=n[Symbol.asyncIterator]();Ut(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function wD(n,e){return ml(pl(n),e)}function _D(n,e){if(n!=null){if(cl(n))return gD(n,e);if(al(n))return yD(n,e);if(ul(n))return mD(n,e);if(ll(n))return ml(n,e);if(fl(n))return vD(n,e);if(gl(n))return wD(n,e)}throw dl(n)}function ve(n,e){return e?_D(n,e):Pe(n)}function J(...n){let e=Rn(n);return ve(n,e)}function zo(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function Hp(n){return!!n&&(n instanceof ce||ne(n.lift)&&ne(n.subscribe))}var Xn=Oo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(n,e){return ie((t,r)=>{let i=0;t.subscribe(oe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:lN}=Array;function dN(n,e){return lN(e)?n(...e):n(e)}function yl(n){return ee(e=>dN(n,e))}var{isArray:hN}=Array,{getPrototypeOf:fN,prototype:pN,keys:gN}=Object;function vl(n){if(n.length===1){let e=n[0];if(hN(e))return{args:e,keys:null};if(mN(e)){let t=gN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function mN(n){return n&&typeof n=="object"&&fN(n)===pN}function wl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function $a(...n){let e=Rn(n),t=sl(n),{args:r,keys:i}=vl(n);if(r.length===0)return ve([],e);let o=new ce(yN(r,e,i?s=>wl(i,s):At));return t?o.pipe(yl(t)):o}function yN(n,e,t=At){return r=>{ID(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)ID(e,()=>{let l=ve(n[u],e),d=!1;l.subscribe(oe(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ID(n,e,t){n?Ut(t,n,e):e()}function ED(n,e,t,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=C=>l<r?D(C):u.push(C),D=C=>{o&&e.next(C),l++;let b=!1;Pe(t(C,d++)).subscribe(oe(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;u.length&&l<r;){let F=u.shift();s?Ut(e,s,()=>D(F)):D(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(oe(e,y,()=>{f=!0,g()})),()=>{a?.()}}function Ye(n,e,t=1/0){return ne(e)?Ye((r,i)=>ee((o,s)=>e(r,o,i,s))(Pe(n(r,i))),t):(typeof e=="number"&&(t=e),ie((r,i)=>ED(r,i,n,t)))}function kr(n=1/0){return Ye(At,n)}function DD(){return kr(1)}function Ho(...n){return DD()(ve(n,Rn(n)))}function _l(n){return new ce(e=>{Pe(n()).subscribe(e)})}function vN(...n){let e=sl(n),{args:t,keys:r}=vl(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;Pe(t[d]).subscribe(oe(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?wl(r,a):a),o.complete())}))}});return e?i.pipe(yl(e)):i}function Gp(...n){let e=Rn(n),t=fD(n,1/0),r=n;return r.length?r.length===1?Pe(r[0]):kr(t)(ve(r,e)):Rt}function ot(n,e){return ie((t,r)=>{let i=0;t.subscribe(oe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Or(n){return ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(oe(t,void 0,void 0,s=>{o=Pe(n(s,Or(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function TD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(oe(s,d=>{let f=l++;u=a?n(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function er(n,e){return ne(e)?Ye(n,e,1):Ye(n,1)}function wN(n,e=ki){return ie((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}t.subscribe(oe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Fr(n){return ie((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function tr(n){return n<=0?()=>Rt:ie((e,t)=>{let r=0;e.subscribe(oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Wp(n){return ee(()=>n)}function Kp(n,e=At){return n=n??_N,ie((t,r)=>{let i,o=!0;t.subscribe(oe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function _N(n,e){return n===e}function Il(n=IN){return ie((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function IN(){return new Xn}function Lr(n){return ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Xt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ot((i,o)=>n(i,o,r)):At,tr(1),t?Fr(e):Il(()=>new Xn))}function Go(n){return n<=0?()=>Rt:ie((e,t)=>{let r=[];e.subscribe(oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Qp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ot((i,o)=>n(i,o,r)):At,Go(1),t?Fr(e):Il(()=>new Xn))}function qa(){return ie((n,e)=>{let t,r=!1;n.subscribe(oe(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Oi(n,e){return ie(TD(n,e,arguments.length>=2,!0))}function CD(n={}){let{connector:e=()=>new $e,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=f=!1},D=()=>{let C=s;y(),C?.unsubscribe()};return ie((C,b)=>{l++,!f&&!d&&g();let F=u=u??e();b.add(()=>{l--,l===0&&!f&&!d&&(a=Yp(D,i))}),F.subscribe(b),!s&&l>0&&(s=new Jn({next:U=>F.next(U),error:U=>{f=!0,g(),a=Yp(y,t,U),F.error(U)},complete:()=>{d=!0,g(),a=Yp(y,r),F.complete()}}),Pe(C).subscribe(s))})(o)}}function Yp(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Jn({next:()=>{r.unsubscribe(),n()}});return Pe(e(...t)).subscribe(r)}function El(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,CD({connector:()=>new nl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Fi(...n){let e=Rn(n);return ie((t,r)=>{(e?Ho(n,t,e):Ho(n,t)).subscribe(r)})}function Oe(n,e){return ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,d=o++;Pe(n(u,d)).subscribe(i=oe(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Dl(n,e){return ne(e)?Oe(()=>n,e):Oe(()=>n)}function Zp(n){return ie((e,t)=>{Pe(n).subscribe(oe(t,()=>t.complete(),ja)),!t.closed&&e.subscribe(t)})}function Ze(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):At}var hT="https://g.co/ng/security#xss",Y=class extends Error{constructor(e,t){super(cd(e,t)),this.code=e}};function cd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Xa(n){return{toString:n}.toString()}var Tl="__parameters__";function EN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function fT(n,e,t){return Xa(()=>{let r=EN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(Tl)?u[Tl]:Object.defineProperty(u,Tl,{value:[]})[Tl];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var xt=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function DN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Nt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Nt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function bD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var TN=Se({__forward_ref__:Se});function pT(n){return n.__forward_ref__=pT,n.toString=function(){return Nt(this())},n}function Mt(n){return gT(n)?n():n}function gT(n){return typeof n=="function"&&n.hasOwnProperty(TN)&&n.__forward_ref__===pT}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ld(n){return SD(n,yT)||SD(n,vT)}function mT(n){return ld(n)!==null}function SD(n,e){return n.hasOwnProperty(e)?n[e]:null}function CN(n){let e=n&&(n[yT]||n[vT]);return e||null}function AD(n){return n&&(n.hasOwnProperty(RD)||n.hasOwnProperty(bN))?n[RD]:null}var yT=Se({\u0275prov:Se}),RD=Se({\u0275inj:Se}),vT=Se({ngInjectableDef:Se}),bN=Se({ngInjectorDef:Se}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wT(n){return n&&!!n.\u0275providers}var SN=Se({\u0275cmp:Se}),AN=Se({\u0275dir:Se}),RN=Se({\u0275pipe:Se}),xN=Se({\u0275mod:Se}),Ol=Se({\u0275fac:Se}),Ha=Se({__NG_ELEMENT_ID__:Se}),xD=Se({__NG_ENV_ID__:Se});function nr(n){return typeof n=="string"?n:n==null?"":String(n)}function MN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():nr(n)}function NN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Y(-200,n)}function om(n,e){throw new Y(-201,!1)}var de=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(de||{}),hg;function _T(){return hg}function Bt(n){let e=hg;return hg=n,e}function IT(n,e,t){let r=ld(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&de.Optional)return null;if(e!==void 0)return e;om(n,"Injector")}var PN={},Wa=PN,fg="__NG_DI_FLAG__",Fl="ngTempTokenPath",kN="ngTokenPath",ON=/\n/gm,FN="\u0275",MD="__source",Zo;function LN(){return Zo}function Vr(n){let e=Zo;return Zo=n,e}function VN(n,e=de.Default){if(Zo===void 0)throw new Y(-203,!1);return Zo===null?IT(n,void 0,e):Zo.get(n,e&de.Optional?null:void 0,e)}function V(n,e=de.Default){return(_T()||VN)(Mt(n),e)}function L(n,e=de.Default){return V(n,dd(e))}function dd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function pg(n){let e=[];for(let t=0;t<n.length;t++){let r=Mt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,o=de.Default;for(let s=0;s<r.length;s++){let a=r[s],u=jN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(V(i,o))}else e.push(V(r))}return e}function ET(n,e){return n[fg]=e,n.prototype[fg]=e,n}function jN(n){return n[fg]}function UN(n,e,t,r){let i=n[Fl];throw e[MD]&&i.unshift(e[MD]),n.message=BN(`
`+n.message,i,t,r),n[kN]=i,n[Fl]=null,n}function BN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==FN?n.slice(2):n;let i=Nt(e);if(Array.isArray(e))i=e.map(Nt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Nt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(ON,`
  `)}`}var ls=ET(fT("Optional"),8);var sm=ET(fT("SkipSelf"),4);function ji(n,e){let t=n.hasOwnProperty(Ol);return t?n[Ol]:null}function $N(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function qN(n){return n.flat(Number.POSITIVE_INFINITY)}function am(n,e){n.forEach(t=>Array.isArray(t)?am(t,e):e(t))}function DT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ll(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function zN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function HN(n,e,t){let r=eu(n,e);return r>=0?n[r|1]=t:(r=~r,zN(n,r,e,t)),r}function Jp(n,e){let t=eu(n,e);if(t>=0)return n[t|1]}function eu(n,e){return GN(n,e,1)}function GN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Xo={},en=[],es=new q(""),TT=new q("",-1),CT=new q(""),Vl=class{get(e,t=Wa){if(t===Wa){let r=new Error(`NullInjectorError: No provider for ${Nt(e)}!`);throw r.name="NullInjectorError",r}return t}},bT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(bT||{}),Nn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Nn||{}),Br=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Br||{});function WN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function gg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];KN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function ST(n){return n===3||n===4||n===6}function KN(n){return n.charCodeAt(0)===64}function Ka(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ND(n,t,i,null,e[++r]):ND(n,t,i,null,null))}}return n}function ND(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var AT="ng-template";function QN(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&WN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(um(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function um(n){return n.type===4&&n.value!==AT}function YN(n,e,t){let r=n.type===4&&!t?AT:n.value;return e===r}function ZN(n,e,t){let r=4,i=n.attrs,o=i!==null?eP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!gn(r)&&!gn(u))return!1;if(s&&gn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!YN(n,u,t)||u===""&&e.length===1){if(gn(r))return!1;s=!0}}else if(r&8){if(i===null||!QN(n,i,u,t)){if(gn(r))return!1;s=!0}}else{let l=e[++a],d=JN(u,i,um(n),t);if(d===-1){if(gn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(gn(r))return!1;s=!0}}}}return gn(r)||s}function gn(n){return(n&1)===0}function JN(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return tP(e,n)}function XN(n,e,t=!1){for(let r=0;r<e.length;r++)if(ZN(n,e[r],t))return!0;return!1}function eP(n){for(let e=0;e<n.length;e++){let t=n[e];if(ST(t))return e}return n.length}function tP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function PD(n,e){return n?":not("+e.trim()+")":e}function nP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!gn(s)&&(e+=PD(o,i),i=""),r=s,o=o||!gn(r);t++}return i!==""&&(e+=PD(o,i)),e}function rP(n){return n.map(nP).join(",")}function iP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!gn(i))break;i=o}r++}return{attrs:e,classes:t}}function RT(n){return Xa(()=>{let e=kT(n),t=Ce(z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===bT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Nn.Emulated,styles:n.styles||en,_:null,schemas:n.schemas||null,tView:null,id:""});OT(t);let r=n.dependencies;return t.directiveDefs=OD(r,!1),t.pipeDefs=OD(r,!0),t.id=aP(t),t})}function oP(n){return $r(n)||xT(n)}function sP(n){return n!==null}function Ot(n){return Xa(()=>({type:n.type,bootstrap:n.bootstrap||en,declarations:n.declarations||en,imports:n.imports||en,exports:n.exports||en,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function kD(n,e){if(n==null)return Xo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Br.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Br.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Qi(n){return Xa(()=>{let e=kT(n);return OT(e),e})}function cm(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function $r(n){return n[SN]||null}function xT(n){return n[AN]||null}function MT(n){return n[RN]||null}function NT(n){let e=$r(n)||xT(n)||MT(n);return e!==null?e.standalone:!1}function PT(n,e){let t=n[xN]||null;if(!t&&e===!0)throw new Error(`Type ${Nt(n)} does not have '\u0275mod' property.`);return t}function kT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Xo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||en,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kD(n.inputs,e),outputs:kD(n.outputs),debugInfo:null}}function OT(n){n.features?.forEach(e=>e(n))}function OD(n,e){if(!n)return null;let t=e?MT:oP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(sP)}function aP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function hd(n){return{\u0275providers:n}}function uP(...n){return{\u0275providers:FT(!0,n),\u0275fromNgModule:!0}}function FT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return am(e,s=>{let a=s;mg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&LT(i,o),t}function LT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];lm(i,o=>{e(o,r)})}}function mg(n,e,t,r){if(n=Mt(n),!n)return!1;let i=null,o=AD(n),s=!o&&$r(n);if(!o&&!s){let u=n.ngModule;if(o=AD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)mg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{am(o.imports,d=>{mg(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&LT(l,e)}if(!a){let l=ji(i)||(()=>new i);e({provide:i,useFactory:l,deps:en},i),e({provide:CT,useValue:i,multi:!0},i),e({provide:es,useValue:()=>V(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;lm(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function lm(n,e){for(let t of n)wT(t)&&(t=t.\u0275providers),Array.isArray(t)?lm(t,e):e(t)}var cP=Se({provide:String,useValue:Se});function VT(n){return n!==null&&typeof n=="object"&&cP in n}function lP(n){return!!(n&&n.useExisting)}function dP(n){return!!(n&&n.useFactory)}function ts(n){return typeof n=="function"}function hP(n){return!!n.useClass}var fd=new q(""),xl={},fP={},Xp;function dm(){return Xp===void 0&&(Xp=new Vl),Xp}var Pt=class{},Qa=class extends Pt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vg(e,s=>this.processProvider(s)),this.records.set(TT,Wo(void 0,this)),i.has("environment")&&this.records.set(Pt,Wo(void 0,this));let o=this.records.get(fd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(CT,en,de.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Vr(this),r=Bt(void 0),i;try{return e()}finally{Vr(t),Bt(r)}}get(e,t=Wa,r=de.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xD))return e[xD](this);r=dd(r);let i,o=Vr(this),s=Bt(void 0);try{if(!(r&de.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=vP(e)&&ld(e);l&&this.injectableDefInScope(l)?u=Wo(yg(e),xl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&de.Self?dm():this.parent;return t=r&de.Optional&&t===Wa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Fl]=a[Fl]||[]).unshift(Nt(e)),o)throw a;return UN(a,e,"R3InjectorError",this.source)}else throw a}finally{Bt(s),Vr(o)}}resolveInjectorInitializers(){let e=ye(null),t=Vr(this),r=Bt(void 0),i;try{let o=this.get(es,en,de.Self);for(let s of o)s()}finally{Vr(t),Bt(r),ye(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Nt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(e){e=Mt(e);let t=ts(e)?e:Mt(e&&e.provide),r=gP(e);if(!ts(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Wo(void 0,xl,!0),i.factory=()=>pg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ye(null);try{return t.value===xl&&(t.value=fP,t.value=t.factory()),typeof t.value=="object"&&t.value&&yP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Mt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yg(n){let e=ld(n),t=e!==null?e.factory:ji(n);if(t!==null)return t;if(n instanceof q)throw new Y(204,!1);if(n instanceof Function)return pP(n);throw new Y(204,!1)}function pP(n){if(n.length>0)throw new Y(204,!1);let t=CN(n);return t!==null?()=>t.factory(n):()=>new n}function gP(n){if(VT(n))return Wo(void 0,n.useValue);{let e=jT(n);return Wo(e,xl)}}function jT(n,e,t){let r;if(ts(n)){let i=Mt(n);return ji(i)||yg(i)}else if(VT(n))r=()=>Mt(n.useValue);else if(dP(n))r=()=>n.useFactory(...pg(n.deps||[]));else if(lP(n))r=()=>V(Mt(n.useExisting));else{let i=Mt(n&&(n.useClass||n.provide));if(mP(n))r=()=>new i(...pg(n.deps));else return ji(i)||yg(i)}return r}function Wo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function mP(n){return!!n.deps}function yP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function vP(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function vg(n,e){for(let t of n)Array.isArray(t)?vg(t,e):t&&wT(t)?vg(t.\u0275providers,e):e(t)}function rn(n,e){n instanceof Qa&&n.assertNotDestroyed();let t,r=Vr(n),i=Bt(void 0);try{return e()}finally{Vr(r),Bt(i)}}function UT(){return _T()!==void 0||LN()!=null}function wP(n){if(!UT())throw new Y(-203,!1)}function _P(n){let e=xt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function IP(n){return typeof n=="function"}var ar=0,ae=1,te=2,wt=3,mn=4,vn=5,jl=6,Ul=7,yn=8,ns=9,Pn=10,Je=11,Ya=12,FD=13,ds=14,kn=15,Ui=16,Ko=17,rr=18,pd=19,BT=20,jr=21,eg=22,tn=23,Wt=25,$T=1;var Bi=7,Bl=8,rs=9,Gt=10,$l=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}($l||{});function Ur(n){return Array.isArray(n)&&typeof n[$T]=="object"}function ur(n){return Array.isArray(n)&&n[$T]===!0}function hm(n){return(n.flags&4)!==0}function gd(n){return n.componentOffset>-1}function md(n){return(n.flags&1)===1}function qr(n){return!!n.template}function wg(n){return(n[te]&512)!==0}var _g=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function qT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function tu(){return zT}function zT(n){return n.type.prototype.ngOnChanges&&(n.setInput=DP),EP}tu.ngInherit=!0;function EP(){let n=GT(this),e=n?.current;if(e){let t=n.previous;if(t===Xo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function DP(n,e,t,r,i){let o=this.declaredInputs[r],s=GT(n)||TP(n,{previous:Xo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new _g(l&&l.currentValue,t,u===Xo),qT(n,e,i,t)}var HT="__ngSimpleChanges__";function GT(n){return n[HT]||null}function TP(n,e){return n[HT]=e}var LD=null;var xn=function(n,e,t){LD?.(n,e,t)},CP="svg",bP="math";function On(n){for(;Array.isArray(n);)n=n[ar];return n}function WT(n,e){return On(e[n])}function on(n,e){return On(e[n.index])}function KT(n,e){return n.data[e]}function fm(n,e){return n[e]}function Wr(n,e){let t=e[n];return Ur(t)?t:t[ar]}function SP(n){return(n[te]&4)===4}function pm(n){return(n[te]&128)===128}function AP(n){return ur(n[wt])}function is(n,e){return e==null?null:n[e]}function QT(n){n[Ko]=0}function YT(n){n[te]&1024||(n[te]|=1024,pm(n)&&vd(n))}function RP(n,e){for(;n>0;)e=e[ds],n--;return e}function yd(n){return!!(n[te]&9216||n[tn]?.dirty)}function Ig(n){n[Pn].changeDetectionScheduler?.notify(8),n[te]&64&&(n[te]|=1024),yd(n)&&vd(n)}function vd(n){n[Pn].changeDetectionScheduler?.notify(0);let e=$i(n);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!pm(e)));)e=$i(e)}function ZT(n,e){if((n[te]&256)===256)throw new Y(911,!1);n[jr]===null&&(n[jr]=[]),n[jr].push(e)}function xP(n,e){if(n[jr]===null)return;let t=n[jr].indexOf(e);t!==-1&&n[jr].splice(t,1)}function $i(n){let e=n[wt];return ur(e)?e[wt]:e}var le={lFrame:aC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var JT=!1;function MP(){return le.lFrame.elementDepthCount}function NP(){le.lFrame.elementDepthCount++}function PP(){le.lFrame.elementDepthCount--}function XT(){return le.bindingsEnabled}function kP(){return le.skipHydrationRootTNode!==null}function OP(n){return le.skipHydrationRootTNode===n}function FP(){le.skipHydrationRootTNode=null}function pe(){return le.lFrame.lView}function ut(){return le.lFrame.tView}function q3(n){return le.lFrame.contextLView=n,n[yn]}function z3(n){return le.lFrame.contextLView=null,n}function _t(){let n=eC();for(;n!==null&&n.type===64;)n=n.parent;return n}function eC(){return le.lFrame.currentTNode}function LP(){let n=le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Yi(n,e){let t=le.lFrame;t.currentTNode=n,t.isParent=e}function gm(){return le.lFrame.isParent}function tC(){le.lFrame.isParent=!1}function VP(){return le.lFrame.contextLView}function nC(){return JT}function VD(n){JT=n}function mm(){let n=le.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function rC(){return le.lFrame.bindingIndex}function jP(n){return le.lFrame.bindingIndex=n}function wd(){return le.lFrame.bindingIndex++}function ym(n){let e=le.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function UP(){return le.lFrame.inI18n}function BP(n,e){let t=le.lFrame;t.bindingIndex=t.bindingRootIndex=n,Eg(e)}function $P(){return le.lFrame.currentDirectiveIndex}function Eg(n){le.lFrame.currentDirectiveIndex=n}function qP(n){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function iC(){return le.lFrame.currentQueryIndex}function vm(n){le.lFrame.currentQueryIndex=n}function zP(n){let e=n[ae];return e.type===2?e.declTNode:e.type===1?n[vn]:null}function oC(n,e,t){if(t&de.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&de.Host);)if(i=zP(o),i===null||(o=o[ds],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=le.lFrame=sC();return r.currentTNode=e,r.lView=n,!0}function wm(n){let e=sC(),t=n[ae];le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sC(){let n=le.lFrame,e=n===null?null:n.child;return e===null?aC(n):e}function aC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function uC(){let n=le.lFrame;return le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var cC=uC;function _m(){let n=uC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function HP(n){return(le.lFrame.contextLView=RP(n,le.lFrame.contextLView))[yn]}function Kr(){return le.lFrame.selectedIndex}function qi(n){le.lFrame.selectedIndex=n}function Im(){let n=le.lFrame;return KT(n.tView,n.selectedIndex)}function GP(){return le.lFrame.currentNamespace}var lC=!0;function _d(){return lC}function Id(n){lC=n}function WP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=zT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Ed(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Ml(n,e,t){dC(n,e,3,t)}function Nl(n,e,t,r){(n[te]&3)===t&&dC(n,e,t,r)}function tg(n,e){let t=n[te];(t&3)===e&&(t&=16383,t+=1,n[te]=t)}function dC(n,e,t,r){let i=r!==void 0?n[Ko]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Ko]+=65536),(a<o||o==-1)&&(KP(n,t,e,u),n[Ko]=(n[Ko]&4294901760)+u+2),u++}function jD(n,e){xn(4,n,e);let t=ye(null);try{e.call(n)}finally{ye(t),xn(5,n,e)}}function KP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[te]>>14<n[Ko]>>16&&(n[te]&3)===e&&(n[te]+=16384,jD(a,o)):jD(a,o)}var Jo=-1,zi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function QP(n){return n instanceof zi}function YP(n){return(n.flags&8)!==0}function ZP(n){return(n.flags&16)!==0}var ng={},Dg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=dd(r);let i=this.injector.get(e,ng,r);return i!==ng||t===ng?i:this.parentInjector.get(e,t,r)}};function hC(n){return n!==Jo}function ql(n){return n&32767}function JP(n){return n>>16}function zl(n,e){let t=JP(n),r=e;for(;t>0;)r=r[ds],t--;return r}var Tg=!0;function Hl(n){let e=Tg;return Tg=n,e}var XP=256,fC=XP-1,pC=5,ek=0,Mn={};function tk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ha)&&(r=t[Ha]),r==null&&(r=t[Ha]=ek++);let i=r&fC,o=1<<i;e.data[n+(i>>pC)]|=o}function Gl(n,e){let t=gC(n,e);if(t!==-1)return t;let r=e[ae];r.firstCreatePass&&(n.injectorIndex=e.length,rg(r.data,n),rg(e,null),rg(r.blueprint,null));let i=Em(n,e),o=n.injectorIndex;if(hC(i)){let s=ql(i),a=zl(i,e),u=a[ae].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function rg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function gC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Em(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=_C(i),r===null)return Jo;if(t++,i=i[ds],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Jo}function Cg(n,e,t){tk(n,e,t)}function nk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(ST(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function mC(n,e,t){if(t&de.Optional||n!==void 0)return n;om(e,"NodeInjector")}function yC(n,e,t,r){if(t&de.Optional&&r===void 0&&(r=null),!(t&(de.Self|de.Host))){let i=n[ns],o=Bt(void 0);try{return i?i.get(e,r,t&de.Optional):IT(e,r,t&de.Optional)}finally{Bt(o)}}return mC(r,e,t)}function vC(n,e,t,r=de.Default,i){if(n!==null){if(e[te]&2048&&!(r&de.Self)){let s=sk(n,e,t,r,Mn);if(s!==Mn)return s}let o=wC(n,e,t,r,Mn);if(o!==Mn)return o}return yC(e,t,r,i)}function wC(n,e,t,r,i){let o=ik(t);if(typeof o=="function"){if(!oC(e,n,r))return r&de.Host?mC(i,t,r):yC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&de.Optional))om(t);else return s}finally{cC()}}else if(typeof o=="number"){let s=null,a=gC(n,e),u=Jo,l=r&de.Host?e[kn][vn]:null;for((a===-1||r&de.SkipSelf)&&(u=a===-1?Em(n,e):e[a+8],u===Jo||!BD(r,!1)?a=-1:(s=e[ae],a=ql(u),e=zl(u,e)));a!==-1;){let d=e[ae];if(UD(o,a,d.data)){let f=rk(a,e,t,s,r,l);if(f!==Mn)return f}u=e[a+8],u!==Jo&&BD(r,e[ae].data[a+8]===l)&&UD(o,a,e)?(s=d,a=ql(u),e=zl(u,e)):a=-1}}return i}function rk(n,e,t,r,i,o){let s=e[ae],a=s.data[n+8],u=r==null?gd(a)&&Tg:r!=s&&(a.type&3)!==0,l=i&de.Host&&o===a,d=Pl(a,s,t,u,l);return d!==null?Hi(e,s,d,a):Mn}function Pl(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&qr(y)&&y.type===t)return u}return null}function Hi(n,e,t,r){let i=n[t],o=e.data;if(QP(i)){let s=i;s.resolving&&NN(MN(o[t]));let a=Hl(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Bt(s.injectImpl):null,d=oC(n,r,de.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&WP(t,o[t],e)}finally{l!==null&&Bt(l),Hl(a),s.resolving=!1,cC()}}return i}function ik(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ha)?n[Ha]:void 0;return typeof e=="number"?e>=0?e&fC:ok:e}function UD(n,e,t){let r=1<<n;return!!(t[e+(n>>pC)]&r)}function BD(n,e){return!(n&de.Self)&&!(n&de.Host&&e)}var Vi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return vC(this._tNode,this._lView,e,dd(r),t)}};function ok(){return new Vi(_t(),pe())}function Dm(n){return Xa(()=>{let e=n.prototype.constructor,t=e[Ol]||bg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ol]||bg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function bg(n){return gT(n)?()=>{let e=bg(Mt(n));return e&&e()}:ji(n)}function sk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!(s[te]&512);){let a=wC(o,s,t,r|de.Self,Mn);if(a!==Mn)return a;let u=o.parent;if(!u){let l=s[BT];if(l){let d=l.get(t,Mn,r);if(d!==Mn)return d}u=_C(s),s=s[ds]}o=u}return i}function _C(n){let e=n[ae],t=e.type;return t===2?e.declTNode:t===1?n[vn]:null}function Tm(n){return nk(_t(),n)}function $D(n,e=null,t=null,r){let i=IC(n,e,t,r);return i.resolveInjectorInitializers(),i}function IC(n,e=null,t=null,r,i=new Set){let o=[t||en,uP(n)];return r=r||(typeof n=="object"?void 0:Nt(n)),new Qa(o,e||dm(),r||null,i)}var nn=class n{static{this.THROW_IF_NOT_FOUND=Wa}static{this.NULL=new Vl}static create(e,t){if(Array.isArray(e))return $D({name:""},t,e,"");{let r=e.name??"";return $D({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>V(TT)})}static{this.__NG_ELEMENT_ID__=-1}};var ak=new q("");ak.__NG_ELEMENT_ID__=n=>{let e=_t();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&de.Optional)return null;throw new Y(204,!1)};var uk="ngOriginalError";function ig(n){return n[uk]}var EC=!0,Cm=(()=>{class n{static{this.__NG_ELEMENT_ID__=ck}static{this.__NG_ENV_ID__=t=>t}}return n})(),Sg=class extends Cm{constructor(e){super(),this._lView=e}onDestroy(e){return ZT(this._lView,e),()=>xP(this._lView,e)}};function ck(){return new Sg(pe())}var cr=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new dt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Ag=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,UT()&&(this.destroyRef=L(Cm,{optional:!0})??void 0,this.pendingTasks=L(cr,{optional:!0})??void 0)}emit(e){let t=ye(null);try{super.next(e)}finally{ye(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Be&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},vt=Ag;function Wl(...n){}function DC(n){let e,t;function r(){n=Wl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function qD(n){return queueMicrotask(()=>n()),()=>{n=Wl}}var bm="isAngularZone",Kl=bm+"_ID",lk=0,he=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vt(!1),this.onMicrotaskEmpty=new vt(!1),this.onStable=new vt(!1),this.onError=new vt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=EC}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,fk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(bm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,dk,Wl,Wl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},dk={};function Sm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){DC(()=>{n.callbackScheduled=!1,Rg(n),n.isCheckStableRunning=!0,Sm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Rg(n)}function fk(n){let e=()=>{hk(n)},t=lk++;n._inner=n._inner.fork({name:"angular",properties:{[bm]:!0,[Kl]:t,[Kl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(pk(u))return r.invokeTask(o,s,a,u);try{return zD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),HD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return zD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!gk(u)&&e(),HD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Rg(n),Sm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Rg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function zD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HD(n){n._nesting--,Sm(n)}var Ql=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vt,this.onMicrotaskEmpty=new vt,this.onStable=new vt,this.onError=new vt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function pk(n){return TC(n,"__ignore_ng_zone__")}function gk(n){return TC(n,"__scheduler_tick__")}function TC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function mk(n="zone.js",e){return n==="noop"?new Ql:n==="zone.js"?new he(e):n}var ir=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ig(e);for(;t&&ig(t);)t=ig(t);return t||null}},yk=new q("",{providedIn:"root",factory:()=>{let n=L(he),e=L(ir);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function vk(){return hs(_t(),pe())}function hs(n,e){return new lr(on(n,e))}var lr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=vk}}return n})();function wk(n){return n instanceof lr?n.nativeElement:n}function _k(){return this._results[Symbol.iterator]()}var xg=class n{get changes(){return this._changes??=new vt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=_k)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=qN(e);(this._changesDetected=!$N(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function CC(n){return(n.flags&128)===128}var bC=new Map,Ik=0;function Ek(){return Ik++}function Dk(n){bC.set(n[pd],n)}function Mg(n){bC.delete(n[pd])}var GD="__ngContext__";function zr(n,e){Ur(e)?(n[GD]=e[pd],Dk(e)):n[GD]=e}function SC(n){return RC(n[Ya])}function AC(n){return RC(n[mn])}function RC(n){for(;n!==null&&!ur(n);)n=n[mn];return n}var Ng;function xC(n){Ng=n}function Tk(){if(Ng!==void 0)return Ng;if(typeof document<"u")return document;throw new Y(210,!1)}var Dd=new q("",{providedIn:"root",factory:()=>Ck}),Ck="ng",Am=new q(""),It=new q("",{providedIn:"platform",factory:()=>"unknown"});var Rm=new q("",{providedIn:"root",factory:()=>Tk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bk="h",Sk="b";var Ak=()=>null;function xm(n,e,t=!1){return Ak(n,e,t)}var MC=!1,Rk=new q("",{providedIn:"root",factory:()=>MC});var Cl;function xk(){if(Cl===void 0&&(Cl=null,xt.trustedTypes))try{Cl=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Cl}function WD(n){return xk()?.createScriptURL(n)||n}var Yl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hT})`}};function nu(n){return n instanceof Yl?n.changingThisBreaksApplicationSecurity:n}function Mm(n,e){let t=Mk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${hT})`)}return t===e}function Mk(n){return n instanceof Yl&&n.getTypeName()||null}var Nk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function NC(n){return n=String(n),n.match(Nk)?n:"unsafe:"+n}var Td=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Td||{});function Pk(n){let e=kC();return e?e.sanitize(Td.URL,n)||"":Mm(n,"URL")?nu(n):NC(nr(n))}function kk(n){let e=kC();if(e)return WD(e.sanitize(Td.RESOURCE_URL,n)||"");if(Mm(n,"ResourceURL"))return WD(nu(n));throw new Y(904,!1)}function Ok(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?kk:Pk}function PC(n,e,t){return Ok(e,t)(n)}function kC(){let n=pe();return n&&n[Pn].sanitizer}var Fk=/^>|^->|<!--|-->|--!>|<!-$/g,Lk=/(<|>)/g,Vk="\u200B$1\u200B";function jk(n){return n.replace(Fk,e=>e.replace(Lk,Vk))}function H3(n){return n.ownerDocument}function OC(n){return n instanceof Function?n():n}function Uk(n){return(n??L(nn)).get(It)==="browser"}var or=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(or||{}),Bk;function Nm(n,e){return Bk(n,e)}function Qo(n,e,t,r,i){if(r!=null){let o,s=!1;ur(r)?o=r:Ur(r)&&(s=!0,r=r[ar]);let a=On(r);n===0&&t!==null?i==null?UC(e,t,a):Zl(e,t,a,i||null,!0):n===1&&t!==null?Zl(e,t,a,i||null,!0):n===2?rO(e,a,s):n===3&&e.destroyNode(a),o!=null&&oO(e,n,o,t,i)}}function $k(n,e){return n.createText(e)}function qk(n,e,t){n.setValue(e,t)}function zk(n,e){return n.createComment(jk(e))}function FC(n,e,t){return n.createElement(e,t)}function Hk(n,e){LC(n,e),e[ar]=null,e[vn]=null}function Gk(n,e,t,r,i,o){r[ar]=i,r[vn]=e,bd(n,r,t,1,i,o)}function LC(n,e){e[Pn].changeDetectionScheduler?.notify(9),bd(n,e,e[Je],2,null,null)}function Wk(n){let e=n[Ya];if(!e)return og(n[ae],n);for(;e;){let t=null;if(Ur(e))t=e[Ya];else{let r=e[Gt];r&&(t=r)}if(!t){for(;e&&!e[mn]&&e!==n;)Ur(e)&&og(e[ae],e),e=e[wt];e===null&&(e=n),Ur(e)&&og(e[ae],e),t=e&&e[mn]}e=t}}function Kk(n,e,t,r){let i=Gt+r,o=t.length;r>0&&(t[i-1][mn]=e),r<o-Gt?(e[mn]=t[i],DT(t,Gt+r,e)):(t.push(e),e[mn]=null),e[wt]=t;let s=e[Ui];s!==null&&t!==s&&VC(s,e);let a=e[rr];a!==null&&a.insertView(n),Ig(e),e[te]|=128}function VC(n,e){let t=n[rs],r=e[wt];if(Ur(r))n[te]|=$l.HasTransplantedViews;else{let i=r[wt][kn];e[kn]!==i&&(n[te]|=$l.HasTransplantedViews)}t===null?n[rs]=[e]:t.push(e)}function Pm(n,e){let t=n[rs],r=t.indexOf(e);t.splice(r,1)}function Pg(n,e){if(n.length<=Gt)return;let t=Gt+e,r=n[t];if(r){let i=r[Ui];i!==null&&i!==n&&Pm(i,r),e>0&&(n[t-1][mn]=r[mn]);let o=Ll(n,Gt+e);Hk(r[ae],r);let s=o[rr];s!==null&&s.detachView(o[ae]),r[wt]=null,r[mn]=null,r[te]&=-129}return r}function jC(n,e){if(!(e[te]&256)){let t=e[Je];t.destroyNode&&bd(n,e,t,3,null,null),Wk(e)}}function og(n,e){if(e[te]&256)return;let t=ye(null);try{e[te]&=-129,e[te]|=256,e[tn]&&Np(e[tn]),Yk(n,e),Qk(n,e),e[ae].type===1&&e[Je].destroy();let r=e[Ui];if(r!==null&&ur(e[wt])){r!==e[wt]&&Pm(r,e);let i=e[rr];i!==null&&i.detachView(n)}Mg(e)}finally{ye(t)}}function Qk(n,e){let t=n.cleanup,r=e[Ul];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Ul]=null);let i=e[jr];if(i!==null){e[jr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Yk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof zi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];xn(4,a,u);try{u.call(a)}finally{xn(5,a,u)}}else{xn(4,i,o);try{o.call(i)}finally{xn(5,i,o)}}}}}function Zk(n,e,t){return Jk(n,e.parent,t)}function Jk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ar];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Nn.None||o===Nn.Emulated)return null}return on(r,t)}}function Zl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function UC(n,e,t){n.appendChild(e,t)}function KD(n,e,t,r,i){r!==null?Zl(n,e,t,r,i):UC(n,e,t)}function BC(n,e){return n.parentNode(e)}function Xk(n,e){return n.nextSibling(e)}function eO(n,e,t){return nO(n,e,t)}function tO(n,e,t){return n.type&40?on(n,t):null}var nO=tO,QD;function Cd(n,e,t,r){let i=Zk(n,r,e),o=e[Je],s=r.parent||e[vn],a=eO(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)KD(o,i,t[u],a,!1);else KD(o,i,t,a,!1);QD!==void 0&&QD(o,r,e,t,i)}function za(n,e){if(e!==null){let t=e.type;if(t&3)return on(e,n);if(t&4)return kg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return za(n,r);{let i=n[e.index];return ur(i)?kg(-1,i):On(i)}}else{if(t&128)return za(n,e.next);if(t&32)return Nm(e,n)()||On(n[e.index]);{let r=$C(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$i(n[kn]);return za(i,r)}else return za(n,e.next)}}}return null}function $C(n,e){if(e!==null){let r=n[kn][vn],i=e.projection;return r.projection[i]}return null}function kg(n,e){let t=Gt+n+1;if(t<e.length){let r=e[t],i=r[ae].firstChild;if(i!==null)return za(r,i)}return e[Bi]}function rO(n,e,t){n.removeChild(null,e,t)}function km(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&zr(On(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)km(n,e,t.child,r,i,o,!1),Qo(e,n,i,a,o);else if(u&32){let l=Nm(t,r),d;for(;d=l();)Qo(e,n,i,d,o);Qo(e,n,i,a,o)}else u&16?iO(n,e,r,t,i,o):Qo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function bd(n,e,t,r,i,o){km(t,r,n.firstChild,e,i,o,!1)}function iO(n,e,t,r,i,o){let s=t[kn],u=s[vn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];Qo(e,n,i,d,o)}else{let l=u,d=s[wt];CC(r)&&(l.flags|=128),km(n,e,l,d,i,o,!0)}}function oO(n,e,t,r,i){let o=t[Bi],s=On(t);o!==s&&Qo(e,n,r,o,i);for(let a=Gt;a<t.length;a++){let u=t[a];bd(u[ae],u,n,e,r,o)}}function sO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:or.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=or.Important),n.setStyle(t,r,i,o))}}function aO(n,e,t){n.setAttribute(e,"style",t)}function qC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function zC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&gg(n,e,r),i!==null&&qC(n,e,i),o!==null&&aO(n,e,o)}var wn={};function G3(n=1){HC(ut(),pe(),Kr()+n,!1)}function HC(n,e,t,r){if(!r)if((e[te]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ml(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Nl(e,o,0,t)}qi(t)}function ze(n,e=de.Default){let t=pe();if(t===null)return V(n,e);let r=_t();return vC(r,t,Mt(n),e)}function GC(){let n="invalid";throw new Error(n)}function WC(n,e,t,r,i,o){let s=ye(null);try{let a=null;i&Br.SignalBased&&(a=e[r][Zn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Br.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):qT(e,a,r,o)}finally{ye(s)}}function uO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)qi(~i);else{let o=i,s=t[++r],a=t[++r];BP(s,o);let u=e[o];a(2,u)}}}finally{qi(-1)}}function Sd(n,e,t,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[ar]=i,f[te]=r|4|128|8|64,(l!==null||n&&n[te]&2048)&&(f[te]|=2048),QT(f),f[wt]=f[ds]=n,f[yn]=t,f[Pn]=s||n&&n[Pn],f[Je]=a||n&&n[Je],f[ns]=u||n&&n[ns]||null,f[vn]=o,f[pd]=Ek(),f[jl]=d,f[BT]=l,f[kn]=e.type==2?n[kn]:f,f}function ru(n,e,t,r,i){let o=n.data[e];if(o===null)o=cO(n,e,t,r,i),UP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=LP();o.injectorIndex=s===null?-1:s.injectorIndex}return Yi(o,!0),o}function cO(n,e,t,r,i){let o=eC(),s=gm(),a=s?o:o&&o.parent,u=n.data[e]=gO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function KC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function QC(n,e,t,r,i){let o=Kr(),s=r&2;try{qi(-1),s&&e.length>Wt&&HC(n,e,Wt,!1),xn(s?2:0,i),t(r,i)}finally{qi(o),xn(s?3:1,i)}}function Om(n,e,t){if(hm(e)){let r=ye(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ye(r)}}}function Fm(n,e,t){XT()&&(IO(n,e,t,on(t,e)),(t.flags&64)===64&&XC(n,e,t))}function Lm(n,e,t=on){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function YC(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Vm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Vm(n,e,t,r,i,o,s,a,u,l,d){let f=Wt+r,g=f+i,y=lO(f,g),D=typeof l=="function"?l():l;return y[ae]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:d}}function lO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wn);return t}function dO(n,e,t,r){let o=r.get(Rk,MC)||t===Nn.ShadowDom,s=n.selectRootElement(e,o);return hO(s),s}function hO(n){fO(n)}var fO=()=>null;function pO(n,e,t,r){let i=nb(e);i.push(t),n.firstCreatePass&&rb(n).push(r,i.length-1)}function gO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return kP()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function YD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Br.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?ZD(r,t,l,a,u):ZD(r,t,l,a)}return r}function ZD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function mO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=t?t.get(f):null,y=g?g.inputs:null,D=g?g.outputs:null;u=YD(0,f.inputs,d,u,y),l=YD(1,f.outputs,d,l,D);let C=u!==null&&s!==null&&!um(e)?NO(u,d,s):null;a.push(C)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function yO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ZC(n,e,t,r,i,o,s,a){let u=on(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Um(n,t,d,r,i),gd(e)&&vO(t,e.index)):e.type&3?(r=yO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function vO(n,e){let t=Wr(e,n);t[te]&16||(t[te]|=64)}function jm(n,e,t,r){if(XT()){let i=r===null?null:{"":-1},o=DO(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&JC(n,e,t,s,i,a),i&&TO(t,r,i)}t.mergedAttrs=Ka(t.mergedAttrs,t.attrs)}function JC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Cg(Gl(t,e),n,r[l].type);bO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=KC(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Ka(t.mergedAttrs,d.hostAttrs),SO(n,t,e,u,d),CO(u,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}mO(n,t,o)}function wO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;_O(s)!=a&&s.push(a),s.push(t,r,o)}}function _O(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function IO(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;gd(t)&&AO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Gl(t,e),zr(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Hi(e,n,a,t);if(zr(l,e),s!==null&&MO(e,a-i,l,u,t,s),qr(u)){let d=Wr(t.index,e);d[yn]=Hi(e,n,a,t)}}}function XC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=$P();try{qi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Eg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&EO(u,l)}}finally{qi(-1),Eg(s)}}function EO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function DO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(XN(e,s.selectors,!1))if(r||(r=[]),qr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Og(n,e,u)}else r.unshift(s),Og(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Og(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function TO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Y(-301,!1);r.push(e[i],o)}}}function CO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;qr(e)&&(t[""]=n)}}function bO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function SO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ji(i.type,!0)),s=new zi(o,qr(i),ze);n.blueprint[r]=s,t[r]=s,wO(n,e,r,KC(n,t,i.hostVars,wn),i)}function AO(n,e,t){let r=on(e,n),i=YC(t),o=n[Pn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Ad(n,Sd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function RO(n,e,t,r,i,o){let s=on(n,e);xO(e[Je],s,o,n.value,t,r,i)}function xO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?nr(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function MO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];WC(r,t,u,l,d,f)}}function NO(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function eb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function tb(n,e){let t=n.contentQueries;if(t!==null){let r=ye(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];vm(o),a.contentQueries(2,e[s],s)}}}finally{ye(r)}}}function Ad(n,e){return n[Ya]?n[FD][mn]=e:n[Ya]=e,n[FD]=e,e}function Fg(n,e,t){vm(0);let r=ye(null);try{e(n,t)}finally{ye(r)}}function nb(n){return n[Ul]??=[]}function rb(n){return n.cleanup??=[]}function ib(n,e){let t=n[ns],r=t?t.get(ir,null):null;r&&r.handleError(e)}function Um(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],d=n.data[s];WC(d,l,r,a,u,i)}}function Bm(n,e,t){let r=WT(e,n);qk(n[Je],r,t)}function PO(n,e){let t=Wr(e,n),r=t[ae];kO(r,t);let i=t[ar];i!==null&&t[jl]===null&&(t[jl]=xm(i,t[ns])),$m(r,t,t[yn])}function kO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $m(n,e,t){wm(e);try{let r=n.viewQuery;r!==null&&Fg(1,r,t);let i=n.template;i!==null&&QC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[rr]?.finishViewCreation(n),n.staticContentQueries&&tb(n,e),n.staticViewQueries&&Fg(2,n.viewQuery,t);let o=n.components;o!==null&&OO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[te]&=-5,_m()}}function OO(n,e){for(let t=0;t<e.length;t++)PO(n,e[t])}function FO(n,e,t,r){let i=ye(null);try{let o=e.tView,a=n[te]&4096?4096:16,u=Sd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ui]=l;let d=n[rr];return d!==null&&(u[rr]=d.createEmbeddedView(o)),$m(o,u,t),u}finally{ye(i)}}function JD(n,e){return!e||e.firstChild===null||CC(n)}function LO(n,e,t,r=!0){let i=e[ae];if(Kk(i,e,n,t),r){let s=kg(t,n),a=e[Je],u=BC(a,n[Bi]);u!==null&&Gk(i,n[vn],a,e,u,s)}let o=e[jl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Jl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(On(o)),ur(o)&&VO(o,r);let s=t.type;if(s&8)Jl(n,e,t.child,r);else if(s&32){let a=Nm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=$C(e,t);if(Array.isArray(a))r.push(...a);else{let u=$i(e[kn]);Jl(u[ae],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function VO(n,e){for(let t=Gt;t<n.length;t++){let r=n[t],i=r[ae].firstChild;i!==null&&Jl(r[ae],r,i,e)}n[Bi]!==n[ar]&&e.push(n[Bi])}var ob=[];function jO(n){return n[tn]??UO(n)}function UO(n){let e=ob.pop()??Object.create($O);return e.lView=n,e}function BO(n){n.lView[tn]!==n&&(n.lView=null,ob.push(n))}var $O=Ce(z({},Va),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{vd(n.lView)},consumerOnSignalRead(){this.lView[tn]=this}});function qO(n){let e=n[tn]??Object.create(zO);return e.lView=n,e}var zO=Ce(z({},Va),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=$i(n.lView);for(;e&&!sb(e[ae]);)e=$i(e);e&&YT(e)},consumerOnSignalRead(){this.lView[tn]=this}});function sb(n){return n.type!==2}var HO=100;function ab(n,e=!0,t=0){let r=n[Pn],i=r.rendererFactory,o=!1;o||i.begin?.();try{GO(n,t)}catch(s){throw e&&ib(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function GO(n,e){let t=nC();try{VD(!0),Lg(n,e);let r=0;for(;yd(n);){if(r===HO)throw new Y(103,!1);r++,Lg(n,1)}}finally{VD(t)}}function WO(n,e,t,r){let i=e[te];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Pn].inlineEffectRunner?.flush(),wm(e);let a=!0,u=null,l=null;o||(sb(n)?(l=jO(e),u=Kc(l)):HE()===null?(a=!1,l=qO(e),u=Kc(l)):e[tn]&&(Np(e[tn]),e[tn]=null));try{QT(e),jP(n.bindingStartIndex),t!==null&&QC(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&Ml(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Nl(e,y,0,null),tg(e,0)}if(s||KO(e),ub(e,0),n.contentQueries!==null&&tb(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&Ml(e,y)}else{let y=n.contentHooks;y!==null&&Nl(e,y,1),tg(e,1)}uO(n,e);let f=n.components;f!==null&&lb(e,f,0);let g=n.viewQuery;if(g!==null&&Fg(2,g,r),!o)if(d){let y=n.viewCheckHooks;y!==null&&Ml(e,y)}else{let y=n.viewHooks;y!==null&&Nl(e,y,2),tg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[eg]){for(let y of e[eg])y();e[eg]=null}o||(e[te]&=-73)}catch(d){throw o||vd(e),d}finally{l!==null&&(xp(l,u),a&&BO(l)),_m()}}function ub(n,e){for(let t=SC(n);t!==null;t=AC(t))for(let r=Gt;r<t.length;r++){let i=t[r];cb(i,e)}}function KO(n){for(let e=SC(n);e!==null;e=AC(e)){if(!(e[te]&$l.HasTransplantedViews))continue;let t=e[rs];for(let r=0;r<t.length;r++){let i=t[r];YT(i)}}}function QO(n,e,t){let r=Wr(e,n);cb(r,t)}function cb(n,e){pm(n)&&Lg(n,e)}function Lg(n,e){let r=n[ae],i=n[te],o=n[tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Mp(o)),s||=!1,o&&(o.dirty=!1),n[te]&=-9217,s)WO(r,n,r.template,n[yn]);else if(i&8192){ub(n,1);let a=r.components;a!==null&&lb(n,a,1)}}function lb(n,e,t){for(let r=0;r<e.length;r++)QO(n,e[r],t)}function qm(n,e){let t=nC()?64:1088;for(n[Pn].changeDetectionScheduler?.notify(e);n;){n[te]|=t;let r=$i(n);if(wg(n)&&!r)return n;n=r}return null}var Gi=class{get rootNodes(){let e=this._lView,t=e[ae];return Jl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wt];if(ur(e)){let t=e[Bl],r=t?t.indexOf(this):-1;r>-1&&(Pg(e,r),Ll(t,r))}this._attachedToViewContainer=!1}jC(this._lView[ae],this._lView)}onDestroy(e){ZT(this._lView,e)}markForCheck(){qm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){Ig(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,ab(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=wg(this._lView),t=this._lView[Ui];t!==null&&!e&&Pm(t,this._lView),LC(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=wg(this._lView),r=this._lView[Ui];r!==null&&!t&&VC(r,this._lView),Ig(this._lView)}},Wi=(()=>{class n{static{this.__NG_ELEMENT_ID__=JO}}return n})(),YO=Wi,ZO=class extends YO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=FO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Gi(i)}};function JO(){return Rd(_t(),pe())}function Rd(n,e){return n.type&4?new ZO(e,n,hs(n,e)):null}var K3=new RegExp(`^(\\d+)*(${Sk}|${bk})*(.*)`);var XO=()=>null;function XD(n,e){return XO(n,e)}var os=class{},zm=new q("",{providedIn:"root",factory:()=>!1});var db=new q(""),hb=new q(""),Vg=class{},Xl=class{};function e1(n){let e=Error(`No component factory found for ${Nt(n)}.`);return e[t1]=n,e}var t1="ngComponent";var jg=class{resolveComponentFactory(e){throw e1(e)}},ss=class{static{this.NULL=new jg}},as=class{},iu=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>n1()}}return n})();function n1(){let n=pe(),e=_t(),t=Wr(e.index,n);return(Ur(t)?t:n)[Je]}var r1=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function ed(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=bD(i,a);else if(o==2){let u=a,l=e[++s];r=bD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var td=class extends ss{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=$r(e);return new us(t,this.ngModule)}};function eT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Br.None;e?t.push({propName:s,templateName:r,isSignal:(a&Br.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function i1(n){let e=n.toLowerCase();return e==="svg"?CP:e==="math"?bP:null}var us=class extends Xl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=eT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return eT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=rP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=ye(null);try{i=i||this.ngModule;let s=i instanceof Pt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Dg(e,s):e,u=a.get(as,null);if(u===null)throw new Y(407,!1);let l=a.get(r1,null),d=a.get(os,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?dO(g,r,this.componentDef.encapsulation,a):FC(g,y,i1(y)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let b=null;D!==null&&(b=xm(D,a,!0));let F=Vm(0,null,null,1,0,null,null,null,null,null,null),U=Sd(null,F,null,C,null,null,f,g,a,null,b);wm(U);let P,G,Z=null;try{let K=this.componentDef,I,v=null;K.findHostDirectiveDefs?(I=[],v=new Map,K.findHostDirectiveDefs(K,I,v),I.push(K)):I=[K];let _=o1(U,D);Z=s1(_,D,K,I,U,f,g),G=KT(F,Wt),D&&c1(g,K,D,r),t!==void 0&&l1(G,this.ngContentSelectors,t),P=u1(Z,K,I,v,U,[d1]),$m(F,U,null)}catch(K){throw Z!==null&&Mg(Z),Mg(U),K}finally{_m()}return new Ug(this.componentType,P,hs(G,U),U,G)}finally{ye(o)}}},Ug=class extends Vg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Gi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Um(o[ae],o,i,e,t),this.previousInputValues.set(e,t);let s=Wr(this._tNode.index,o);qm(s,1)}}get injector(){return new Vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function o1(n,e){let t=n[ae],r=Wt;return n[r]=e,ru(t,r,2,"#host",null)}function s1(n,e,t,r,i,o,s){let a=i[ae];a1(r,n,e,s);let u=null;e!==null&&(u=xm(e,i[ns]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Sd(i,YC(t),null,d,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Og(a,n,r.length-1),Ad(i,f),i[n.index]=f}function a1(n,e,t,r){for(let i of n)e.mergedAttrs=Ka(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ed(e,e.mergedAttrs,!0),t!==null&&zC(r,t,e))}function u1(n,e,t,r,i,o){let s=_t(),a=i[ae],u=on(s,i);JC(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,g=Hi(i,a,f,s);zr(g,i)}XC(a,i,s),u&&zr(u,i);let l=Hi(i,a,s.directiveStart+s.componentOffset,s);if(n[yn]=i[yn]=l,o!==null)for(let d of o)d(l,e);return Om(a,s,i),l}function c1(n,e,t,r){if(r)gg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=iP(e.selectors[0]);i&&gg(n,t,i),o&&o.length>0&&qC(n,t,o.join(" "))}}function l1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function d1(){let n=_t();Ed(pe()[ae],n)}var Qr=(()=>{class n{static{this.__NG_ELEMENT_ID__=h1}}return n})();function h1(){let n=_t();return pb(n,pe())}var f1=Qr,fb=class extends f1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return hs(this._hostTNode,this._hostLView)}get injector(){return new Vi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Em(this._hostTNode,this._hostLView);if(hC(e)){let t=zl(e,this._hostLView),r=ql(e),i=t[ae].data[r+8];return new Vi(i,t)}else return new Vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=tT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=XD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,JD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!IP(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new us($r(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let C=(s?l:this.parentInjector).get(Pt,null);C&&(o=C)}let d=$r(u.componentType??{}),f=XD(this._lContainer,d?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,JD(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(AP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[wt],l=new fb(u,u[vn],u[wt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return LO(s,i,o,r),e.attachToViewContainerRef(),DT(sg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=tT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Pg(this._lContainer,t);r&&(Ll(sg(this._lContainer),t),jC(r[ae],r))}detach(e){let t=this._adjustIndex(e,-1),r=Pg(this._lContainer,t);return r&&Ll(sg(this._lContainer),t)!=null?new Gi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function tT(n){return n[Bl]}function sg(n){return n[Bl]||(n[Bl]=[])}function pb(n,e){let t,r=e[n.index];return ur(r)?t=r:(t=eb(r,e,null,n),e[n.index]=t,Ad(e,t)),g1(t,e,n,r),new fb(t,n,e)}function p1(n,e){let t=n[Je],r=t.createComment(""),i=on(e,n),o=BC(t,i);return Zl(t,o,r,Xk(t,i),!1),r}var g1=v1,m1=()=>!1;function y1(n,e,t){return m1(n,e,t)}function v1(n,e,t,r){if(n[Bi])return;let i;t.type&8?i=On(r):i=p1(e,t),n[Bi]=i}var Bg=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},$g=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Hm(e,t).matches!==null&&this.queries[t].setDirty()}},qg=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=b1(e):this.predicate=e}},zg=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Hg=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,w1(t,o)),this.matchTNodeWithReadOption(e,t,Pl(t,e,o,!1,!1))}else r===Wi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Pl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===lr||i===Qr||i===Wi&&t.type&4)this.addMatch(t.index,-2);else{let o=Pl(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function w1(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function _1(n,e){return n.type&11?hs(n,e):n.type&4?Rd(n,e):null}function I1(n,e,t,r){return t===-1?_1(e,n):t===-2?E1(n,e,r):Hi(n,n[ae],t,e)}function E1(n,e,t){if(t===lr)return hs(e,n);if(t===Wi)return Rd(e,n);if(t===Qr)return pb(e,n)}function gb(n,e,t,r){let i=e[rr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let d=o[l];a.push(I1(e,d,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Gg(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=gb(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-u];for(let f=Gt;f<d.length;f++){let g=d[f];g[Ui]===g[wt]&&Gg(g[ae],g,l,r)}if(d[rs]!==null){let f=d[rs];for(let g=0;g<f.length;g++){let y=f[g];Gg(y[ae],y,l,r)}}}}}return r}function D1(n,e){return n[rr].queries[e].queryList}function T1(n,e,t){let r=new xg((t&4)===4);return pO(n,e,r,r.destroy),(e[rr]??=new $g).queries.push(new Bg(r))-1}function C1(n,e,t){let r=ut();return r.firstCreatePass&&(S1(r,new qg(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),T1(r,pe(),e)}function b1(n){return n.split(",").map(e=>e.trim())}function S1(n,e,t){n.queries===null&&(n.queries=new zg),n.queries.track(new Hg(e,t))}function Hm(n,e){return n.queries.getByIndex(e)}function A1(n,e){let t=n[ae],r=Hm(t,e);return r.crossesNgTemplate?Gg(t,n,e,[]):gb(t,n,r,e)}var nT=new Set;function fs(n){nT.has(n)||(nT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function R1(n){return typeof n=="function"&&n[Zn]!==void 0}function Y3(n,e){fs("NgSignals");let t=nD(n),r=t[Zn];return e?.equal&&(r.equal=e.equal),t.set=i=>Pp(r,i),t.update=i=>rD(r,i),t.asReadonly=x1.bind(t),t}function x1(){let n=this[Zn];if(n.readonlyFn===void 0){let e=()=>this();e[Zn]=n,n.readonlyFn=e}return n.readonlyFn}function mb(n){return R1(n)&&typeof n.set=="function"}function M1(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(O1))}return o}return nd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(y=>{a[l+g]=y,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>F1(o));e.push(u)}),P1(),Promise.all(e).then(()=>{})}var nd=new Map,N1=new Set;function P1(){let n=nd;return nd=new Map,n}function k1(){return nd.size===0}function O1(n){return typeof n=="string"?n:n.text()}function F1(n){N1.delete(n)}function L1(n){return Object.getPrototypeOf(n.prototype).constructor}function V1(n){let e=L1(n.type),t=!0,r=[n];for(;e;){let i;if(qr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=bl(n.inputs),s.inputTransforms=bl(n.inputTransforms),s.declaredInputs=bl(n.declaredInputs),s.outputs=bl(n.outputs);let a=i.hostBindings;a&&q1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&B1(n,u),l&&$1(n,l),j1(n,i),DN(n.outputs,i.outputs),qr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===V1&&(t=!1)}}e=Object.getPrototypeOf(e)}U1(r)}function j1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function U1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ka(i.hostAttrs,t=Ka(t,i.hostAttrs))}}function bl(n){return n===Xo?{}:n===en?[]:n}function B1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function $1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function q1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Gm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Hr=class{},Za=class{};var rd=class extends Hr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new td(this);let o=PT(e);this._bootstrapComponents=OC(o.bootstrap),this._r3Injector=IC(e,t,[{provide:Hr,useValue:this},{provide:ss,useValue:this.componentFactoryResolver},...r],Nt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},id=class extends Za{constructor(e){super(),this.moduleType=e}create(e){return new rd(this.moduleType,e,[])}};function z1(n,e,t){return new rd(n,e,t,!1)}var Wg=class extends Hr{constructor(e){super(),this.componentFactoryResolver=new td(this),this.instance=null;let t=new Qa([...e.providers,{provide:Hr,useValue:this},{provide:ss,useValue:this.componentFactoryResolver}],e.parent||dm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function xd(n,e,t=null){return new Wg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function yb(n){return G1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function H1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function G1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function vb(n,e,t){return n[e]=t}function sr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Wm(n,e,t,r){let i=sr(n,e,t);return sr(n,e+1,r)||i}function W1(n,e,t,r,i){let o=Wm(n,e,t,r);return sr(n,e+2,i)||o}function K1(n){return(n.flags&32)===32}function Q1(n,e,t,r,i,o,s,a,u){let l=e.consts,d=ru(e,n,4,s||null,a||null);jm(e,t,d,is(l,u)),Ed(e,d);let f=d.tView=Vm(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Y1(n,e,t,r,i,o,s,a,u,l){let d=t+Wt,f=e.firstCreatePass?Q1(d,e,n,r,i,o,s,a,u):e.data[d];Yi(f,!1);let g=J1(e,n,f,t);_d()&&Cd(e,n,g,f),zr(g,n);let y=eb(g,n,g,f);return n[d]=y,Ad(n,y),y1(y,f,n),md(f)&&Fm(e,n,f),u!=null&&Lm(n,f,l),f}function Z1(n,e,t,r,i,o,s,a){let u=pe(),l=ut(),d=is(l.consts,o);return Y1(u,l,n,e,t,r,i,d,s,a),Z1}var J1=X1;function X1(n,e,t,r){return Id(!0),e[Je].createComment("")}var Yo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Yo||{}),wb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Kg=class n{constructor(){this.ngZone=L(he),this.scheduler=L(os),this.errorHandler=L(ir,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Yo.EarlyRead,Yo.Write,Yo.MixedReadWrite,Yo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},Qg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Km(n,e){!e?.injector&&wP(Km);let t=e?.injector??L(nn);return Uk(t)?(fs("NgAfterNextRender"),tF(n,t,e,!0)):nF}function eF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function tF(n,e,t,r){let i=e.get(wb);i.impl??=e.get(Kg);let o=t?.phase??Yo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Cm):null,a=new Qg(i.impl,eF(n,o),r,s);return i.impl.register(a),a}var nF={destroy(){}};function Qm(n,e,t,r){let i=pe(),o=wd();if(sr(i,o,e)){let s=ut(),a=Im();RO(a,i,n,e,t,r)}return Qm}function rF(n,e,t,r){return sr(n,wd(),t)?e+nr(t)+r:wn}function iF(n,e,t,r,i,o){let s=rC(),a=Wm(n,s,t,i);return ym(2),a?e+nr(t)+r+nr(i)+o:wn}function oF(n,e,t,r,i,o,s,a){let u=rC(),l=W1(n,u,t,i,s);return ym(3),l?e+nr(t)+r+nr(i)+o+nr(s)+a:wn}function Sl(n,e){return n<<17|e<<2}function Ki(n){return n>>17&32767}function sF(n){return(n&2)==2}function aF(n,e){return n&131071|e<<17}function Yg(n){return n|2}function cs(n){return(n&131068)>>2}function ag(n,e){return n&-131069|e<<2}function uF(n){return(n&1)===1}function Zg(n){return n|1}function cF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ki(s),u=cs(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||eu(f,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let g=Ki(n[a+1]);n[r+1]=Sl(g,a),g!==0&&(n[g+1]=ag(n[g+1],r)),n[a+1]=aF(n[a+1],r)}else n[r+1]=Sl(a,0),a!==0&&(n[a+1]=ag(n[a+1],r)),a=r;else n[r+1]=Sl(u,0),a===0?a=r:n[u+1]=ag(n[u+1],r),u=r;l&&(n[r+1]=Yg(n[r+1])),rT(n,d,r,!0),rT(n,d,r,!1),lF(e,d,n,r,o),s=Sl(a,u),o?e.classBindings=s:e.styleBindings=s}function lF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&eu(o,e)>=0&&(t[r+1]=Zg(t[r+1]))}function rT(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ki(i):cs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];dF(u,e)&&(a=!0,n[s+1]=r?Zg(l):Yg(l)),s=r?Ki(l):cs(l)}a&&(n[t+1]=r?Yg(i):Zg(i))}function dF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?eu(n,e)>=0:!1}function hF(n,e,t){let r=pe(),i=wd();if(sr(r,i,e)){let o=ut(),s=Im();ZC(o,s,r,n,e,r[Je],t,!1)}return hF}function iT(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Um(n,t,o[s],s,r)}function fF(n,e){return pF(n,e,null,!0),fF}function pF(n,e,t,r){let i=pe(),o=ut(),s=ym(2);if(o.firstUpdatePass&&mF(o,n,s,r),e!==wn&&sr(i,s,e)){let a=o.data[Kr()];IF(o,a,i,i[Je],n,i[s+1]=EF(e,t),r,s)}}function gF(n,e){return e>=n.expandoStartIndex}function mF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Kr()],s=gF(n,t);DF(o,r)&&e===null&&!s&&(e=!1),e=yF(i,o,e,r),cF(i,o,e,t,s,r)}}function yF(n,e,t,r){let i=qP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=ug(null,n,e,t,r),t=Ja(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=ug(i,n,e,t,r),o===null){let u=vF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=ug(null,n,e,u[1],r),u=Ja(u,e.attrs,r),wF(n,e,r,u))}else o=_F(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function vF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(cs(r)!==0)return n[Ki(r)]}function wF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ki(i)]=r}function _F(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ja(r,s,t)}return Ja(r,e.attrs,t)}function ug(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ja(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ja(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),HN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function IF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=uF(l)?oT(u,e,t,i,cs(l),s):void 0;if(!od(d)){od(o)||sF(l)&&(o=oT(u,null,t,i,a,s));let f=WT(Kr(),t);sO(r,s,f,i,o)}}function oT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=t[i+1];g===wn&&(g=f?en:void 0);let y=f?Jp(g,r):d===r?g:void 0;if(l&&!od(y)&&(y=Jp(u,r)),od(y)&&(a=y,s))return a;let D=n[i+1];i=s?Ki(D):cs(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Jp(u,r))}return a}function od(n){return n!==void 0}function EF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Nt(nu(n)))),n}function DF(n,e){return(n.flags&(e?8:16))!==0}function TF(n,e,t,r,i,o){let s=e.consts,a=is(s,i),u=ru(e,n,2,r,a);return jm(e,t,u,is(s,o)),u.attrs!==null&&ed(u,u.attrs,!1),u.mergedAttrs!==null&&ed(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function _b(n,e,t,r){let i=pe(),o=ut(),s=Wt+n,a=i[Je],u=o.firstCreatePass?TF(s,o,i,e,t,r):o.data[s],l=CF(o,i,u,a,e,n);i[s]=l;let d=md(u);return Yi(u,!0),zC(a,l,u),!K1(u)&&_d()&&Cd(o,i,l,u),MP()===0&&zr(l,i),NP(),d&&(Fm(o,i,u),Om(o,u,i)),r!==null&&Lm(i,u),_b}function Ib(){let n=_t();gm()?tC():(n=n.parent,Yi(n,!1));let e=n;OP(e)&&FP(),PP();let t=ut();return t.firstCreatePass&&(Ed(t,n),hm(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&YP(e)&&iT(t,e,pe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ZP(e)&&iT(t,e,pe(),e.stylesWithoutHost,!1),Ib}function Ym(n,e,t,r){return _b(n,e,t,r),Ib(),Ym}var CF=(n,e,t,r,i,o)=>(Id(!0),FC(r,i,GP()));function bF(n,e,t,r,i){let o=e.consts,s=is(o,r),a=ru(e,n,8,"ng-container",s);s!==null&&ed(a,s,!0);let u=is(o,i);return jm(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function SF(n,e,t){let r=pe(),i=ut(),o=n+Wt,s=i.firstCreatePass?bF(o,i,r,e,t):i.data[o];Yi(s,!0);let a=RF(i,r,s,n);return r[o]=a,_d()&&Cd(i,r,a,s),zr(a,r),md(s)&&(Fm(i,r,s),Om(i,s,r)),t!=null&&Lm(r,s),SF}function AF(){let n=_t(),e=ut();return gm()?tC():(n=n.parent,Yi(n,!1)),e.firstCreatePass&&(Ed(e,n),hm(n)&&e.queries.elementEnd(n)),AF}var RF=(n,e,t,r)=>(Id(!0),zk(e[Je],""));function Z3(){return pe()}var Li=void 0;function xF(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var MF=["en",[["a","p"],["AM","PM"],Li],[["AM","PM"],Li,Li],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Li,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Li,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Li,"{1} 'at' {0}",Li],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",xF],cg={};function sn(n){let e=NF(n),t=sT(e);if(t)return t;let r=e.split("-")[0];if(t=sT(r),t)return t;if(r==="en")return MF;throw new Y(701,!1)}function sT(n){return n in cg||(cg[n]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[n]),cg[n]}var He=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(He||{});function NF(n){return n.toLowerCase().replace(/_/g,"-")}var sd="en-US";var PF=sd;function kF(n){typeof n=="string"&&(PF=n.toLowerCase().replace(/_/g,"-"))}var OF=(n,e,t)=>{};function Zm(n,e,t,r){let i=pe(),o=ut(),s=_t();return Eb(o,i,i[Je],s,n,e,r),Zm}function FF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ul],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Eb(n,e,t,r,i,o,s){let a=md(r),l=n.firstCreatePass&&rb(n),d=e[yn],f=nb(e),g=!0;if(r.type&3||s){let C=on(r,e),b=s?s(C):C,F=f.length,U=s?G=>s(On(G[r.index])):r.index,P=null;if(!s&&a&&(P=FF(n,e,i,r.index)),P!==null){let G=P.__ngLastListenerFn__||P;G.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,g=!1}else{o=uT(r,e,d,o),OF(C,i,o);let G=t.listen(b,i,o);f.push(o,G),l&&l.push(i,U,F,F+1)}}else o=uT(r,e,d,o);let y=r.outputs,D;if(g&&y!==null&&(D=y[i])){let C=D.length;if(C)for(let b=0;b<C;b+=2){let F=D[b],U=D[b+1],Z=e[F][U].subscribe(o),K=f.length;f.push(o,Z),l&&l.push(i,r.index,K,-(K+1))}}}function aT(n,e,t,r){let i=ye(null);try{return xn(6,e,t),t(r)!==!1}catch(o){return ib(n,o),!1}finally{xn(7,e,t),ye(i)}}function uT(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Wr(n.index,e):e;qm(s,5);let a=aT(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=aT(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function J3(n=1){return HP(n)}function X3(n,e,t){C1(n,e,t)}function LF(n){let e=pe(),t=ut(),r=iC();vm(r+1);let i=Hm(t,r);if(n.dirty&&SP(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=A1(e,r);n.reset(o,wk),n.notifyOnChanges()}return!0}return!1}function VF(){return D1(pe(),iC())}function jF(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function e8(n){let e=VP();return fm(e,Wt+n)}function t8(n,e=""){let t=pe(),r=ut(),i=n+Wt,o=r.firstCreatePass?ru(r,i,1,e,null):r.data[i],s=UF(r,t,o,e,n);t[i]=s,_d()&&Cd(r,t,s,o),Yi(o,!1)}var UF=(n,e,t,r,i)=>(Id(!0),$k(e[Je],r));function BF(n){return Db("",n,""),BF}function Db(n,e,t){let r=pe(),i=rF(r,n,e,t);return i!==wn&&Bm(r,Kr(),i),Db}function $F(n,e,t,r,i){let o=pe(),s=iF(o,n,e,t,r,i);return s!==wn&&Bm(o,Kr(),s),$F}function qF(n,e,t,r,i,o,s){let a=pe(),u=oF(a,n,e,t,r,i,o,s);return u!==wn&&Bm(a,Kr(),u),qF}function zF(n,e,t){mb(e)&&(e=e());let r=pe(),i=wd();if(sr(r,i,e)){let o=ut(),s=Im();ZC(o,s,r,n,e,r[Je],t,!1)}return zF}function n8(n,e){let t=mb(n);return t&&n.set(e),t}function HF(n,e){let t=pe(),r=ut(),i=_t();return Eb(r,t,t[Je],i,n,e),HF}function GF(n,e,t){let r=ut();if(r.firstCreatePass){let i=qr(n);Jg(t,r.data,r.blueprint,i,!0),Jg(e,r.data,r.blueprint,i,!1)}}function Jg(n,e,t,r,i){if(n=Mt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Jg(n[o],e,t,r,i);else{let o=ut(),s=pe(),a=_t(),u=ts(n)?n:Mt(n.provide),l=jT(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(ts(n)||!n.multi){let y=new zi(l,i,ze),D=dg(u,e,i?d:d+g,f);D===-1?(Cg(Gl(a,s),o,u),lg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=dg(u,e,d+g,f),D=dg(u,e,d,d+g),C=y>=0&&t[y],b=D>=0&&t[D];if(i&&!b||!i&&!C){Cg(Gl(a,s),o,u);let F=QF(i?KF:WF,t.length,i,r,l);!i&&b&&(t[D].providerFactory=F),lg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=Tb(t[i?D:y],l,!i&&r);lg(o,n,y>-1?y:D,F)}!i&&r&&b&&t[D].componentProviders++}}}function lg(n,e,t,r){let i=ts(e),o=hP(e);if(i||o){let u=(o?Mt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function Tb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function WF(n,e,t,r){return Xg(this.multi,[])}function KF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Hi(t,t[ae],this.providerFactory.index,r);o=a.slice(0,s),Xg(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Xg(i,o);return o}function Xg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function QF(n,e,t,r,i){let o=new zi(n,t,ze);return o.multi=[],o.index=e,o.componentProviders=0,Tb(o,i,r&&!t),o}function r8(n,e=[]){return t=>{t.providersResolver=(r,i)=>GF(r,i?i(n):n,e)}}var YF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=FT(!1,t.type),i=r.length>0?xd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(V(Pt))})}}return n})();function Cb(n){fs("NgStandalone"),n.getStandaloneInjector=e=>e.get(YF).getOrCreateStandaloneInjector(n)}function i8(n,e,t,r,i){return Sb(pe(),mm(),n,e,t,r,i)}function bb(n,e){let t=n[e];return t===wn?void 0:t}function ZF(n,e,t,r,i,o){let s=e+t;return sr(n,s,i)?vb(n,s+1,o?r.call(o,i):r(i)):bb(n,s+1)}function Sb(n,e,t,r,i,o,s){let a=e+t;return Wm(n,a,i,o)?vb(n,a+2,s?r.call(s,i,o):r(i,o)):bb(n,a+2)}function o8(n,e){let t=ut(),r,i=n+Wt;t.firstCreatePass?(r=JF(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ji(r.type,!0)),s,a=Bt(ze);try{let u=Hl(!1),l=o();return Hl(u),jF(t,pe(),i,l),l}finally{Bt(a)}}function JF(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function s8(n,e,t){let r=n+Wt,i=pe(),o=fm(i,r);return Ab(i,r)?ZF(i,mm(),e,o.transform,t,o):o.transform(t)}function a8(n,e,t,r){let i=n+Wt,o=pe(),s=fm(o,i);return Ab(o,i)?Sb(o,mm(),e,s.transform,t,r,s):s.transform(t,r)}function Ab(n,e){return n[ae].data[e].pure}function u8(n,e){return Rd(n,e)}var Al=null;function XF(n){Al!==null&&(n.defaultEncapsulation!==Al.defaultEncapsulation||n.preserveWhitespaces!==Al.preserveWhitespaces)||(Al=n)}var Gr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Rb=new Gr("18.2.13");var Md=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Jm=new q(""),ou=new q(""),Nd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Xm||(eL(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(V(he),V(Pd),V(ou))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Pd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Xm?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function eL(n){Xm=n}var Xm;function su(n){return!!n&&typeof n.then=="function"}function xb(n){return!!n&&typeof n.subscribe=="function"}var kd=new q(""),Mb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=L(kd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(su(o))t.push(o);else if(xb(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Od=new q("");function tL(){tD(()=>{throw new Y(600,!1)})}function nL(n){return n.isBoundToModule}var rL=10;function iL(n,e,t){try{let r=t();return su(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function Nb(n,e){return Array.isArray(e)?e.reduce(Nb,n):z(z({},n),e)}var dr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(yk),this.afterRenderManager=L(wb),this.zonelessEnabled=L(zm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=L(cr).hasPendingTasks.pipe(ee(t=>!t)),this._injector=L(Pt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Xl;if(!this._injector.get(Mb).done){let g=!i&&NT(t),y=!1;throw new Y(405,y)}let s;i?s=t:s=this._injector.get(ss).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=nL(s)?void 0:this._injector.get(Hr),u=r||s.selector,l=s.create(nn.NULL,[],u,a),d=l.location.nativeElement,f=l.injector.get(Jm,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),kl(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Y(101,!1);let t=ye(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ye(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(as,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<rL;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)oL(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>yd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;kl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Od,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>kl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function oL(n,e,t,r){if(!t&&!yd(n))return;ab(n,e,t&&!r?0:1)}var em=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Fd=(()=>{class n{compileModuleSync(t){return new id(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=PT(t),o=OC(i.declarations).reduce((s,a)=>{let u=$r(a);return u&&s.push(new us(u)),s},[]);return new em(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sL=new q("");function aL(n,e,t){let r=new id(t);return Promise.resolve(r)}function cT(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var uL=(()=>{class n{constructor(){this.zone=L(he),this.changeDetectionScheduler=L(os),this.applicationRef=L(dr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new he(Ce(z({},Pb()),{scheduleInRootZone:t})),[{provide:he,useFactory:n},{provide:es,multi:!0,useFactory:()=>{let r=L(uL,{optional:!0});return()=>r.initialize()}},{provide:es,multi:!0,useFactory:()=>{let r=L(lL);return()=>{r.initialize()}}},e===!0?{provide:db,useValue:!0}:[],{provide:hb,useValue:t??EC}]}function Pb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var lL=(()=>{class n{constructor(){this.subscription=new Be,this.initialized=!1,this.zone=L(he),this.pendingTasks=L(cr)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var dL=(()=>{class n{constructor(){this.appRef=L(dr),this.taskService=L(cr),this.ngZone=L(he),this.zonelessEnabled=L(zm),this.disableScheduling=L(db,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Be,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Kl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(hb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ql||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?qD:DC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Kl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,qD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hL(){return typeof $localize<"u"&&$localize.locale||sd}var Ld=new q("",{providedIn:"root",factory:()=>L(Ld,de.Optional|de.SkipSelf)||hL()});var ad=new q("");function Rl(n){return!n.moduleRef}function fL(n){let e=Rl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(he);return t.run(()=>{Rl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ir,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Rl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ad);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ad);s.add(o),n.moduleRef.onDestroy(()=>{kl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return iL(r,t,()=>{let o=e.get(Mb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ld,sd);if(kF(s||sd),Rl(n)){let a=e.get(dr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return pL(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function pL(n,e){let t=n.injector.get(dr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}var kb=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>mk(r?.ngZone,Ce(z({},Pb({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[cL({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:os,useExisting:dL}],u=z1(t.moduleType,this.injector,a);return fL({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=Nb({},r);return aL(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(ad,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(V(nn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ga=null,Ob=new q("");function gL(n){if(Ga&&!Ga.get(Ob,!1))throw new Y(400,!1);tL(),Ga=n;let e=n.get(kb);return vL(n),e}function ey(n,e,t=[]){let r=`Platform: ${e}`,i=new q(r);return(o=[])=>{let s=Fb();if(!s||s.injector.get(Ob,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):gL(mL(a,r))}return yL(i)}}function mL(n=[],e){return nn.create({name:e,providers:[{provide:fd,useValue:"platform"},{provide:ad,useValue:new Set([()=>Ga=null])},...n]})}function yL(n){let e=Fb();if(!e)throw new Y(401,!1);return e}function Fb(){return Ga?.get(kb)??null}function vL(n){n.get(Am,null)?.forEach(t=>t())}function ty(){return!1}var au=(()=>{class n{static{this.__NG_ELEMENT_ID__=wL}}return n})();function wL(n){return _L(_t(),pe(),(n&16)===16)}function _L(n,e,t){if(gd(n)&&!t){let r=Wr(n.index,e);return new Gi(r,r)}else if(n.type&175){let r=e[kn];return new Gi(r,e)}return null}var tm=class{constructor(){}supports(e){return yb(e)}create(e){return new nm(e)}},IL=(n,e)=>e,nm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||IL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<lT(r,i,o)?t:r,a=lT(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,D=y+g;d<=D&&D<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!yb(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,H1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new rm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ud),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ud),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},rm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},im=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ud=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new im,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function lT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function dT(){return new ny([new tm])}var ny=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:dT})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||dT()),deps:[[n,new sm,new ls]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();var Lb=ey(null,"core",[]),Vb=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(V(dr))}}static{this.\u0275mod=Ot({type:n})}static{this.\u0275inj=kt({})}}return n})();function uu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function c8(n,e){fs("NgSignals");let t=JE(n);return e?.equal&&(t[Zn].equal=e.equal),t}function EL(n){let e=ye(null);try{return n()}finally{ye(e)}}function jb(n){let e=$r(n);if(!e)return null;let t=new us(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Gb=null;function Zi(){return Gb}function Wb(n){Gb??=n}var Gd=class{};var Et=new q(""),dy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(TL),providedIn:"platform"})}}return n})(),Kb=new q(""),TL=(()=>{class n extends dy{constructor(){super(),this._doc=L(Et),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zi().getBaseHref(this._doc)}onPopState(t){let r=Zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function hy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Ub(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function fr(n){return n&&n[0]!=="?"?"?"+n:n}var gr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(fy),providedIn:"root"})}}return n})(),Qb=new q(""),fy=(()=>{class n extends gr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(Et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return hy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+fr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+fr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+fr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(V(dy),V(Qb,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yb=(()=>{class n extends gr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=hy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+fr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+fr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(V(dy),V(Qb,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),gs=(()=>{class n{constructor(t){this._subject=new vt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=SL(Ub(Bb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+fr(r))}normalize(t){return n.stripTrailingSlash(bL(this._basePath,Bb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=fr}static{this.joinWithSlash=hy}static{this.stripTrailingSlash=Ub}static{this.\u0275fac=function(r){return new(r||n)(V(gr))}}static{this.\u0275prov=W({token:n,factory:()=>CL(),providedIn:"root"})}}return n})();function CL(){return new gs(V(gr))}function bL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Bb(n){return n.replace(/\/index.html$/,"")}function SL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ft=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ft||{}),Ae=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ae||{}),Kt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Kt||{}),Zr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function AL(n){return sn(n)[He.LocaleId]}function RL(n,e,t){let r=sn(n),i=[r[He.DayPeriodsFormat],r[He.DayPeriodsStandalone]],o=an(i,e);return an(o,t)}function xL(n,e,t){let r=sn(n),i=[r[He.DaysFormat],r[He.DaysStandalone]],o=an(i,e);return an(o,t)}function ML(n,e,t){let r=sn(n),i=[r[He.MonthsFormat],r[He.MonthsStandalone]],o=an(i,e);return an(o,t)}function NL(n,e){let r=sn(n)[He.Eras];return an(r,e)}function Vd(n,e){let t=sn(n);return an(t[He.DateFormat],e)}function jd(n,e){let t=sn(n);return an(t[He.TimeFormat],e)}function Ud(n,e){let r=sn(n)[He.DateTimeFormat];return an(r,e)}function Kd(n,e){let t=sn(n),r=t[He.NumberSymbols][e];if(typeof r>"u"){if(e===Zr.CurrencyDecimal)return t[He.NumberSymbols][Zr.Decimal];if(e===Zr.CurrencyGroup)return t[He.NumberSymbols][Zr.Group]}return r}function Zb(n){if(!n[He.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[He.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function PL(n){let e=sn(n);return Zb(e),(e[He.ExtraData][2]||[]).map(r=>typeof r=="string"?ry(r):[ry(r[0]),ry(r[1])])}function kL(n,e,t){let r=sn(n);Zb(r);let i=[r[He.ExtraData][0],r[He.ExtraData][1]],o=an(i,e)||[];return an(o,t)||[]}function an(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function ry(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var OL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Bd={},FL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,pr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(pr||{}),Ee=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ee||{}),Ie=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ie||{});function LL(n,e,t,r){let i=GL(n);e=hr(t,e)||e;let s=[],a;for(;e;)if(a=FL.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=Xb(r,u),i=HL(i,r,!0));let l="";return s.forEach(d=>{let f=qL(d);l+=f?f(i,t,u):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Wd(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function hr(n,e){let t=AL(n);if(Bd[t]??={},Bd[t][e])return Bd[t][e];let r="";switch(e){case"shortDate":r=Vd(n,Kt.Short);break;case"mediumDate":r=Vd(n,Kt.Medium);break;case"longDate":r=Vd(n,Kt.Long);break;case"fullDate":r=Vd(n,Kt.Full);break;case"shortTime":r=jd(n,Kt.Short);break;case"mediumTime":r=jd(n,Kt.Medium);break;case"longTime":r=jd(n,Kt.Long);break;case"fullTime":r=jd(n,Kt.Full);break;case"short":let i=hr(n,"shortTime"),o=hr(n,"shortDate");r=$d(Ud(n,Kt.Short),[i,o]);break;case"medium":let s=hr(n,"mediumTime"),a=hr(n,"mediumDate");r=$d(Ud(n,Kt.Medium),[s,a]);break;case"long":let u=hr(n,"longTime"),l=hr(n,"longDate");r=$d(Ud(n,Kt.Long),[u,l]);break;case"full":let d=hr(n,"fullTime"),f=hr(n,"fullDate");r=$d(Ud(n,Kt.Full),[d,f]);break}return r&&(Bd[t][e]=r),r}function $d(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function _n(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function VL(n,e){return _n(n,3).substring(0,e)}function Xe(n,e,t=0,r=!1,i=!1){return function(o,s){let a=jL(n,o);if((t>0||a>-t)&&(a+=t),n===Ee.Hours)a===0&&t===-12&&(a=12);else if(n===Ee.FractionalSeconds)return VL(a,e);let u=Kd(s,Zr.MinusSign);return _n(a,e,u,r,i)}}function jL(n,e){switch(n){case Ee.FullYear:return e.getFullYear();case Ee.Month:return e.getMonth();case Ee.Date:return e.getDate();case Ee.Hours:return e.getHours();case Ee.Minutes:return e.getMinutes();case Ee.Seconds:return e.getSeconds();case Ee.FractionalSeconds:return e.getMilliseconds();case Ee.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function xe(n,e,t=Ft.Format,r=!1){return function(i,o){return UL(i,o,n,e,t,r)}}function UL(n,e,t,r,i,o){switch(t){case Ie.Months:return ML(e,i,r)[n.getMonth()];case Ie.Days:return xL(e,i,r)[n.getDay()];case Ie.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=PL(e),d=kL(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,D]=g,C=s>=y.hours&&a>=y.minutes,b=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(C&&b)return!0}else if(C||b)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return RL(e,i,r)[s<12?0:1];case Ie.Eras:return NL(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function qd(n){return function(e,t,r){let i=-1*r,o=Kd(t,Zr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case pr.Short:return(i>=0?"+":"")+_n(s,2,o)+_n(Math.abs(i%60),2,o);case pr.ShortGMT:return"GMT"+(i>=0?"+":"")+_n(s,1,o);case pr.Long:return"GMT"+(i>=0?"+":"")+_n(s,2,o)+":"+_n(Math.abs(i%60),2,o);case pr.Extended:return r===0?"Z":(i>=0?"+":"")+_n(s,2,o)+":"+_n(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var BL=0,Hd=4;function $L(n){let e=Wd(n,BL,1).getDay();return Wd(n,0,1+(e<=Hd?Hd:Hd+7)-e)}function Jb(n){let e=n.getDay(),t=e===0?-3:Hd-e;return Wd(n.getFullYear(),n.getMonth(),n.getDate()+t)}function iy(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=Jb(t),s=$L(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return _n(i,n,Kd(r,Zr.MinusSign))}}function zd(n,e=!1){return function(t,r){let o=Jb(t).getFullYear();return _n(o,n,Kd(r,Zr.MinusSign),e)}}var oy={};function qL(n){if(oy[n])return oy[n];let e;switch(n){case"G":case"GG":case"GGG":e=xe(Ie.Eras,Ae.Abbreviated);break;case"GGGG":e=xe(Ie.Eras,Ae.Wide);break;case"GGGGG":e=xe(Ie.Eras,Ae.Narrow);break;case"y":e=Xe(Ee.FullYear,1,0,!1,!0);break;case"yy":e=Xe(Ee.FullYear,2,0,!0,!0);break;case"yyy":e=Xe(Ee.FullYear,3,0,!1,!0);break;case"yyyy":e=Xe(Ee.FullYear,4,0,!1,!0);break;case"Y":e=zd(1);break;case"YY":e=zd(2,!0);break;case"YYY":e=zd(3);break;case"YYYY":e=zd(4);break;case"M":case"L":e=Xe(Ee.Month,1,1);break;case"MM":case"LL":e=Xe(Ee.Month,2,1);break;case"MMM":e=xe(Ie.Months,Ae.Abbreviated);break;case"MMMM":e=xe(Ie.Months,Ae.Wide);break;case"MMMMM":e=xe(Ie.Months,Ae.Narrow);break;case"LLL":e=xe(Ie.Months,Ae.Abbreviated,Ft.Standalone);break;case"LLLL":e=xe(Ie.Months,Ae.Wide,Ft.Standalone);break;case"LLLLL":e=xe(Ie.Months,Ae.Narrow,Ft.Standalone);break;case"w":e=iy(1);break;case"ww":e=iy(2);break;case"W":e=iy(1,!0);break;case"d":e=Xe(Ee.Date,1);break;case"dd":e=Xe(Ee.Date,2);break;case"c":case"cc":e=Xe(Ee.Day,1);break;case"ccc":e=xe(Ie.Days,Ae.Abbreviated,Ft.Standalone);break;case"cccc":e=xe(Ie.Days,Ae.Wide,Ft.Standalone);break;case"ccccc":e=xe(Ie.Days,Ae.Narrow,Ft.Standalone);break;case"cccccc":e=xe(Ie.Days,Ae.Short,Ft.Standalone);break;case"E":case"EE":case"EEE":e=xe(Ie.Days,Ae.Abbreviated);break;case"EEEE":e=xe(Ie.Days,Ae.Wide);break;case"EEEEE":e=xe(Ie.Days,Ae.Narrow);break;case"EEEEEE":e=xe(Ie.Days,Ae.Short);break;case"a":case"aa":case"aaa":e=xe(Ie.DayPeriods,Ae.Abbreviated);break;case"aaaa":e=xe(Ie.DayPeriods,Ae.Wide);break;case"aaaaa":e=xe(Ie.DayPeriods,Ae.Narrow);break;case"b":case"bb":case"bbb":e=xe(Ie.DayPeriods,Ae.Abbreviated,Ft.Standalone,!0);break;case"bbbb":e=xe(Ie.DayPeriods,Ae.Wide,Ft.Standalone,!0);break;case"bbbbb":e=xe(Ie.DayPeriods,Ae.Narrow,Ft.Standalone,!0);break;case"B":case"BB":case"BBB":e=xe(Ie.DayPeriods,Ae.Abbreviated,Ft.Format,!0);break;case"BBBB":e=xe(Ie.DayPeriods,Ae.Wide,Ft.Format,!0);break;case"BBBBB":e=xe(Ie.DayPeriods,Ae.Narrow,Ft.Format,!0);break;case"h":e=Xe(Ee.Hours,1,-12);break;case"hh":e=Xe(Ee.Hours,2,-12);break;case"H":e=Xe(Ee.Hours,1);break;case"HH":e=Xe(Ee.Hours,2);break;case"m":e=Xe(Ee.Minutes,1);break;case"mm":e=Xe(Ee.Minutes,2);break;case"s":e=Xe(Ee.Seconds,1);break;case"ss":e=Xe(Ee.Seconds,2);break;case"S":e=Xe(Ee.FractionalSeconds,1);break;case"SS":e=Xe(Ee.FractionalSeconds,2);break;case"SSS":e=Xe(Ee.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=qd(pr.Short);break;case"ZZZZZ":e=qd(pr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=qd(pr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=qd(pr.Long);break;default:return null}return oy[n]=e,e}function Xb(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function zL(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function HL(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=Xb(e,i);return zL(n,r*(o-i))}function GL(n){if($b(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Wd(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(OL))return WL(r)}let e=new Date(n);if(!$b(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function WL(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function $b(n){return n instanceof Date&&!isNaN(n.valueOf())}function Qd(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var sy=/\s+/,qb=[],N8=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=qb,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(sy):qb}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(sy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(sy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(ze(lr),ze(iu))}}static{this.\u0275dir=Qi({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var ay=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},P8=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ay(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),zb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);zb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ze(Qr),ze(Wi),ze(ny))}}static{this.\u0275dir=Qi({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function zb(n,e){n.context.$implicit=e.item}var k8=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new uy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Hb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Hb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ze(Qr),ze(Wi))}}static{this.\u0275dir=Qi({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),uy=class{constructor(){this.$implicit=null,this.ngIf=null}};function Hb(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Nt(e)}'.`)}function e0(n,e){return new Y(2100,!1)}var KL=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,O8=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw e0(n,t);return t.replace(KL,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=cm({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var QL="mediumDate",YL=new q(""),ZL=new q(""),F8=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??QL,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return LL(t,s,o||this.locale,a)}catch(s){throw e0(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(ze(Ld,16),ze(YL,24),ze(ZL,24))}}static{this.\u0275pipe=cm({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var t0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ot({type:n})}static{this.\u0275inj=kt({})}}return n})(),py="browser",JL="server";function XL(n){return n===py}function Jr(n){return n===JL}var n0=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>XL(L(It))?new cy(L(Et),window):new ly})}}return n})(),cy=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=eV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function eV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ly=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ps=class{};var lu=class{},Zd=class{},mr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var my=class{encodeKey(e){return i0(e)}encodeValue(e){return i0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function tV(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var nV=/%(\d[a-f0-9])/gi,rV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function i0(n){return encodeURIComponent(n).replace(nV,(e,t)=>rV[t]??e)}function Yd(n){return`${n}`}var ei=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new my,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=tV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Yd):[Yd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Yd(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Yd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var yy=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function iV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function o0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function s0(n){return typeof Blob<"u"&&n instanceof Blob}function a0(n){return typeof FormData<"u"&&n instanceof FormData}function oV(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var cu=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(iV(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new mr,this.context??=new yy,!this.params)this.params=new ei,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||o0(this.body)||s0(this.body)||a0(this.body)||oV(this.body)?this.body:this.body instanceof ei?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||a0(this.body)?null:s0(this.body)?this.body.type||null:o0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ei?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new n(t,r,s,{params:d,headers:l,context:f,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},ti=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ti||{}),du=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new mr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Jd=class n extends du{constructor(e={}){super(e),this.type=ti.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},hu=class n extends du{constructor(e={}){super(e),this.type=ti.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Xr=class extends du{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},h0=200,sV=204;function gy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var aV=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof cu)o=t;else{let u;i.headers instanceof mr?u=i.headers:u=new mr(i.headers);let l;i.params&&(i.params instanceof ei?l=i.params:l=new ei({fromObject:i.params})),o=new cu(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=J(o).pipe(er(u=>this.handler.handle(u)));if(t instanceof cu||i.observe==="events")return s;let a=s.pipe(ot(u=>u instanceof hu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ee(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ee(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ee(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(ee(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ei().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,gy(i,r))}post(t,r,i={}){return this.request("POST",t,gy(i,r))}put(t,r,i={}){return this.request("PUT",t,gy(i,r))}static{this.\u0275fac=function(r){return new(r||n)(V(lu))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),uV=/^\)\]\}',?\n/,cV="X-Request-URL";function u0(n){if(n.url)return n.url;let e=cV.toLocaleLowerCase();return n.headers.get(e)}var lV=(()=>{class n{constructor(){this.fetchImpl=L(vy,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=L(he)}handle(t){return new ce(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(wy,o=>r.error(new Xr({error:o}))),()=>i.abort()})}doRequest(t,r,i){return N(this,null,function*(){let o=this.createRequestInit(t),s;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,z({signal:r},o)));dV(y),i.next({type:ti.Sent}),s=yield y}catch(y){i.error(new Xr({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let a=new mr(s.headers),u=s.statusText,l=u0(s)??t.urlWithParams,d=s.status,f=null;if(t.reportProgress&&i.next(new Jd({headers:a,status:d,statusText:u,url:l})),s.body){let y=s.headers.get("content-length"),D=[],C=s.body.getReader(),b=0,F,U,P=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>N(this,null,function*(){for(;;){let{done:Z,value:K}=yield C.read();if(Z)break;if(D.push(K),b+=K.length,t.reportProgress){U=t.responseType==="text"?(U??"")+(F??=new TextDecoder).decode(K,{stream:!0}):void 0;let I=()=>i.next({type:ti.DownloadProgress,total:y?+y:void 0,loaded:b,partialText:U});P?P.run(I):I()}}}));let G=this.concatChunks(D,b);try{let Z=s.headers.get("Content-Type")??"";f=this.parseBody(t,G,Z)}catch(Z){i.error(new Xr({error:Z,headers:new mr(s.headers),status:s.status,statusText:s.statusText,url:u0(s)??t.urlWithParams}));return}}d===0&&(d=f?h0:0),d>=200&&d<300?(i.next(new hu({body:f,headers:a,status:d,statusText:u,url:l})),i.complete()):i.error(new Xr({error:f,headers:a,status:d,statusText:u,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(uV,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),vy=class{};function wy(){}function dV(n){n.then(wy,wy)}function f0(n,e){return e(n)}function hV(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function fV(n,e,t){return(r,i)=>rn(t,()=>e(r,o=>n(o,i)))}var pV=new q(""),_y=new q(""),gV=new q(""),p0=new q("",{providedIn:"root",factory:()=>!0});function mV(){let n=null;return(e,t)=>{n===null&&(n=(L(pV,{optional:!0})??[]).reduceRight(hV,f0));let r=L(cr);if(L(p0)){let o=r.add();return n(e,t).pipe(Lr(()=>r.remove(o)))}else return n(e,t)}}var c0=(()=>{class n extends lu{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=L(cr),this.contributeToStability=L(p0)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(_y),...this.injector.get(gV,[])]));this.chain=r.reduceRight((i,o)=>fV(i,o,this.injector),f0)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Lr(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(V(Zd),V(Pt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();var yV=/^\)\]\}',?\n/;function vV(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var l0=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Y(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ve(r.\u0275loadImpl()):J(null)).pipe(Oe(()=>new ce(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((C,b)=>s.setRequestHeader(C,b.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let C=t.detectContentTypeHeader();C!==null&&s.setRequestHeader("Content-Type",C)}if(t.responseType){let C=t.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let C=s.statusText||"OK",b=new mr(s.getAllResponseHeaders()),F=vV(s)||t.url;return u=new Jd({headers:b,status:s.status,statusText:C,url:F}),u},d=()=>{let{headers:C,status:b,statusText:F,url:U}=l(),P=null;b!==sV&&(P=typeof s.response>"u"?s.responseText:s.response),b===0&&(b=P?h0:0);let G=b>=200&&b<300;if(t.responseType==="json"&&typeof P=="string"){let Z=P;P=P.replace(yV,"");try{P=P!==""?JSON.parse(P):null}catch(K){P=Z,G&&(G=!1,P={error:K,text:P})}}G?(o.next(new hu({body:P,headers:C,status:b,statusText:F,url:U||void 0})),o.complete()):o.error(new Xr({error:P,headers:C,status:b,statusText:F,url:U||void 0}))},f=C=>{let{url:b}=l(),F=new Xr({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:b||void 0});o.error(F)},g=!1,y=C=>{g||(o.next(l()),g=!0);let b={type:ti.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(b.total=C.total),t.responseType==="text"&&s.responseText&&(b.partialText=s.responseText),o.next(b)},D=C=>{let b={type:ti.UploadProgress,loaded:C.loaded};C.lengthComputable&&(b.total=C.total),o.next(b)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",D)),s.send(a),o.next({type:ti.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",D)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(V(ps))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),g0=new q(""),wV="XSRF-TOKEN",_V=new q("",{providedIn:"root",factory:()=>wV}),IV="X-XSRF-TOKEN",EV=new q("",{providedIn:"root",factory:()=>IV}),Xd=class{},DV=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Qd(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(V(Et),V(It),V(_V))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function TV(n,e){let t=n.url.toLowerCase();if(!L(g0)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=L(Xd).getToken(),i=L(EV);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var m0=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(m0||{});function CV(n,e){return{\u0275kind:n,\u0275providers:e}}function bV(...n){let e=[aV,l0,c0,{provide:lu,useExisting:c0},{provide:Zd,useFactory:()=>L(lV,{optional:!0})??L(l0)},{provide:_y,useValue:TV,multi:!0},{provide:g0,useValue:!0},{provide:Xd,useClass:DV}];for(let t of n)e.push(...t.\u0275providers);return hd(e)}var d0=new q("");function SV(){return CV(m0.LegacyInterceptors,[{provide:d0,useFactory:mV},{provide:_y,useExisting:d0,multi:!0}])}var Y8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ot({type:n})}static{this.\u0275inj=kt({providers:[bV(SV())]})}}return n})();var Dy=class extends Gd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ty=class n extends Dy{static makeCurrent(){Wb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=AV();return t==null?null:RV(t)}resetBaseElement(){fu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qd(document.cookie,e)}},fu=null;function AV(){return fu=fu||document.querySelector("base"),fu?fu.getAttribute("href"):null}function RV(n){return new URL(n,document.baseURI).pathname}var Cy=class{addToWindow(e){xt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Y(5103,!1);return o},xt.getAllAngularTestabilities=()=>e.getAllTestabilities(),xt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=xt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};xt.frameworkStabilizers||(xt.frameworkStabilizers=[]),xt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Zi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},xV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),by=new q(""),_0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(V(by),V(he))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),eh=class{constructor(e){this._doc=e}},Iy="ng-app-id",I0=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Jr(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Iy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Iy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Iy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(V(Et),V(Dd),V(Rm,8),V(It))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Ey={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ay=/%COMP%/g,E0="%COMP%",MV=`_nghost-${E0}`,NV=`_ngcontent-${E0}`,PV=!0,kV=new q("",{providedIn:"root",factory:()=>PV});function OV(n){return NV.replace(Ay,n)}function FV(n){return MV.replace(Ay,n)}function D0(n,e){return e.map(t=>t.replace(Ay,n))}var y0=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Jr(a),this.defaultRenderer=new pu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Nn.ShadowDom&&(r=Ce(z({},r),{encapsulation:Nn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof th?i.applyToHost(t):i instanceof gu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Nn.Emulated:o=new th(u,l,r,this.appId,d,s,a,f);break;case Nn.ShadowDom:return new Sy(u,l,t,r,s,a,this.nonce,f);default:o=new gu(u,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(V(_0),V(I0),V(Dd),V(kV),V(Et),V(It),V(he),V(Rm))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),pu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ey[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(v0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(v0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ey[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ey[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(or.DashCase|or.Important)?e.style.setProperty(t,r,i&or.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&or.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Zi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function v0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Sy=class extends pu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=D0(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gu=class extends pu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?D0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},th=class extends gu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=OV(l),this.hostAttr=FV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},LV=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(V(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),w0=["alt","control","meta","shift"],VV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},UV=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),w0.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=VV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),w0.forEach(s=>{if(s!==i){let a=jV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(V(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function BV(){Ty.makeCurrent()}function $V(){return new ir}function qV(){return xC(document),document}var zV=[{provide:It,useValue:py},{provide:Am,useValue:BV,multi:!0},{provide:Et,useFactory:qV,deps:[]}],y6=ey(Lb,"browser",zV),HV=new q(""),GV=[{provide:ou,useClass:Cy,deps:[]},{provide:Jm,useClass:Nd,deps:[he,Pd,ou]},{provide:Nd,useClass:Nd,deps:[he,Pd,ou]}],WV=[{provide:fd,useValue:"root"},{provide:ir,useFactory:$V,deps:[]},{provide:by,useClass:LV,multi:!0,deps:[Et,he,It]},{provide:by,useClass:UV,multi:!0,deps:[Et]},y0,I0,_0,{provide:as,useExisting:y0},{provide:ps,useClass:xV,deps:[]},[]],v6=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Dd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(V(HV,12))}}static{this.\u0275mod=Ot({type:n})}static{this.\u0275inj=kt({providers:[...WV,...GV],imports:[t0,Vb]})}}return n})();var T0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(V(Et))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ue="primary",Ru=Symbol("RouteTitle"),Py=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Is(n){return new Py(n)}function QV(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function YV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fn(n[t],e[t]))return!1;return!0}function Fn(n,e){let t=n?ky(n):void 0,r=e?ky(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!O0(n[i],e[i]))return!1;return!0}function ky(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function O0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function F0(n){return n.length>0?n[n.length-1]:null}function ii(n){return Hp(n)?n:su(n)?ve(Promise.resolve(n)):J(n)}var ZV={exact:V0,subset:j0},L0={exact:JV,subset:XV,ignored:()=>!0};function C0(n,e,t){return ZV[t.paths](n.root,e.root,t.matrixParams)&&L0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function JV(n,e){return Fn(n,e)}function V0(n,e,t){if(!Xi(n.segments,e.segments)||!ih(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!V0(n.children[r],e.children[r],t))return!1;return!0}function XV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>O0(n[t],e[t]))}function j0(n,e,t){return U0(n,e,e.segments,t)}function U0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Xi(i,t)||e.hasChildren()||!ih(i,t,r))}else if(n.segments.length===t.length){if(!Xi(n.segments,t)||!ih(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!j0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Xi(n.segments,i)||!ih(n.segments,i,r)||!n.children[ue]?!1:U0(n.children[ue],e,o,r)}}function ih(n,e,t){return e.every((r,i)=>L0[t](n[i].parameters,r.parameters))}var vr=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Is(this.queryParams),this._queryParamMap}toString(){return nj.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oh(this)}},Ji=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Is(this.parameters),this._parameterMap}toString(){return $0(this)}};function ej(n,e){return Xi(n,e)&&n.every((t,r)=>Fn(t.parameters,e[r].parameters))}function Xi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function tj(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ue&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ue&&(t=t.concat(e(i,r)))}),t}var xu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new Es,providedIn:"root"})}}return n})(),Es=class{parse(e){let t=new Fy(e);return new vr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${mu(e.root,!0)}`,r=oj(e.queryParams),i=typeof e.fragment=="string"?`#${rj(e.fragment)}`:"";return`${t}${r}${i}`}},nj=new Es;function oh(n){return n.segments.map(e=>$0(e)).join("/")}function mu(n,e){if(!n.hasChildren())return oh(n);if(e){let t=n.children[ue]?mu(n.children[ue],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ue&&r.push(`${i}:${mu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=tj(n,(r,i)=>i===ue?[mu(n.children[ue],!1)]:[`${i}:${mu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${oh(n)}/${t[0]}`:`${oh(n)}/(${t.join("//")})`}}function B0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nh(n){return B0(n).replace(/%3B/gi,";")}function rj(n){return encodeURI(n)}function Oy(n){return B0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sh(n){return decodeURIComponent(n)}function b0(n){return sh(n.replace(/\+/g,"%20"))}function $0(n){return`${Oy(n.path)}${ij(n.parameters)}`}function ij(n){return Object.entries(n).map(([e,t])=>`;${Oy(e)}=${Oy(t)}`).join("")}function oj(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${nh(t)}=${nh(i)}`).join("&"):`${nh(t)}=${nh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var sj=/^[^\/()?;#]+/;function Ry(n){let e=n.match(sj);return e?e[0]:""}var aj=/^[^\/()?;=#]+/;function uj(n){let e=n.match(aj);return e?e[0]:""}var cj=/^[^=?&#]+/;function lj(n){let e=n.match(cj);return e?e[0]:""}var dj=/^[^&#]+/;function hj(n){let e=n.match(dj);return e?e[0]:""}var Fy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new De(e,t)),r}parseSegment(){let e=Ry(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new Ji(sh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=uj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ry(this.remaining);i&&(r=i,this.capture(r))}e[sh(t)]=sh(r)}parseQueryParam(e){let t=lj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=hj(this.remaining);s&&(r=s,this.capture(r))}let i=b0(t),o=b0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ry(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ue);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ue]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function q0(n){return n.segments.length>0?new De([],{[ue]:n}):n}function z0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=z0(i);if(r===ue&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return fj(t)}function fj(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new De(n.segments.concat(e.segments),e.children)}return n}function eo(n){return n instanceof vr}function pj(n,e,t=null,r=null){let i=H0(n);return G0(i,e,t,r)}function H0(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=q0(r);return e??i}function G0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return xy(i,i,i,t,r);let o=gj(e);if(o.toRoot())return xy(i,i,new De([],{}),t,r);let s=mj(o,i,n),a=s.processChildren?wu(s.segmentGroup,s.index,o.commands):K0(s.segmentGroup,s.index,o.commands);return xy(i,s.segmentGroup,a,t,r)}function ah(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Eu(n){return typeof n=="object"&&n!=null&&n.outlets}function xy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=W0(n,e,t);let a=q0(z0(s));return new vr(a,o,i)}function W0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=W0(o,e,t)}),new De(n.segments,r)}var uh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ah(r[0]))throw new Y(4003,!1);let i=r.find(Eu);if(i&&i!==F0(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new uh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new uh(t,e,r)}var vs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function mj(n,e,t){if(n.isAbsolute)return new vs(e,!0,0);if(!t)return new vs(e,!1,NaN);if(t.parent===null)return new vs(t,!0,0);let r=ah(n.commands[0])?0:1,i=t.segments.length-1+r;return yj(t,i,n.numberOfDoubleDots)}function yj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new vs(r,!1,i-o)}function vj(n){return Eu(n[0])?n[0].outlets:{[ue]:n}}function K0(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return wu(n,e,t);let r=wj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[ue]=new De(n.segments.slice(r.pathIndex),n.children),wu(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?Ly(n,e,t):r.match?wu(n,0,i):Ly(n,e,t)}function wu(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=vj(t),i={};if(Object.keys(r).some(o=>o!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let o=wu(n.children[ue],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=K0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function wj(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Eu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!A0(u,l,s))return o;r+=2}else{if(!A0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ly(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Eu(o)){let u=_j(o.outlets);return new De(r,u)}if(i===0&&ah(t[0])){let u=n.segments[e];r.push(new Ji(u.path,S0(t[0]))),i++;continue}let s=Eu(o)?o.outlets[ue]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ah(a)?(r.push(new Ji(s,S0(a))),i+=2):(r.push(new Ji(s,{})),i++)}return new De(r,{})}function _j(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ly(new De([],{}),0,r))}),e}function S0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function A0(n,e,t){return n==t.path&&Fn(e,t.parameters)}var _u="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),un=class{constructor(e,t){this.id=e,this.url=t}},Ds=class extends un{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ln=class extends un{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Yt||{}),ch=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ch||{}),yr=class extends un{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ni=class extends un{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},Du=class extends un{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lh=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jy=class extends un{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Uy=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},By=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$y=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qy=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zy=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gy=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wy=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Tu=class{},Ts=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Ij(n,e){return n.providers&&!n._injector&&(n._injector=xd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function In(n){return n.outlet||ue}function Ej(n,e){let t=n.filter(r=>In(r)===e);return t.push(...n.filter(r=>In(r)!==e)),t}function Mu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ky=class{get injector(){return Mu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Nu(this.rootInjector),this.attachRef=null}},Nu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ky(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(V(Pt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Qy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Qy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Yy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yy(e,this._root).map(t=>t.value)}};function Qy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Qy(n,t);if(r)return r}return null}function Yy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Yy(n,t);if(r.length)return r.unshift(e),r}return[]}var Qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ys(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var fh=class extends hh{constructor(e,t){super(e),this.snapshot=t,ov(this,e)}toString(){return this.snapshot.toString()}};function Q0(n){let e=Dj(n),t=new dt([new Ji("",{})]),r=new dt({}),i=new dt({}),o=new dt({}),s=new dt(""),a=new to(t,r,o,s,i,ue,n,e.root);return a.snapshot=e.root,new fh(new Qt(a,[]),e)}function Dj(n){let e={},t={},r={},i="",o=new ws([],e,r,i,t,ue,n,null,{});return new gh("",new Qt(o,[]))}var to=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(l=>l[Ru]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>Is(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>Is(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ph(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:z(z({},e.params),n.params),data:z(z({},e.data),n.data),resolve:z(z(z(z({},n.data),e.data),i?.data),n._resolvedData)}:r={params:z({},n.params),data:z({},n.data),resolve:z(z({},n.data),n._resolvedData??{})},i&&Z0(i)&&(r.resolve[Ru]=i.title),r}var ws=class{get title(){return this.data?.[Ru]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Is(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Is(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},gh=class extends hh{constructor(e,t){super(t),this.url=e,ov(this,t)}toString(){return Y0(this._root)}};function ov(n,e){e.value._routerState=n,e.children.forEach(t=>ov(n,t))}function Y0(n){let e=n.children.length>0?` { ${n.children.map(Y0).join(", ")} } `:"";return`${n.value}${e}`}function My(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fn(e.params,t.params)||n.paramsSubject.next(t.params),YV(e.url,t.url)||n.urlSubject.next(t.url),Fn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zy(n,e){let t=Fn(n.params,e.params)&&ej(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Zy(n.parent,e.parent))}function Z0(n){return typeof n.title=="string"||n.title===null}var Tj=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new vt,this.deactivateEvents=new vt,this.attachEvents=new vt,this.detachEvents=new vt,this.parentContexts=L(Nu),this.location=L(Qr),this.changeDetector=L(au),this.inputBinder=L(_h,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Jy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Qi({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[tu]})}}return n})(),Jy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===to?this.route:e===Nu?this.childContexts:this.parent.get(e,t)}},_h=new q(""),R0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=$a([r.queryParams,r.params,r.data]).pipe(Oe(([o,s,a],u)=>(a=z(z(z({},o),s),a),u===0?J(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=jb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function Cj(n,e,t){let r=Cu(n,e._root,t?t._root:void 0);return new fh(r,e)}function Cu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=bj(n,e,t);return new Qt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Cu(n,a)),s}}let r=Sj(e.value),i=e.children.map(o=>Cu(n,o));return new Qt(r,i)}}function bj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Cu(n,r,i);return Cu(n,r)})}function Sj(n){return new to(new dt(n.url),new dt(n.params),new dt(n.queryParams),new dt(n.fragment),new dt(n.data),n.outlet,n.component,n)}var bu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},J0="ngNavigationCancelingError";function mh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=eo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=X0(!1,Yt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function X0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[J0]=!0,t.cancellationCode=e,t}function Aj(n){return eS(n)&&eo(n.url)}function eS(n){return!!n&&n[J0]}var Rj=(n,e,t,r)=>ee(i=>(new Xy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Xy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),My(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ys(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ys(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ys(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ys(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Wy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(My(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),My(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},yh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_s=class{constructor(e,t){this.component=e,this.route=t}};function xj(n,e,t){let r=n._root,i=e?e._root:null;return yu(r,i,t,[r.value])}function Mj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function bs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!mT(n)?n:e.get(n):r}function yu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ys(e);return n.children.forEach(s=>{Nj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Iu(a,t.getContext(s),i)),i}function Nj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Pj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new yh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?yu(n,e,a?a.children:null,r,i):yu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _s(a.outlet.component,s))}else s&&Iu(e,a,i),i.canActivateChecks.push(new yh(r)),o.component?yu(n,null,a?a.children:null,r,i):yu(n,null,t,r,i);return i}function Pj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Xi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Xi(n.url,e.url)||!Fn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zy(n,e)||!Fn(n.queryParams,e.queryParams);case"paramsChange":default:return!Zy(n,e)}}function Iu(n,e,t){let r=ys(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Iu(s,e.children.getContext(o),t):Iu(s,null,t):Iu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new _s(e.outlet.component,i)):t.canDeactivateChecks.push(new _s(null,i)):t.canDeactivateChecks.push(new _s(null,i))}function Pu(n){return typeof n=="function"}function kj(n){return typeof n=="boolean"}function Oj(n){return n&&Pu(n.canLoad)}function Fj(n){return n&&Pu(n.canActivate)}function Lj(n){return n&&Pu(n.canActivateChild)}function Vj(n){return n&&Pu(n.canDeactivate)}function jj(n){return n&&Pu(n.canMatch)}function tS(n){return n instanceof Xn||n?.name==="EmptyError"}var rh=Symbol("INITIAL_VALUE");function Cs(){return Oe(n=>$a(n.map(e=>e.pipe(tr(1),Fi(rh)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===rh)return rh;if(t===!1||Uj(t))return t}return!0}),ot(e=>e!==rh),tr(1)))}function Uj(n){return eo(n)||n instanceof bu}function Bj(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(Ce(z({},t),{guardsResult:!0})):$j(s,r,i,n).pipe(Ye(a=>a&&kj(a)?qj(r,o,n,e):J(a)),ee(a=>Ce(z({},t),{guardsResult:a})))})}function $j(n,e,t,r){return ve(n).pipe(Ye(i=>Kj(i.component,i.route,t,e,r)),Xt(i=>i!==!0,!0))}function qj(n,e,t,r){return ve(e).pipe(er(i=>Ho(Hj(i.route.parent,r),zj(i.route,r),Wj(n,i.path,t),Gj(n,i.route,t))),Xt(i=>i!==!0,!0))}function zj(n,e){return n!==null&&e&&e(new Gy(n)),J(!0)}function Hj(n,e){return n!==null&&e&&e(new zy(n)),J(!0)}function Gj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>_l(()=>{let s=Mu(e)??t,a=bs(o,s),u=Fj(a)?a.canActivate(e,n):rn(s,()=>a(e,n));return ii(u).pipe(Xt())}));return J(i).pipe(Cs())}function Wj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Mj(s)).filter(s=>s!==null).map(s=>_l(()=>{let a=s.guards.map(u=>{let l=Mu(s.node)??t,d=bs(u,l),f=Lj(d)?d.canActivateChild(r,n):rn(l,()=>d(r,n));return ii(f).pipe(Xt())});return J(a).pipe(Cs())}));return J(o).pipe(Cs())}function Kj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let u=Mu(e)??i,l=bs(a,u),d=Vj(l)?l.canDeactivate(n,e,t,r):rn(u,()=>l(n,e,t,r));return ii(d).pipe(Xt())});return J(s).pipe(Cs())}function Qj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=bs(s,n),u=Oj(a)?a.canLoad(e,t):rn(n,()=>a(e,t));return ii(u)});return J(o).pipe(Cs(),nS(r))}function nS(n){return jp(Ze(e=>{if(typeof e!="boolean")throw mh(n,e)}),ee(e=>e===!0))}function Yj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=bs(s,n),u=jj(a)?a.canMatch(e,t):rn(n,()=>a(e,t));return ii(u)});return J(o).pipe(Cs(),nS(r))}var Su=class{constructor(e){this.segmentGroup=e||null}},Au=class extends Error{constructor(e){super(),this.urlTree=e}};function ms(n){return zo(new Su(n))}function Zj(n){return zo(new Y(4e3,!1))}function Jj(n){return zo(X0(!1,Yt.GuardRejected))}var ev=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[ue])return Zj(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:D,title:C}=i,b=rn(o,()=>a({params:y,data:D,queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,title:C}));if(b instanceof vr)throw new Au(b);t=b}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Au(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new vr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},tv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xj(n,e,t,r,i){let o=rS(n,e,t);return o.matched?(r=Ij(e,r),Yj(r,e,t,i).pipe(ee(s=>s===!0?o:z({},tv)))):J(o)}function rS(n,e,t){if(e.path==="**")return e2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?z({},tv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||QV)(t,n,e);if(!i)return z({},tv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?z(z({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function e2(n){return{matched:!0,parameters:n.length>0?F0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function x0(n,e,t,r){return t.length>0&&r2(n,t,r)?{segmentGroup:new De(e,n2(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&i2(n,t,r)?{segmentGroup:new De(n.segments,t2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function t2(n,e,t,r){let i={};for(let o of t)if(Ih(n,e,o)&&!r[In(o)]){let s=new De([],{});i[In(o)]=s}return z(z({},r),i)}function n2(n,e){let t={};t[ue]=e;for(let r of n)if(r.path===""&&In(r)!==ue){let i=new De([],{});t[In(r)]=i}return t}function r2(n,e,t){return t.some(r=>Ih(n,e,r)&&In(r)!==ue)}function i2(n,e,t){return t.some(r=>Ih(n,e,r))}function Ih(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function o2(n,e,t){return e.length===0&&!n.children[t]}var nv=class{};function s2(n,e,t,r,i,o,s="emptyOnly"){return new rv(n,e,t,r,i,s,o).recognize()}var a2=31,rv=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ev(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=x0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:t,rootSnapshot:r})=>{let i=new Qt(r,t),o=new gh("",i),s=pj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ws([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(ee(r=>({children:r,rootSnapshot:t})),Or(r=>{if(r instanceof Au)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Su?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ee(s=>s instanceof Qt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ve(o).pipe(er(s=>{let a=r.children[s],u=Ej(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Oi((s,a)=>(s.push(...a),s)),Fr(null),Qp(),Ye(s=>{if(s===null)return ms(r);let a=iS(s);return u2(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return ve(t).pipe(er(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Or(l=>{if(l instanceof Su)return J(null);throw l}))),Xt(u=>!!u),Or(u=>{if(tS(u))return o2(r,i,o)?J(new nv):ms(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return In(r)!==s&&(s===ue||!Ih(i,o,r))?ms(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ms(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=rS(t,i,o);if(!u)return ms(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>a2&&(this.allowRedirects=!1));let y=new ws(o,l,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,M0(i),In(i),i.component??i._loadedComponent??null,i,N0(i)),D=ph(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let C=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,C).pipe(Ye(b=>this.processSegment(e,r,t,b.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Xj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Oe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Oe(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=u,D=new ws(g,f,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,M0(r),In(r),r.component??r._loadedComponent??null,r,N0(r)),C=ph(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(C.params),D.data=Object.freeze(C.data);let{segmentGroup:b,slicedSegments:F}=x0(t,g,y,l);if(F.length===0&&b.hasChildren())return this.processChildren(d,l,b,D).pipe(ee(P=>new Qt(D,P)));if(l.length===0&&F.length===0)return J(new Qt(D,[]));let U=In(r)===o;return this.processSegment(d,l,b,F,U?ue:o,!0,D).pipe(ee(P=>new Qt(D,P instanceof Qt?[P]:[])))}))):ms(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):Qj(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(Ze(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Jj(t))):J({routes:[],injector:e})}};function u2(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function c2(n){let e=n.value.routeConfig;return e&&e.path===""}function iS(n){let e=[],t=new Set;for(let r of n){if(!c2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=iS(r.children);e.push(new Qt(r.value,i))}return e.filter(r=>!t.has(r))}function M0(n){return n.data||{}}function N0(n){return n.resolve||{}}function l2(n,e,t,r,i,o){return Ye(s=>s2(n,e,t,r,s.extractedUrl,i,o).pipe(ee(({state:a,tree:u})=>Ce(z({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function d2(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of oS(u))s.add(l);let a=0;return ve(s).pipe(er(u=>o.has(u)?h2(u,r,n,e):(u.data=ph(u,u.parent,n).resolve,J(void 0))),Ze(()=>a++),Go(1),Ye(u=>a===s.size?J(t):Rt))})}function oS(n){let e=n.children.map(t=>oS(t)).flat();return[n,...e]}function h2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Z0(i)&&(o[Ru]=i.title),f2(o,n,e,r).pipe(ee(s=>(n._resolvedData=s,n.data=ph(n,n.parent,t).resolve,null)))}function f2(n,e,t,r){let i=ky(n);if(i.length===0)return J({});let o={};return ve(i).pipe(Ye(s=>p2(n[s],e,t,r).pipe(Xt(),Ze(a=>{if(a instanceof bu)throw mh(new Es,a);o[s]=a}))),Go(1),Wp(o),Or(s=>tS(s)?Rt:zo(s)))}function p2(n,e,t,r){let i=Mu(e)??r,o=bs(n,i),s=o.resolve?o.resolve(e,t):rn(i,()=>o(e,t));return ii(s)}function Ny(n){return Oe(e=>{let t=n(e);return t?ve(t).pipe(ee(()=>e)):J(e)})}var sS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[Ru]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(g2),providedIn:"root"})}}return n})(),g2=(()=>{class n extends sS{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(V(T0))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ku=new q("",{providedIn:"root",factory:()=>({})}),m2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=RT({type:n,selectors:[["ng-component"]],standalone:!0,features:[Cb],decls:1,vars:0,template:function(r,i){r&1&&Ym(0,"router-outlet")},dependencies:[Tj],encapsulation:2})}}return n})();function sv(n){let e=n.children&&n.children.map(sv),t=e?Ce(z({},n),{children:e}):z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=m2),t}var vh=new q(""),av=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(Fd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ii(t.loadComponent()).pipe(ee(aS),Ze(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Lr(()=>{this.componentLoaders.delete(t)})),i=new Uo(r,()=>new $e).pipe(jo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=y2(r,this.compiler,t,this.onLoadEndListener).pipe(Lr(()=>{this.childrenLoaders.delete(r)})),s=new Uo(o,()=>new $e).pipe(jo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function y2(n,e,t,r){return ii(n.loadChildren()).pipe(ee(aS),Ye(i=>i instanceof Za||Array.isArray(i)?J(i):ve(e.compileModuleAsync(i))),ee(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(vh,[],{optional:!0,self:!0}).flat()),{routes:s.map(sv),injector:o}}))}function v2(n){return n&&typeof n=="object"&&"default"in n}function aS(n){return v2(n)?n.default:n}var uv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(w2),providedIn:"root"})}}return n})(),w2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uS=new q(""),cS=new q("");function _2(n,e,t){let r=n.get(cS),i=n.get(Et);return n.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),I2(n))),{onViewTransitionCreated:u}=r;return u&&rn(n,()=>u({transition:a,from:e,to:t})),s})}function I2(n){return new Promise(e=>{Km({read:()=>setTimeout(e)},{injector:n})})}var E2=new q(""),cv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=L(av),this.environmentInjector=L(Pt),this.urlSerializer=L(xu),this.rootContexts=L(Nu),this.location=L(gs),this.inputBindingEnabled=L(_h,{optional:!0})!==null,this.titleStrategy=L(sS),this.options=L(ku,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(uv),this.createViewTransition=L(uS,{optional:!0}),this.navigationErrorHandler=L(E2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=i=>this.events.next(new $y(i)),r=i=>this.events.next(new qy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ce(z(z({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new dt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:_u,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ot(o=>o.id!==0),ee(o=>Ce(z({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Oe(o=>{let s=!1,a=!1;return J(o).pipe(Oe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Yt.SupersededByNewNavigation),Rt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ce(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new ni(u.id,this.urlSerializer.serialize(u.rawUrl),f,ch.IgnoredSameUrlNavigation)),u.resolve(!1),Rt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return J(u).pipe(Oe(f=>{let g=this.transitions?.getValue();return this.events.next(new Ds(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Rt:Promise.resolve(f)}),l2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ze(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Ce(z({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new lh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:D,extras:C}=u,b=new Ds(f,this.urlSerializer.serialize(g),y,D);this.events.next(b);let F=Q0(this.rootComponentType).snapshot;return this.currentTransition=o=Ce(z({},u),{targetSnapshot:F,urlAfterRedirects:g,extras:Ce(z({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,J(o)}else{let f="";return this.events.next(new ni(u.id,this.urlSerializer.serialize(u.extractedUrl),f,ch.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Rt}}),Ze(u=>{let l=new Vy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ee(u=>(this.currentTransition=o=Ce(z({},u),{guards:xj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),Bj(this.environmentInjector,u=>this.events.next(u)),Ze(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw mh(this.urlSerializer,u.guardsResult);let l=new jy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),ot(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Yt.GuardRejected),!1)),Ny(u=>{if(u.guards.canActivateChecks.length)return J(u).pipe(Ze(l=>{let d=new Uy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Oe(l=>{let d=!1;return J(l).pipe(d2(this.paramsInheritanceStrategy,this.environmentInjector),Ze({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Yt.NoDataFromResolver)}}))}),Ze(l=>{let d=new By(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Ny(u=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ze(g=>{d.component=g}),ee(()=>{})));for(let g of d.children)f.push(...l(g));return f};return $a(l(u.targetSnapshot.root)).pipe(Fr(null),tr(1))}),Ny(()=>this.afterPreactivation()),Oe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?ve(d).pipe(ee(()=>o)):J(o)}),ee(u=>{let l=Cj(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Ce(z({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ze(()=>{this.events.next(new Tu)}),Rj(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),tr(1),Ze({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ln(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Zp(this.transitionAbortSubject.pipe(Ze(u=>{throw u}))),Lr(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Yt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Or(u=>{if(a=!0,eS(u))this.events.next(new yr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Aj(u)?this.events.next(new Ts(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Du(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let d=rn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof bu){let{message:f,cancellationCode:g}=mh(this.urlSerializer,d);this.events.next(new yr(o.id,this.urlSerializer.serialize(o.extractedUrl),f,g)),this.events.next(new Ts(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(u);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Rt}))}))}cancelNavigationTransition(t,r,i){let o=new yr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function D2(n){return n!==_u}var T2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(C2),providedIn:"root"})}}return n})(),iv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},C2=(()=>{class n extends iv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Dm(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>L(b2),providedIn:"root"})}}return n})(),b2=(()=>{class n extends lS{constructor(){super(...arguments),this.location=L(gs),this.urlSerializer=L(xu),this.options=L(ku,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(uv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new vr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Q0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ds)this.stateMemento=this.createStateMemento();else if(t instanceof ni)this.rawUrlTree=r.initialUrl;else if(t instanceof lh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Tu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof yr&&(t.code===Yt.GuardRejected||t.code===Yt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Du?this.restoreHistory(r,!0):t instanceof Ln&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof vr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=z(z({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=z(z({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Dm(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(vu||{});function dS(n,e){n.events.pipe(ot(t=>t instanceof Ln||t instanceof yr||t instanceof Du||t instanceof ni),ee(t=>t instanceof Ln||t instanceof ni?vu.COMPLETE:(t instanceof yr?t.code===Yt.Redirect||t.code===Yt.SupersededByNewNavigation:!1)?vu.REDIRECTING:vu.FAILED),ot(t=>t!==vu.REDIRECTING),tr(1)).subscribe(()=>{e()})}function S2(n){throw n}var A2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},R2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ri=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(Md),this.stateManager=L(lS),this.options=L(ku,{optional:!0})||{},this.pendingTasks=L(cr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(cv),this.urlSerializer=L(xu),this.location=L(gs),this.urlHandlingStrategy=L(uv),this._events=new $e,this.errorHandler=this.options.errorHandler||S2,this.navigated=!1,this.routeReuseStrategy=L(T2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(vh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(_h,{optional:!0}),this.eventsSubscription=new Be,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof yr&&r.code!==Yt.Redirect&&r.code!==Yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ln)this.navigated=!0;else if(r instanceof Ts){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=z({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||D2(i.source)},s);this.scheduleNavigation(a,_u,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}M2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),_u,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=z({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=z(z({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=H0(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return G0(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=eo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,_u,null,r)}navigate(t,r={skipLocationChange:!1}){return x2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=z({},A2):r===!1?i=z({},R2):i=r,eo(t))return C0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return C0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,u=g});let d=this.pendingTasks.add();return dS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function x2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}function M2(n){return!(n instanceof Tu)&&!(n instanceof Ts)}var L6=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Ln&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(eo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:PC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:eo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ze(ri),ze(to),Tm("tabindex"),ze(iu),ze(lr),ze(gr))}}static{this.\u0275dir=Qi({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Zm("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Qm("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",uu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",uu],replaceUrl:[2,"replaceUrl","replaceUrl",uu],routerLink:"routerLink"},standalone:!0,features:[Gm,tu]})}}return n})();var wh=class{};var N2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ot(t=>t instanceof Ln),er(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=xd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ve(i).pipe(kr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let o=i.pipe(Ye(s=>s===null?J(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ve([o,s]).pipe(kr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(V(ri),V(Fd),V(Pt),V(wh),V(av))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hS=new q(""),P2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ds?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ln?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ni&&t.code===ch.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof dh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){GC()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function k2(n){return n.routerState.root}function Ou(n,e){return{\u0275kind:n,\u0275providers:e}}function O2(){let n=L(nn);return e=>{let t=n.get(dr);if(e!==t.components[0])return;let r=n.get(ri),i=n.get(fS);n.get(lv)===1&&r.initialNavigation(),n.get(pS,null,de.Optional)?.setUpPreloading(),n.get(hS,null,de.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var fS=new q("",{factory:()=>new $e}),lv=new q("",{providedIn:"root",factory:()=>1});function F2(){return Ou(2,[{provide:lv,useValue:0},{provide:kd,multi:!0,deps:[nn],useFactory:e=>{let t=e.get(Kb,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(ri),o=e.get(fS);dS(i,()=>{r(!0)}),e.get(cv).afterPreactivation=()=>(r(!0),o.closed?J(void 0):o),i.initialNavigation()}))}}])}function L2(){return Ou(3,[{provide:kd,multi:!0,useFactory:()=>{let e=L(ri);return()=>{e.setUpLocationChangeListener()}}},{provide:lv,useValue:2}])}var pS=new q("");function V2(n){return Ou(0,[{provide:pS,useExisting:N2},{provide:wh,useExisting:n}])}function j2(){return Ou(8,[R0,{provide:_h,useExisting:R0}])}function U2(n){let e=[{provide:uS,useValue:_2},{provide:cS,useValue:z({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ou(9,e)}var P0=new q("ROUTER_FORROOT_GUARD"),B2=[gs,{provide:xu,useClass:Es},ri,Nu,{provide:to,useFactory:k2,deps:[ri]},av,[]],V6=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[B2,[],{provide:vh,multi:!0,useValue:t},{provide:P0,useFactory:H2,deps:[[ri,new ls,new sm]]},{provide:ku,useValue:r||{}},r?.useHash?q2():z2(),$2(),r?.preloadingStrategy?V2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?G2(r):[],r?.bindToComponentInputs?j2().\u0275providers:[],r?.enableViewTransitions?U2().\u0275providers:[],W2()]}}static forChild(t){return{ngModule:n,providers:[{provide:vh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(V(P0,8))}}static{this.\u0275mod=Ot({type:n})}static{this.\u0275inj=kt({})}}return n})();function $2(){return{provide:hS,useFactory:()=>{let n=L(n0),e=L(he),t=L(ku),r=L(cv),i=L(xu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new P2(i,r,n,e,t)}}}function q2(){return{provide:gr,useClass:Yb}}function z2(){return{provide:gr,useClass:fy}}function H2(n){return"guarded"}function G2(n){return[n.initialNavigation==="disabled"?L2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?F2().\u0275providers:[]]}var k0=new q("");function W2(){return[{provide:k0,useFactory:O2},{provide:Od,multi:!0,useExisting:k0}]}var K2="firebase",Q2="10.14.1";Pr(K2,Q2,"app");var ro=new Gr("ANGULARFIRE2_VERSION");var Y2=(n,e)=>{let t=e?[e]:qE(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},no=class{constructor(){return Y2(Z2)}},Z2="app-check";function dv(){}var Eh=class{zone;delegate;constructor(e,t=qp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},hv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dv,{},dv,dv)),t.pipe(Ze({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Dh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Eh(Zone.current)),this.insideAngular=t.run(()=>new Eh(Zone.current,ki)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(V(he))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gS(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Q6(n){return n.pipe(Ht(gS().outsideAngular))}function $t(n){return J2(gS())(n)}function J2(n){return function(t){return t=t.lift(new hv(n.ngZone)),t.pipe(pn(n.outsideAngular),Ht(n.insideAngular))}}var X2="firebase",eU="10.14.1";St.registerVersion(X2,eU,"app-compat");var tU=["ngOnDestroy"],vS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(tU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Th=class{constructor(e){return e}},Ss=new q("angularfire2.app.options"),As=new q("angularfire2.app.name");function Fu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=St.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>St.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;nU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Th(s)}var nU=(n,...e)=>{ty()&&typeof console<"u"&&console[n](...e)},rU={provide:Th,useFactory:Fu,deps:[Ss,he,[new ls,As]]},i5=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ss,useValue:t},{provide:As,useValue:r}]}}constructor(t){St.registerVersion("angularfire",ro.full,"core"),St.registerVersion("angularfire",ro.full,"app-compat"),St.registerVersion("angular",Rb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(V(It))};static \u0275mod=Ot({type:n});static \u0275inj=kt({providers:[rU]})}return n})();function Ch(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return iU(i,s)||(yS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${oU?" You may need to reload as Firebase is not HMR aware.":""}`),yS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function iU(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var oU=typeof module<"u"&&!!module.hot,yS=(n,...e)=>{ty()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var uU=new Map,cU={activated:!1,tokenObservers:[]},lU={initialized:!1,enabled:!1};function En(n){return uU.get(n)||Object.assign({},cU)}function DS(){return lU}var dU="https://content-firebaseappcheck.googleapis.com/v1";var hU="exchangeDebugToken",wS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},p5=24*60*60*1e3;var pv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Tp,this.pending.promise.catch(t=>{}),yield fU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Tp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function fU(n){return new Promise(e=>{setTimeout(e,n)})}var pU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},oi=new BE("appCheck","AppCheck",pU);function TS(n){if(!En(n).activated)throw oi.create("use-before-activation",{appName:n.name})}function CS(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw oi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw oi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw oi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function bS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dU}/projects/${t}/apps/${r}:${hU}?key=${i}`,body:{debug_token:e}}}var gU="firebase-app-check-database",mU=1,gv="firebase-app-check-store";var bh=null;function yU(){return bh||(bh=new Promise((n,e)=>{try{let t=indexedDB.open(gU,mU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(oi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(gv,{keyPath:"compositeKey"})}}}catch(t){e(oi.create("storage-open",{originalErrorMessage:t?.message}))}}),bh)}function vU(n,e){return wU(_U(n),e)}function wU(n,e){return N(this,null,function*(){let r=(yield yU()).transaction(gv,"readwrite"),o=r.objectStore(gv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(oi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function _U(n){return`${n.options.appId}-${n.name}`}var mv=new zc("@firebase/app-check");function fv(n,e){return qc()?vU(n,e).catch(t=>{mv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function SS(){return DS().enabled}function AS(){return N(this,null,function*(){let n=DS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var IU={error:"UNKNOWN_ERROR"};function EU(n){return VE.encodeString(JSON.stringify(n),!1)}function yv(n,e=!1){return N(this,null,function*(){let t=n.app;TS(t);let r=En(t),i=r.token,o;if(i&&!Lu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Lu(u)?i=u:yield fv(t,void 0))}if(!e&&i&&Lu(i))return{token:i.token};let s=!1;if(SS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CS(bS(t,yield AS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield fv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield En(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?mv.warn(u.message):mv.error(u),o=u}let a;return i?o?Lu(i)?a={token:i.token,internalError:o}:a=IS(o):(a={token:i.token},r.token=i,yield fv(t,i)):a=IS(o),s&&bU(t,a),a})}function DU(n){return N(this,null,function*(){let e=n.app;TS(e);let{provider:t}=En(e);if(SS()){let r=yield AS(),{token:i}=yield CS(bS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function TU(n,e,t,r){let{app:i}=n,o=En(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Lu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),_S(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>_S(n))}function RS(n,e){let t=En(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _S(n){let{app:e}=n,t=En(e),r=t.tokenRefresher;r||(r=CU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function CU(n){let{app:e}=n;return new pv(()=>N(this,null,function*(){let t=En(e),r;if(t.token?r=yield yv(n,!0):r=yield yv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=En(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},wS.RETRIAL_MIN_WAIT,wS.RETRIAL_MAX_WAIT)}function bU(n,e){let t=En(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Lu(n){return n.expireTimeMillis-Date.now()>0}function IS(n){return{token:EU(IU),error:n}}var vv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=En(this.app);for(let t of e)RS(this.app,t.next);return Promise.resolve()}};function SU(n,e){return new vv(n,e)}function AU(n){return{getToken:e=>yv(n,e),getLimitedUseToken:()=>DU(n),addTokenListener:e=>TU(n,"INTERNAL",e),removeTokenListener:e=>RS(n.app,e)}}var RU="@firebase/app-check",xU="0.8.8";var MU="app-check",ES="app-check-internal";function NU(){Fa(new xi(MU,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return SU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ES).initialize()})),Fa(new xi(ES,n=>{let e=n.getProvider("app-check").getImmediate();return AU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Pr(RU,xU)}NU();var PU=["localhost","0.0.0.0","127.0.0.1"],b5=typeof window<"u"&&PU.includes(window.location.hostname);var wv=new q("angularfire2.auth.use-emulator"),_v=new q("angularfire2.auth.settings"),Iv=new q("angularfire2.auth.tenant-id"),Ev=new q("angularfire2.auth.langugage-code"),Dv=new q("angularfire2.auth.use-device-language"),Tv=new q("angularfire.auth.persistence"),Cv=(n,e,t,r,i,o,s,a)=>Ch(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),bv=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,d,f,g,y){let D=new $e,C=J(void 0).pipe(Ht(s.outsideAngular),Oe(()=>o.runOutsideAngular(()=>import("./chunk-3GWKGN6G.js"))),ee(()=>Fu(t,o,r)),ee(b=>Cv(b,o,a,l,d,f,u,g)),El({bufferSize:1,refCount:!1}));if(Jr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{C.pipe(Xt()).subscribe();let b=C.pipe(Oe(P=>P.getRedirectResult().then(G=>G,()=>null)),$t,El({bufferSize:1,refCount:!1})),F=C.pipe(Oe(P=>new ce(G=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(Z=>G.next(Z),Z=>G.error(Z),()=>G.complete()))})))),U=C.pipe(Oe(P=>new ce(G=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(Z=>G.next(Z),Z=>G.error(Z),()=>G.complete()))}))));this.authState=b.pipe(Dl(F),pn(s.outsideAngular),Ht(s.insideAngular)),this.user=b.pipe(Dl(U),pn(s.outsideAngular),Ht(s.insideAngular)),this.idToken=this.user.pipe(Oe(P=>P?ve(P.getIdToken()):J(null))),this.idTokenResult=this.user.pipe(Oe(P=>P?ve(P.getIdTokenResult()):J(null))),this.credential=Gp(b,D,this.authState.pipe(ot(P=>!P))).pipe(ee(P=>P?.user?P:null),pn(s.outsideAngular),Ht(s.insideAngular))}return vS(this,C,o,{spy:{apply:(b,F,U)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&U.then(P=>D.next(P))}}})}static \u0275fac=function(r){return new(r||n)(V(Ss),V(As,8),V(It),V(he),V(Dh),V(wv,8),V(_v,8),V(Iv,8),V(Ev,8),V(Dv,8),V(Tv,8),V(no,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),$5=(()=>{class n{constructor(){St.registerVersion("angularfire",ro.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ot({type:n});static \u0275inj=kt({providers:[bv]})}return n})();var MS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},NS={};var si,Sv;(function(){var n;function e(I,v){function _(){}_.prototype=v.prototype,I.D=v.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,T,A){for(var w=Array(arguments.length-2),Kn=2;Kn<arguments.length;Kn++)w[Kn-2]=arguments[Kn];return v.prototype[T].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,_){_||(_=0);var E=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)E[T]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(T=0;16>T;++T)E[T]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=I.g[0],_=I.g[1],T=I.g[2];var A=I.g[3],w=v+(A^_&(T^A))+E[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=A+(T^v&(_^T))+E[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=T+(_^A&(v^_))+E[2]+606105819&4294967295,T=A+(w<<17&4294967295|w>>>15),w=_+(v^T&(A^v))+E[3]+3250441966&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(A^_&(T^A))+E[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(T^v&(_^T))+E[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=T+(_^A&(v^_))+E[6]+2821735955&4294967295,T=A+(w<<17&4294967295|w>>>15),w=_+(v^T&(A^v))+E[7]+4249261313&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(A^_&(T^A))+E[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(T^v&(_^T))+E[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=T+(_^A&(v^_))+E[10]+4294925233&4294967295,T=A+(w<<17&4294967295|w>>>15),w=_+(v^T&(A^v))+E[11]+2304563134&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(A^_&(T^A))+E[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(T^v&(_^T))+E[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=T+(_^A&(v^_))+E[14]+2792965006&4294967295,T=A+(w<<17&4294967295|w>>>15),w=_+(v^T&(A^v))+E[15]+1236535329&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(T^A&(_^T))+E[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^T&(v^_))+E[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(A^v))+E[11]+643717713&4294967295,T=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(T^A))+E[0]+3921069994&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(T^A&(_^T))+E[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^T&(v^_))+E[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(A^v))+E[15]+3634488961&4294967295,T=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(T^A))+E[4]+3889429448&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(T^A&(_^T))+E[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^T&(v^_))+E[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(A^v))+E[3]+4107603335&4294967295,T=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(T^A))+E[8]+1163531501&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(T^A&(_^T))+E[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^T&(v^_))+E[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(A^v))+E[7]+1735328473&4294967295,T=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(T^A))+E[12]+2368359562&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(_^T^A)+E[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^T)+E[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=T+(A^v^_)+E[11]+1839030562&4294967295,T=A+(w<<16&4294967295|w>>>16),w=_+(T^A^v)+E[14]+4259657740&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(_^T^A)+E[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^T)+E[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=T+(A^v^_)+E[7]+4139469664&4294967295,T=A+(w<<16&4294967295|w>>>16),w=_+(T^A^v)+E[10]+3200236656&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(_^T^A)+E[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^T)+E[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=T+(A^v^_)+E[3]+3572445317&4294967295,T=A+(w<<16&4294967295|w>>>16),w=_+(T^A^v)+E[6]+76029189&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(_^T^A)+E[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^T)+E[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=T+(A^v^_)+E[15]+530742520&4294967295,T=A+(w<<16&4294967295|w>>>16),w=_+(T^A^v)+E[2]+3299628645&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(T^(_|~A))+E[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~T))+E[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=T+(v^(A|~_))+E[14]+2878612391&4294967295,T=A+(w<<15&4294967295|w>>>17),w=_+(A^(T|~v))+E[5]+4237533241&4294967295,_=T+(w<<21&4294967295|w>>>11),w=v+(T^(_|~A))+E[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~T))+E[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=T+(v^(A|~_))+E[10]+4293915773&4294967295,T=A+(w<<15&4294967295|w>>>17),w=_+(A^(T|~v))+E[1]+2240044497&4294967295,_=T+(w<<21&4294967295|w>>>11),w=v+(T^(_|~A))+E[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~T))+E[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=T+(v^(A|~_))+E[6]+2734768916&4294967295,T=A+(w<<15&4294967295|w>>>17),w=_+(A^(T|~v))+E[13]+1309151649&4294967295,_=T+(w<<21&4294967295|w>>>11),w=v+(T^(_|~A))+E[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~T))+E[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=T+(v^(A|~_))+E[2]+718787259&4294967295,T=A+(w<<15&4294967295|w>>>17),w=_+(A^(T|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var _=v-this.blockSize,E=this.B,T=this.h,A=0;A<v;){if(T==0)for(;A<=_;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<v;)if(E[T++]=I.charCodeAt(A++),T==this.blockSize){i(this,E),T=0;break}}else for(;A<v;)if(E[T++]=I[A++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var _=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.u(I),I=Array(16),v=_=0;4>v;++v)for(var E=0;32>E;E+=8)I[_++]=this.g[v]>>>E&255;return I};function o(I,v){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=v(I)}function s(I,v){this.h=v;for(var _=[],E=!0,T=I.length-1;0<=T;T--){var A=I[T]|0;E&&A==v||(_[T]=A,E=!1)}this.g=_}var a={};function u(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return b(l(-I));for(var v=[],_=1,E=0;I>=_;E++)v[E]=I/_|0,_*=4294967296;return new s(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return b(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),E=f,T=0;T<I.length;T+=8){var A=Math.min(8,I.length-T),w=parseInt(I.substring(T,T+A),v);8>A?(A=l(Math.pow(v,A)),E=E.j(A).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var f=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(C(this))return-b(this).m();for(var I=0,v=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(C(this))return"-"+b(this).toString(I);for(var v=l(Math.pow(I,6)),_=this,E="";;){var T=G(_,v).g;_=F(_,T.j(v));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=T,D(_))return A+E;for(;6>A.length;)A="0"+A;E=A+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function C(I){return I.h==-1}n.l=function(I){return I=F(this,I),C(I)?-1:D(I)?0:1};function b(I){for(var v=I.g.length,_=[],E=0;E<v;E++)_[E]=~I.g[E];return new s(_,~I.h).add(g)}n.abs=function(){return C(this)?b(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0,T=0;T<=v;T++){var A=E+(this.i(T)&65535)+(I.i(T)&65535),w=(A>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);E=w>>>16,A&=65535,w&=65535,_[T]=w<<16|A}return new s(_,_[_.length-1]&-2147483648?-1:0)};function F(I,v){return I.add(b(v))}n.j=function(I){if(D(this)||D(I))return f;if(C(this))return C(I)?b(this).j(b(I)):b(b(this).j(I));if(C(I))return b(this.j(b(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,_=[],E=0;E<2*v;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<I.g.length;T++){var A=this.i(E)>>>16,w=this.i(E)&65535,Kn=I.i(T)>>>16,ma=I.i(T)&65535;_[2*E+2*T]+=w*ma,U(_,2*E+2*T),_[2*E+2*T+1]+=A*ma,U(_,2*E+2*T+1),_[2*E+2*T+1]+=w*Kn,U(_,2*E+2*T+1),_[2*E+2*T+2]+=A*Kn,U(_,2*E+2*T+2)}for(E=0;E<v;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=v;E<2*v;E++)_[E]=0;return new s(_,0)};function U(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function P(I,v){this.g=I,this.h=v}function G(I,v){if(D(v))throw Error("division by zero");if(D(I))return new P(f,f);if(C(I))return v=G(b(I),v),new P(b(v.g),b(v.h));if(C(v))return v=G(I,b(v)),new P(b(v.g),v.h);if(30<I.g.length){if(C(I)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=v;0>=E.l(I);)_=Z(_),E=Z(E);var T=K(_,1),A=K(E,1);for(E=K(E,2),_=K(_,2);!D(E);){var w=A.add(E);0>=w.l(I)&&(T=T.add(_),A=w),E=K(E,1),_=K(_,1)}return v=F(I,T.j(v)),new P(T,v)}for(T=f;0<=I.l(v);){for(_=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),A=l(_),w=A.j(v);C(w)||0<w.l(I);)_-=E,A=l(_),w=A.j(v);D(A)&&(A=g),T=T.add(A),I=F(I,w)}return new P(T,I)}n.A=function(I){return G(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)&I.i(E);return new s(_,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)|I.i(E);return new s(_,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)^I.i(E);return new s(_,this.h^I.h)};function Z(I){for(var v=I.g.length+1,_=[],E=0;E<v;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(_,I.h)}function K(I,v){var _=v>>5;v%=32;for(var E=I.g.length-_,T=[],A=0;A<E;A++)T[A]=0<v?I.i(A+_)>>>v|I.i(A+_+1)<<32-v:I.i(A+_);return new s(T,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Sv=NS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,si=NS.Integer=s}).apply(typeof MS<"u"?MS:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wr={};var Av,OU,Rs,Rv,Vu,Ah,xv,Mv,Nv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var S=c[m];if(!(S in p))break e;p=p[S]}c=c[c.length-1],m=p[c],h=h(m),h!=m&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,m=!1,S={next:function(){if(!m&&p<c.length){var x=p++;return{value:h(x,c[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,m),c.apply(h,S)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function D(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,S,x){for(var j=Array(arguments.length-2),be=2;be<arguments.length;be++)j[be-2]=arguments[be];return h.prototype[S].apply(m,j)}}function C(c){let h=c.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=c[m];return p}return[]}function b(c,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let S=c.length||0,x=m.length||0;c.length=S+x;for(let j=0;j<x;j++)c[S+j]=m[j]}else c.push(m)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function U(c){return/^[\s\xa0]*$/.test(c)}function P(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var Z=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function K(c,h,p){for(let m in c)h.call(p,c[m],m,c)}function I(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,h){let p,m;for(let S=1;S<arguments.length;S++){m=arguments[S];for(p in m)c[p]=m[p];for(let x=0;x<_.length;x++)p=_[x],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function T(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function A(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Jf;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class Kn{constructor(){this.h=this.g=null}add(h,p){let m=ma.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var ma=new F(()=>new hM,c=>c.reset());class hM{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ya,va=!1,Jf=new Kn,kI=()=>{let c=a.Promise.resolve(void 0);ya=()=>{c.then(fM)}};var fM=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(p){A(p)}var h=ma;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}va=!1};function Rr(){this.s=this.s,this.C=this.C}Rr.prototype.s=!1,Rr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var pM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function wa(c,h){if(pt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(Z){e:{try{G(h.nodeName);var S=!0;break e}catch{}S=!1}S||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:gM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&wa.aa.h.call(this)}}D(wa,pt);var gM={2:"touch",3:"pen",4:"mouse"};wa.prototype.h=function(){wa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _a="closure_listenable_"+(1e6*Math.random()|0),mM=0;function yM(c,h,p,m,S){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=S,this.key=++mM,this.da=this.fa=!1}function Cc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function bc(c){this.src=c,this.g={},this.h=0}bc.prototype.add=function(c,h,p,m,S){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var j=ep(c,h,m,S);return-1<j?(h=c[j],p||(h.fa=!1)):(h=new yM(h,this.src,x,!!m,S),h.fa=p,c.push(h)),h};function Xf(c,h){var p=h.type;if(p in c.g){var m=c.g[p],S=Array.prototype.indexOf.call(m,h,void 0),x;(x=0<=S)&&Array.prototype.splice.call(m,S,1),x&&(Cc(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function ep(c,h,p,m){for(var S=0;S<c.length;++S){var x=c[S];if(!x.da&&x.listener==h&&x.capture==!!p&&x.ha==m)return S}return-1}var tp="closure_lm_"+(1e6*Math.random()|0),np={};function OI(c,h,p,m,S){if(m&&m.once)return LI(c,h,p,m,S);if(Array.isArray(h)){for(var x=0;x<h.length;x++)OI(c,h[x],p,m,S);return null}return p=sp(p),c&&c[_a]?c.K(h,p,l(m)?!!m.capture:!!m,S):FI(c,h,p,!1,m,S)}function FI(c,h,p,m,S,x){if(!h)throw Error("Invalid event type");var j=l(S)?!!S.capture:!!S,be=ip(c);if(be||(c[tp]=be=new bc(c)),p=be.add(h,p,m,j,x),p.proxy)return p;if(m=vM(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)pM||(S=j),S===void 0&&(S=!1),c.addEventListener(h.toString(),m,S);else if(c.attachEvent)c.attachEvent(jI(h.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function vM(){function c(p){return h.call(c.src,c.listener,p)}let h=wM;return c}function LI(c,h,p,m,S){if(Array.isArray(h)){for(var x=0;x<h.length;x++)LI(c,h[x],p,m,S);return null}return p=sp(p),c&&c[_a]?c.L(h,p,l(m)?!!m.capture:!!m,S):FI(c,h,p,!0,m,S)}function VI(c,h,p,m,S){if(Array.isArray(h))for(var x=0;x<h.length;x++)VI(c,h[x],p,m,S);else m=l(m)?!!m.capture:!!m,p=sp(p),c&&c[_a]?(c=c.i,h=String(h).toString(),h in c.g&&(x=c.g[h],p=ep(x,p,m,S),-1<p&&(Cc(x[p]),Array.prototype.splice.call(x,p,1),x.length==0&&(delete c.g[h],c.h--)))):c&&(c=ip(c))&&(h=c.g[h.toString()],c=-1,h&&(c=ep(h,p,m,S)),(p=-1<c?h[c]:null)&&rp(p))}function rp(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[_a])Xf(h.i,c);else{var p=c.type,m=c.proxy;h.removeEventListener?h.removeEventListener(p,m,c.capture):h.detachEvent?h.detachEvent(jI(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=ip(h))?(Xf(p,c),p.h==0&&(p.src=null,h[tp]=null)):Cc(c)}}}function jI(c){return c in np?np[c]:np[c]="on"+c}function wM(c,h){if(c.da)c=!0;else{h=new wa(h,this);var p=c.listener,m=c.ha||c.src;c.fa&&rp(c),c=p.call(m,h)}return c}function ip(c){return c=c[tp],c instanceof bc?c:null}var op="__closure_events_fn_"+(1e9*Math.random()>>>0);function sp(c){return typeof c=="function"?c:(c[op]||(c[op]=function(h){return c.handleEvent(h)}),c[op])}function gt(){Rr.call(this),this.i=new bc(this),this.M=this,this.F=null}D(gt,Rr),gt.prototype[_a]=!0,gt.prototype.removeEventListener=function(c,h,p,m){VI(this,c,h,p,m)};function Ct(c,h){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=h.type||h,typeof h=="string")h=new pt(h,c);else if(h instanceof pt)h.target=h.target||c;else{var S=h;h=new pt(m,c),E(h,S)}if(S=!0,p)for(var x=p.length-1;0<=x;x--){var j=h.g=p[x];S=Sc(j,m,!0,h)&&S}if(j=h.g=c,S=Sc(j,m,!0,h)&&S,S=Sc(j,m,!1,h)&&S,p)for(x=0;x<p.length;x++)j=h.g=p[x],S=Sc(j,m,!1,h)&&S}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],m=0;m<p.length;m++)Cc(p[m]);delete c.g[h],c.h--}}this.F=null},gt.prototype.K=function(c,h,p,m){return this.i.add(String(c),h,!1,p,m)},gt.prototype.L=function(c,h,p,m){return this.i.add(String(c),h,!0,p,m)};function Sc(c,h,p,m){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var S=!0,x=0;x<h.length;++x){var j=h[x];if(j&&!j.da&&j.capture==p){var be=j.listener,lt=j.ha||j.src;j.fa&&Xf(c.i,j),S=be.call(lt,m)!==!1&&S}}return S&&!m.defaultPrevented}function UI(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function BI(c){c.g=UI(()=>{c.g=null,c.i&&(c.i=!1,BI(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class _M extends Rr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:BI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ia(c){Rr.call(this),this.h=c,this.g={}}D(Ia,Rr);var $I=[];function qI(c){K(c.g,function(h,p){this.g.hasOwnProperty(p)&&rp(h)},c),c.g={}}Ia.prototype.N=function(){Ia.aa.N.call(this),qI(this)},Ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ap=a.JSON.stringify,IM=a.JSON.parse,EM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function up(){}up.prototype.h=null;function zI(c){return c.h||(c.h=c.i())}function HI(){}var Ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cp(){pt.call(this,"d")}D(cp,pt);function lp(){pt.call(this,"c")}D(lp,pt);var bi={},GI=null;function Ac(){return GI=GI||new gt}bi.La="serverreachability";function WI(c){pt.call(this,bi.La,c)}D(WI,pt);function Da(c){let h=Ac();Ct(h,new WI(h))}bi.STAT_EVENT="statevent";function KI(c,h){pt.call(this,bi.STAT_EVENT,c),this.stat=h}D(KI,pt);function bt(c){let h=Ac();Ct(h,new KI(h,c))}bi.Ma="timingevent";function QI(c,h){pt.call(this,bi.Ma,c),this.size=h}D(QI,pt);function Ta(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function Ca(){this.g=!0}Ca.prototype.xa=function(){this.g=!1};function DM(c,h,p,m,S,x){c.info(function(){if(c.g)if(x)for(var j="",be=x.split("&"),lt=0;lt<be.length;lt++){var _e=be[lt].split("=");if(1<_e.length){var mt=_e[0];_e=_e[1];var yt=mt.split("_");j=2<=yt.length&&yt[1]=="type"?j+(mt+"="+_e+"&"):j+(mt+"=redacted&")}}else j=null;else j=x;return"XMLHTTP REQ ("+m+") [attempt "+S+"]: "+h+`
`+p+`
`+j})}function TM(c,h,p,m,S,x,j){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+S+"]: "+h+`
`+p+`
`+x+" "+j})}function Mo(c,h,p,m){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+bM(c,p)+(m?" "+m:"")})}function CM(c,h){c.info(function(){return"TIMEOUT: "+h})}Ca.prototype.info=function(){};function bM(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var S=m[1];if(Array.isArray(S)&&!(1>S.length)){var x=S[0];if(x!="noop"&&x!="stop"&&x!="close")for(var j=1;j<S.length;j++)S[j]=""}}}}return ap(p)}catch{return h}}var Rc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},YI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dp;function xc(){}D(xc,up),xc.prototype.g=function(){return new XMLHttpRequest},xc.prototype.i=function(){return{}},dp=new xc;function xr(c,h,p,m){this.j=c,this.i=h,this.l=p,this.R=m||1,this.U=new Ia(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ZI}function ZI(){this.i=null,this.g="",this.h=!1}var JI={},hp={};function fp(c,h,p){c.L=1,c.v=kc(Qn(h)),c.m=p,c.P=!0,XI(c,null)}function XI(c,h){c.F=Date.now(),Mc(c),c.A=Qn(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),fE(p.i,"t",m),c.C=0,p=c.j.J,c.h=new ZI,c.g=ME(c.j,p?h:null,!c.m),0<c.O&&(c.M=new _M(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,m=c.ca;var S="readystatechange";Array.isArray(S)||(S&&($I[0]=S.toString()),S=$I);for(var x=0;x<S.length;x++){var j=OI(p,S[x],m||h.handleEvent,!1,h.h||h);if(!j)break;h.g[j.key]=j}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),Da(),DM(c.i,c.u,c.A,c.l,c.R,c.m)}xr.prototype.ca=function(c){c=c.target;let h=this.M;h&&Yn(c)==3?h.j():this.Y(c)},xr.prototype.Y=function(c){try{if(c==this.g)e:{let yt=Yn(this.g);var h=this.g.Ba();let ko=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||_E(this.g)))){this.J||yt!=4||h==7||(h==8||0>=ko?Da(3):Da(2)),pp(this);var p=this.g.Z();this.X=p;t:if(eE(this)){var m=_E(this.g);c="";var S=m.length,x=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),ba(this);var j="";break t}this.h.i=new a.TextDecoder}for(h=0;h<S;h++)this.h.h=!0,c+=this.h.i.decode(m[h],{stream:!(x&&h==S-1)});m.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=p==200,TM(this.i,this.u,this.A,this.l,this.R,yt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var be,lt=this.g;if((be=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(be)){var _e=be;break t}}_e=null}if(p=_e)Mo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gp(this,p);else{this.o=!1,this.s=3,bt(12),Si(this),ba(this);break e}}if(this.P){p=!0;let hn;for(;!this.J&&this.C<j.length;)if(hn=SM(this,j),hn==hp){yt==4&&(this.s=4,bt(14),p=!1),Mo(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==JI){this.s=4,bt(15),Mo(this.i,this.l,j,"[Invalid Chunk]"),p=!1;break}else Mo(this.i,this.l,hn,null),gp(this,hn);if(eE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||j.length!=0||this.h.h||(this.s=1,bt(16),p=!1),this.o=this.o&&p,!p)Mo(this.i,this.l,j,"[Invalid Chunked Response]"),Si(this),ba(this);else if(0<j.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Ip(mt),mt.M=!0,bt(11))}}else Mo(this.i,this.l,j,null),gp(this,j);yt==4&&Si(this),this.o&&!this.J&&(yt==4?SE(this.j,this):(this.o=!1,Mc(this)))}else zM(this.g),p==400&&0<j.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Si(this),ba(this)}}}catch{}finally{}};function eE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function SM(c,h){var p=c.C,m=h.indexOf(`
`,p);return m==-1?hp:(p=Number(h.substring(p,m)),isNaN(p)?JI:(m+=1,m+p>h.length?hp:(h=h.slice(m,m+p),c.C=m+p,h)))}xr.prototype.cancel=function(){this.J=!0,Si(this)};function Mc(c){c.S=Date.now()+c.I,tE(c,c.I)}function tE(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ta(g(c.ba,c),h)}function pp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}xr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(CM(this.i,this.A),this.L!=2&&(Da(),bt(17)),Si(this),this.s=2,ba(this)):tE(this,this.S-c)};function ba(c){c.j.G==0||c.J||SE(c.j,c)}function Si(c){pp(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,qI(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function gp(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||mp(p.h,c))){if(!c.K&&mp(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var S=m;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)jc(p),Lc(p);else break e;_p(p),bt(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ta(g(p.Za,p),6e3));if(1>=iE(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ri(p,11)}else if((c.K||p.g==c)&&jc(p),!U(h))for(S=p.Da.g.parse(h),h=0;h<S.length;h++){let _e=S[h];if(p.T=_e[0],_e=_e[1],p.G==2)if(_e[0]=="c"){p.K=_e[1],p.ia=_e[2];let mt=_e[3];mt!=null&&(p.la=mt,p.j.info("VER="+p.la));let yt=_e[4];yt!=null&&(p.Aa=yt,p.j.info("SVER="+p.Aa));let ko=_e[5];ko!=null&&typeof ko=="number"&&0<ko&&(m=1.5*ko,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let hn=c.g;if(hn){let Bc=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bc){var x=m.h;x.g||Bc.indexOf("spdy")==-1&&Bc.indexOf("quic")==-1&&Bc.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(yp(x,x.h),x.h=null))}if(m.D){let Ep=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ep&&(m.ya=Ep,Ne(m.I,m.D,Ep))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var j=c;if(m.qa=xE(m,m.J?m.ia:null,m.W),j.K){oE(m.h,j);var be=j,lt=m.L;lt&&(be.I=lt),be.B&&(pp(be),Mc(be)),m.g=j}else CE(m);0<p.i.length&&Vc(p)}else _e[0]!="stop"&&_e[0]!="close"||Ri(p,7);else p.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Ri(p,7):wp(p):_e[0]!="noop"&&p.l&&p.l.ta(_e),p.v=0)}}Da(4)}catch{}}var AM=class{constructor(c,h){this.g=c,this.map=h}};function nE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function iE(c){return c.h?1:c.g?c.g.size:0}function mp(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function yp(c,h){c.g?c.g.add(h):c.h=h}function oE(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}nE.prototype.cancel=function(){if(this.i=sE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function sE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return C(c.i)}function RM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,m=0;m<p;m++)h.push(c[m]);return h}h=[],p=0;for(m in c)h[p++]=c[m];return h}function xM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let m in c)h[p++]=m;return h}}}function aE(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=xM(c),m=RM(c),S=m.length,x=0;x<S;x++)h.call(void 0,m[x],p&&p[x],c)}var uE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MM(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),S=null;if(0<=m){var x=c[p].substring(0,m);S=c[p].substring(m+1)}else x=c[p];h(x,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Ai(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ai){this.h=c.h,Nc(this,c.j),this.o=c.o,this.g=c.g,Pc(this,c.s),this.l=c.l;var h=c.i,p=new Ra;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),cE(this,p),this.m=c.m}else c&&(h=String(c).match(uE))?(this.h=!1,Nc(this,h[1]||"",!0),this.o=Sa(h[2]||""),this.g=Sa(h[3]||"",!0),Pc(this,h[4]),this.l=Sa(h[5]||"",!0),cE(this,h[6]||"",!0),this.m=Sa(h[7]||"")):(this.h=!1,this.i=new Ra(null,this.h))}Ai.prototype.toString=function(){var c=[],h=this.j;h&&c.push(Aa(h,lE,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(Aa(h,lE,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Aa(p,p.charAt(0)=="/"?kM:PM,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Aa(p,FM)),c.join("")};function Qn(c){return new Ai(c)}function Nc(c,h,p){c.j=p?Sa(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Pc(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function cE(c,h,p){h instanceof Ra?(c.i=h,LM(c.i,c.h)):(p||(h=Aa(h,OM)),c.i=new Ra(h,c.h))}function Ne(c,h,p){c.i.set(h,p)}function kc(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Sa(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Aa(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,NM),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function NM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var lE=/[#\/\?@]/g,PM=/[#\?:]/g,kM=/[#\?]/g,OM=/[#\?@]/g,FM=/#/g;function Ra(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function Mr(c){c.g||(c.g=new Map,c.h=0,c.i&&MM(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Ra.prototype,n.add=function(c,h){Mr(this),this.i=null,c=No(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function dE(c,h){Mr(c),h=No(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function hE(c,h){return Mr(c),h=No(c,h),c.g.has(h)}n.forEach=function(c,h){Mr(this),this.g.forEach(function(p,m){p.forEach(function(S){c.call(h,S,m,this)},this)},this)},n.na=function(){Mr(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let S=c[m];for(let x=0;x<S.length;x++)p.push(h[m])}return p},n.V=function(c){Mr(this);let h=[];if(typeof c=="string")hE(this,c)&&(h=h.concat(this.g.get(No(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return Mr(this),this.i=null,c=No(this,c),hE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function fE(c,h,p){dE(c,h),0<p.length&&(c.i=null,c.g.set(No(c,h),C(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let x=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var S=x;j[m]!==""&&(S+="="+encodeURIComponent(String(j[m]))),c.push(S)}}return this.i=c.join("&")};function No(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function LM(c,h){h&&!c.j&&(Mr(c),c.i=null,c.g.forEach(function(p,m){var S=m.toLowerCase();m!=S&&(dE(this,m),fE(this,S,p))},c)),c.j=h}function VM(c,h){let p=new Ca;if(a.Image){let m=new Image;m.onload=y(Nr,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(Nr,p,"TestLoadImage: error",!1,h,m),m.onabort=y(Nr,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(Nr,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else h(!1)}function jM(c,h){let p=new Ca,m=new AbortController,S=setTimeout(()=>{m.abort(),Nr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:m.signal}).then(x=>{clearTimeout(S),x.ok?Nr(p,"TestPingServer: ok",!0,h):Nr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(S),Nr(p,"TestPingServer: error",!1,h)})}function Nr(c,h,p,m,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),m(p)}catch{}}function UM(){this.g=new EM}function BM(c,h,p){let m=p||"";try{aE(c,function(S,x){let j=S;l(S)&&(j=ap(S)),h.push(m+x+"="+encodeURIComponent(j))})}catch(S){throw h.push(m+"type="+encodeURIComponent("_badmap")),S}}function xa(c){this.l=c.Ub||null,this.j=c.eb||!1}D(xa,up),xa.prototype.g=function(){return new Oc(this.l,this.j)},xa.prototype.i=function(c){return function(){return c}}({});function Oc(c,h){gt.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Oc,gt),n=Oc.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,Na(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ma(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function pE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Ma(this):Na(this),this.readyState==3&&pE(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ma(this))},n.Qa=function(c){this.g&&(this.response=c,Ma(this))},n.ga=function(){this.g&&Ma(this)};function Ma(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Na(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function Na(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Oc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function gE(c){let h="";return K(c,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function vp(c,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=gE(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ne(c,h,p))}function Ue(c){gt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ue,gt);var $M=/^https?$/i,qM=["POST","PUT"];n=Ue.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dp.g(),this.v=this.o?zI(this.o):zI(dp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(x){mE(this,x);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var S in m)p.set(S,m[S]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())p.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(x=>x.toLowerCase()=="content-type"),S=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qM,h,void 0))||m||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,j]of p)this.g.setRequestHeader(x,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wE(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){mE(this,x)}};function mE(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,yE(c),Fc(c)}function yE(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),Fc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fc(this,!0)),Ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vE(this):this.bb())},n.bb=function(){vE(this)};function vE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Yn(c)!=4||c.Z()!=2)){if(c.u&&Yn(c)==4)UI(c.Ea,0,c);else if(Ct(c,"readystatechange"),Yn(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=j===0){var S=String(c.D).match(uE)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),m=!$M.test(S?S.toLowerCase():"")}p=m}if(p)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var x=2<Yn(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",yE(c)}}finally{Fc(c)}}}}function Fc(c,h){if(c.g){wE(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Ct(c,"ready");try{p.onreadystatechange=m}catch{}}}function wE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Yn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),IM(h)}};function _E(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function zM(c){let h={};c=(c.g&&2<=Yn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(U(c[m]))continue;var p=T(c[m]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let x=h[S]||[];h[S]=x,x.push(p)}I(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pa(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function IE(c){this.Aa=0,this.i=[],this.j=new Ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pa("baseRetryDelayMs",5e3,c),this.cb=Pa("retryDelaySeedMs",1e4,c),this.Wa=Pa("forwardChannelMaxRetries",2,c),this.wa=Pa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new nE(c&&c.concurrentRequestLimit),this.Da=new UM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=IE.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,m){bt(0),this.W=c,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=xE(this,null,this.W),Vc(this)};function wp(c){if(EE(c),c.G==3){var h=c.U++,p=Qn(c.I);if(Ne(p,"SID",c.K),Ne(p,"RID",h),Ne(p,"TYPE","terminate"),ka(c,p),h=new xr(c,c.j,h),h.L=2,h.v=kc(Qn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=ME(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Mc(h)}RE(c)}function Lc(c){c.g&&(Ip(c),c.g.cancel(),c.g=null)}function EE(c){Lc(c),c.u&&(a.clearTimeout(c.u),c.u=null),jc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Vc(c){if(!rE(c.h)&&!c.s){c.s=!0;var h=c.Ga;ya||kI(),va||(ya(),va=!0),Jf.add(h,c),c.B=0}}function HM(c,h){return iE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ta(g(c.Ga,c,h),AE(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let S=new xr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),E(x,this.S)):x=this.S),this.m!==null||this.O||(S.H=x,x=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=TE(this,S,h),p=Qn(this.I),Ne(p,"RID",c),Ne(p,"CVER",22),this.D&&Ne(p,"X-HTTP-Session-Id",this.D),ka(this,p),x&&(this.O?h="headers="+encodeURIComponent(String(gE(x)))+"&"+h:this.m&&vp(p,this.m,x)),yp(this.h,S),this.Ua&&Ne(p,"TYPE","init"),this.P?(Ne(p,"$req",h),Ne(p,"SID","null"),S.T=!0,fp(S,p,null)):fp(S,p,h),this.G=2}}else this.G==3&&(c?DE(this,c):this.i.length==0||rE(this.h)||DE(this))};function DE(c,h){var p;h?p=h.l:p=c.U++;let m=Qn(c.I);Ne(m,"SID",c.K),Ne(m,"RID",p),Ne(m,"AID",c.T),ka(c,m),c.m&&c.o&&vp(m,c.m,c.o),p=new xr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=TE(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),yp(c.h,p),fp(p,m,h)}function ka(c,h){c.H&&K(c.H,function(p,m){Ne(h,m,p)}),c.l&&aE({},function(p,m){Ne(h,m,p)})}function TE(c,h,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var S=c.i;let x=-1;for(;;){let j=["count="+p];x==-1?0<p?(x=S[0].g,j.push("ofs="+x)):x=0:j.push("ofs="+x);let be=!0;for(let lt=0;lt<p;lt++){let _e=S[lt].g,mt=S[lt].map;if(_e-=x,0>_e)x=Math.max(0,S[lt].g-100),be=!1;else try{BM(mt,j,"req"+_e+"_")}catch{m&&m(mt)}}if(be){m=j.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,m}function CE(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;ya||kI(),va||(ya(),va=!0),Jf.add(h,c),c.v=0}}function _p(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ta(g(c.Fa,c),AE(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,bE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ta(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Lc(this),bE(this))};function Ip(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function bE(c){c.g=new xr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Qn(c.qa);Ne(h,"RID","rpc"),Ne(h,"SID",c.K),Ne(h,"AID",c.T),Ne(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(h,"TO",c.ja),Ne(h,"TYPE","xmlhttp"),ka(c,h),c.m&&c.o&&vp(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=kc(Qn(h)),p.m=null,p.P=!0,XI(p,c)}n.Za=function(){this.C!=null&&(this.C=null,Lc(this),_p(this),bt(19))};function jc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function SE(c,h){var p=null;if(c.g==h){jc(c),Ip(c),c.g=null;var m=2}else if(mp(c.h,h))p=h.D,oE(c.h,h),m=1;else return;if(c.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var S=c.B;m=Ac(),Ct(m,new QI(m,p)),Vc(c)}else CE(c);else if(S=h.s,S==3||S==0&&0<h.X||!(m==1&&HM(c,h)||m==2&&_p(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),S){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function AE(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function Ri(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),m=c.Xa;let S=!m;m=new Ai(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Nc(m,"https"),kc(m),S?VM(m.toString(),p):jM(m.toString(),p)}else bt(2);c.G=0,c.l&&c.l.sa(h),RE(c),EE(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function RE(c){if(c.G=0,c.ka=[],c.l){let h=sE(c.h);(h.length!=0||c.i.length!=0)&&(b(c.ka,h),b(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function xE(c,h,p){var m=p instanceof Ai?Qn(p):new Ai(p);if(m.g!="")h&&(m.g=h+"."+m.g),Pc(m,m.s);else{var S=a.location;m=S.protocol,h=h?h+"."+S.hostname:S.hostname,S=+S.port;var x=new Ai(null);m&&Nc(x,m),h&&(x.g=h),S&&Pc(x,S),p&&(x.l=p),m=x}return p=c.D,h=c.ya,p&&h&&Ne(m,p,h),Ne(m,"VER",c.la),ka(c,m),m}function ME(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Ue(new xa({eb:p})):new Ue(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function NE(){}n=NE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Uc(){}Uc.prototype.g=function(c,h){return new zt(c,h)};function zt(c,h){gt.call(this),this.g=new IE(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!U(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!U(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new Po(this)}D(zt,gt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){wp(this.g)},zt.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=ap(c),c=p);h.i.push(new AM(h.Ya++,c)),h.G==3&&Vc(h)},zt.prototype.N=function(){this.g.l=null,delete this.j,wp(this.g),delete this.g,zt.aa.N.call(this)};function PE(c){cp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}D(PE,cp);function kE(){lp.call(this),this.status=1}D(kE,lp);function Po(c){this.g=c}D(Po,NE),Po.prototype.ua=function(){Ct(this.g,"a")},Po.prototype.ta=function(c){Ct(this.g,new PE(c))},Po.prototype.sa=function(c){Ct(this.g,new kE)},Po.prototype.ra=function(){Ct(this.g,"b")},Uc.prototype.createWebChannel=Uc.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Nv=wr.createWebChannelTransport=function(){return new Uc},Mv=wr.getStatEventTarget=function(){return Ac()},xv=wr.Event=bi,Ah=wr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rc.NO_ERROR=0,Rc.TIMEOUT=8,Rc.HTTP_ERROR=6,Vu=wr.ErrorCode=Rc,YI.COMPLETE="complete",Rv=wr.EventType=YI,HI.EventType=Ea,Ea.OPEN="a",Ea.CLOSE="b",Ea.ERROR="c",Ea.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Rs=wr.WebChannel=HI,OU=wr.FetchXmlHttpFactory=xa,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,Av=wr.XhrIo=Ue}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});var PS="@firebase/firestore";var nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");var sa="10.14.0";var fi=new zc("@firebase/firestore");function ks(){return fi.logLevel}function FA(n){fi.setLogLevel(n)}function O(n,...e){if(fi.logLevel<=An.DEBUG){let t=e.map(L_);fi.debug(`Firestore (${sa}): ${n}`,...t)}}function Ge(n,...e){if(fi.logLevel<=An.ERROR){let t=e.map(L_);fi.error(`Firestore (${sa}): ${n}`,...t)}}function Dn(n,...e){if(fi.logLevel<=An.WARN){let t=e.map(L_);fi.warn(`Firestore (${sa}): ${n}`,...t)}}function L_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function H(n="Unexpected state"){let e=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: `+n;throw Ge(e),new Error(e)}function Q(n,e){n||H()}function LA(n,e){n||H()}function B(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends UE{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var st=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Vh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Vv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nt.UNAUTHENTICATED))}shutdown(){}},jv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Uv=class{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Q(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new st;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new st,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new st)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new Vh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new nt(e)}},Bv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$v=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Bv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Q(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Q(typeof t.token=="string"),this.R=t.token,new qv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function FU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var jh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=FU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function qs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function VA(n){return n+"\0"}var Ve=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Uh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&H(),r===void 0?r=e.length-t:r>e.length-t&&H(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},me=class n extends Uh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},LU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,We=class n extends Uh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return LU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(me.fromString(e))}static fromName(e){return new n(me.fromString(e).popFirst(5))}static empty(){return new n(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new me(e.slice()))}};var zs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Hv(n){return n.fields.find(e=>e.kind===2)}function oo(n){return n.fields.filter(e=>e.kind!==2)}zs.UNKNOWN_ID=-1;var Us=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Yu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,ln.min())}};function jA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new ln(i,$.empty(),e)}function UA(n){return new ln(n.readTime,n.key,-1)}var ln=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(X.min(),$.empty(),-1)}static max(){return new n(X.max(),$.empty(),-1)}};function V_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var BA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Di(n){return N(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==BA)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var $h=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new st,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ho(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=j_(r.target.error);this.V.reject(new ho(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ho(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Wv(t)}},pi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Oa())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),so(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!qc())return!1;if(n.v())return!0;let e=Oa(),t=n.S(e),r=0<t&&t<10,i=$A(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ho(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ho(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=$h.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),R.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function $A(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Gv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return so(this.B.delete())}},ho=class extends k{constructor(e,t){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ti(n){return n.name==="IndexedDbTransactionError"}var Wv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),so(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),so(this.store.add(e))}get(e){return so(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),so(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),so(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new R((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new R((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new R((r,i)=>{t.onerror=o=>{let s=j_(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new R((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Gv(a),l=t(a.primaryKey,a.value,u);if(l instanceof R){let d=l.catch(f=>(u.done(),R.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>R.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function so(n){return new R((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=j_(r.target.error);t(i)}})}var kS=!1;function j_(n){let e=pi.S(Oa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kS||(kS=!0,setTimeout(()=>{throw r},0)),r}}return n}var Kv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Ti(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Di(t)}yield this.X(6e4)}))}},Qv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return R.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=UA(o);V_(s,r)>0&&(r=s)}),new ln(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function yc(n){return n==null}function Zu(n){return n===0&&1/n==-1/0}function qA(n){return typeof n=="number"&&Number.isInteger(n)&&!Zu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Lt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OS(e)),e=VU(n.get(t),e);return OS(e)}function VU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function OS(n){return n+""}function Vn(n){let e=n.length;if(Q(e>=2),e===2)return Q(n.charAt(0)===""&&n.charAt(1)===""),me.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&H(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:H()}o=s+2}return new me(r)}var FS=["userId","batchId"];function Ph(n,e){return[n,Lt(e)]}function zA(n,e,t){return[n,Lt(e),t]}var jU={},UU=["prefixPath","collectionGroup","readTime","documentId"],BU=["prefixPath","collectionGroup","documentId"],$U=["collectionGroup","readTime","prefixPath","documentId"],qU=["canonicalId","targetId"],zU=["targetId","path"],HU=["path","targetId"],GU=["collectionId","parent"],WU=["indexId","uid"],KU=["uid","sequenceNumber"],QU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YU=["indexId","uid","orderedDocumentKey"],ZU=["userId","collectionPath","documentId"],JU=["userId","collectionPath","largestBatchId"],XU=["userId","collectionGroup","largestBatchId"],HA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eB=[...HA,"documentOverlays"],GA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WA=GA,U_=[...WA,"indexConfiguration","indexState","indexEntries"],tB=U_,nB=[...U_,"globals"];var Ju=class extends Bh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function at(n,e){let t=B(n);return pi.F(t._e,e)}function LS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function To(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ke=class n{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new js(this.root,e,this.comparator,!1)}getReverseIterator(){return new js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new js(this.root,e,this.comparator,!0)}},js=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Un=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Re=class n{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qh(this.data.getIterator())}getIteratorFrom(e){return new qh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},qh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function xs(n){return n.hasNext()?n.getNext():void 0}var Jt=class n{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new n([])}unionWith(e){let t=new Re(We.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var zh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function QA(){return typeof atob<"u"}var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var rB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(n){if(Q(!!n),typeof n=="string"){let e=0,t=rB.exec(n);if(Q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gi(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}function Ff(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function B_(n){let e=n.mapValue.fields.__previous_value__;return Ff(e)?B_(e):e}function Xu(n){let e=Er(n.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var Yv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},mi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var di={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kh={nullValue:"NULL_VALUE"};function fo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ff(n)?4:YA(n)?9007199254740991:Lf(n)?10:11:H()}function qn(n,e){if(n===e)return!0;let t=fo(n);if(t!==fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xu(n).isEqual(Xu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Er(i.timestampValue),a=Er(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return gi(i.bytesValue).isEqual(gi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?Zu(s)===Zu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return qs(n.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(LS(s)!==LS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!qn(s[u],a[u])))return!1;return!0}(n,e);default:return H()}}function ec(n,e){return(n.values||[]).find(t=>qn(t,e))!==void 0}function yi(n,e){if(n===e)return 0;let t=fo(n),r=fo(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),u=Fe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return VS(n.timestampValue,e.timestampValue);case 4:return VS(Xu(n),Xu(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=gi(o),u=gi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=re(a[l],u[l]);if(d!==0)return d}return re(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Fe(o.latitude),Fe(s.latitude));return a!==0?a:re(Fe(o.longitude),Fe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return jS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=D?.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:jS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===di.mapValue&&s===di.mapValue)return 0;if(o===di.mapValue)return 1;if(s===di.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=re(u[f],d[f]);if(g!==0)return g;let y=yi(a[u[f]],l[d[f]]);if(y!==0)return y}return re(u.length,d.length)}(n.mapValue,e.mapValue);default:throw H()}}function VS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=Er(n),r=Er(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function jS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=yi(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function Hs(n){return Zv(n)}function Zv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Er(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return gi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Zv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Zv(t.fields[s])}`;return i+"}"}(n.mapValue):H()}function po(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jv(n){return!!n&&"integerValue"in n}function tc(n){return!!n&&"arrayValue"in n}function US(n){return!!n&&"nullValue"in n}function BS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Oh(n){return!!n&&"mapValue"in n}function Lf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return To(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var ZA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function iB(n){return"nullValue"in n?kh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?po(mi.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Lf(n)?ZA:{mapValue:{}}:H()}function oB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?po(mi.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?ZA:"mapValue"in n?Lf(n)?{mapValue:{}}:di:H()}function $S(n,e){let t=yi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function qS(n,e){let t=yi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Tt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=We.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Hu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){To(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Hu(this.value))}};function JA(n){let e=[];return To(n.fields,(t,r)=>{let i=new We([t]);if(Oh(r)){let o=JA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}var rt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),Tt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,X.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),Tt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),Tt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var zn=class{constructor(e,t){this.position=e,this.inclusive=t}};function zS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=yi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function HS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qn(n.position[t],e.position[t]))return!1;return!0}var go=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function sB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Hh=class{},fe=class n extends Hh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new tw(e,t,r):t==="array-contains"?new iw(e,r):t==="in"?new Gh(e,r):t==="not-in"?new ow(e,r):t==="array-contains-any"?new sw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new nw(e,r):new rw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(yi(t,this.value)):t!==null&&fo(this.value)===fo(t)&&this.matchesComparison(yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends Hh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Gs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Gs(n){return n.op==="and"}function Xv(n){return n.op==="or"}function $_(n){return XA(n)&&Gs(n)}function XA(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function ew(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+Hs(n.value);if($_(n))return n.filters.map(e=>ew(e)).join(",");{let e=n.filters.map(t=>ew(t)).join(",");return`${n.op}(${e})`}}function eR(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&qn(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&eR(s,i.filters[a]),!0):!1}(n,e):void H()}function tR(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function nR(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${Hs(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(nR).join(" ,")+"}"}(n):"Filter"}var tw=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},nw=class extends fe{constructor(e,t){super(e,"in",t),this.keys=rR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},rw=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=rR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function rR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var iw=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return tc(t)&&ec(t.arrayValue,this.value)}},Gh=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ec(this.value.arrayValue,t)}},ow=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ec(this.value.arrayValue,t)}},sw=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!tc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ec(this.value.arrayValue,r))}};var aw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function uw(n,e=null,t=[],r=[],i=null,o=null,s=null){return new aw(n,e,t,r,i,o,s)}function mo(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ew(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hs(r)).join(",")),e.ue=t}return e.ue}function vc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HS(n.startAt,e.startAt)&&HS(n.endAt,e.endAt)}function Wh(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Kh(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function GS(n,e,t){let r=kh,i=!0;for(let o of Kh(n,e)){let s=kh,a=!0;switch(o.op){case"<":case"<=":s=iB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=kh}$S({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];$S({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function WS(n,e,t){let r=di,i=!0;for(let o of Kh(n,e)){let s=di,a=!0;switch(o.op){case">=":case">":s=oB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=di}qS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];qS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Tn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function iR(n,e,t,r,i,o,s,a){return new Tn(n,e,t,r,i,o,s,a)}function aa(n){return new Tn(n)}function KS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function q_(n){return n.collectionGroup!==null}function Bs(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Re(We.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new go(o,r))}),t.has(We.keyField().canonicalString())||e.ce.push(new go(We.keyField(),r))}return e.ce}function Vt(n){let e=B(n);return e.le||(e.le=aB(e,Bs(n))),e.le}function aB(n,e){if(n.limitType==="F")return uw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new go(i.field,o)});let t=n.endAt?new zn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new zn(n.startAt.position,n.startAt.inclusive):null;return uw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function cw(n,e){let t=n.filters.concat([e]);return new Tn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qh(n,e,t){return new Tn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wc(n,e){return vc(Vt(n),Vt(e))&&n.limitType===e.limitType}function oR(n){return`${mo(Vt(n))}|lt:${n.limitType}`}function Os(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>nR(i)).join(", ")}]`),yc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Hs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Hs(i)).join(",")),`Target(${r})`}(Vt(n))}; limitType=${n.limitType})`}function _c(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Bs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=zS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Bs(r),i)||r.endAt&&!function(s,a,u){let l=zS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Bs(r),i))}(n,e)}function sR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aR(n){return(e,t)=>{let r=!1;for(let i of Bs(n)){let o=uB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function uB(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?yi(u,l):H()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}var Hn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return KA(this.inner)}size(){return this.innerSize}};var cB=new ke($.comparator);function qt(){return cB}var uR=new ke($.comparator);function qu(...n){let e=uR;for(let t of n)e=e.insert(t.key,t);return e}function cR(n){let e=uR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function jn(){return Gu()}function lR(){return Gu()}function Gu(){return new Hn(n=>n.toString(),(n,e)=>n.isEqual(e))}var lB=new ke($.comparator),dB=new Re($.comparator);function se(...n){let e=dB;for(let t of n)e=e.add(t);return e}var hB=new Re(re);function z_(){return hB}function H_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function dR(n){return{integerValue:""+n}}function hR(n,e){return qA(e)?dR(e):H_(n,e)}var Ws=class{constructor(){this._=void 0}};function fB(n,e,t){return n instanceof vi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ff(o)&&(o=B_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Dr?pR(n,e):n instanceof Tr?gR(n,e):function(i,o){let s=fR(i,o),a=QS(s)+QS(i.Pe);return Jv(s)&&Jv(i.Pe)?dR(a):H_(i.serializer,a)}(n,e)}function pB(n,e,t){return n instanceof Dr?pR(n,e):n instanceof Tr?gR(n,e):t}function fR(n,e){return n instanceof wi?function(r){return Jv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var vi=class extends Ws{},Dr=class extends Ws{constructor(e){super(),this.elements=e}};function pR(n,e){let t=mR(e);for(let r of n.elements)t.some(i=>qn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Tr=class extends Ws{constructor(e){super(),this.elements=e}};function gR(n,e){let t=mR(e);for(let r of n.elements)t=t.filter(i=>!qn(i,r));return{arrayValue:{values:t}}}var wi=class extends Ws{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function QS(n){return Fe(n.integerValue||n.doubleValue)}function mR(n){return tc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var yo=class{constructor(e,t){this.field=e,this.transform=t}};function gB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Dr&&i instanceof Dr||r instanceof Tr&&i instanceof Tr?qs(r.elements,i.elements,qn):r instanceof wi&&i instanceof wi?qn(r.Pe,i.Pe):r instanceof vi&&i instanceof vi}(n.transform,e.transform)}var lw=class{constructor(e,t){this.version=e,this.transformResults=t}},qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Fh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ks=class{};function yR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ii(n.key,qe.none()):new _i(n.key,n.data,qe.none());{let t=n.data,r=Tt.empty(),i=new Re(We.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Cn(n.key,r,new Jt(i.toArray()),qe.none())}}function mB(n,e,t){n instanceof _i?function(i,o,s){let a=i.value.clone(),u=ZS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Cn?function(i,o,s){if(!Fh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ZS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(vR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Wu(n,e,t,r){return n instanceof _i?function(o,s,a,u){if(!Fh(o.precondition,s))return a;let l=o.value.clone(),d=JS(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cn?function(o,s,a,u){if(!Fh(o.precondition,s))return a;let l=JS(o.fieldTransforms,u,s),d=s.data;return d.setAll(vR(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Fh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function yB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=fR(r.transform,i||null);o!=null&&(t===null&&(t=Tt.empty()),t.set(r.field,o))}return t||null}function YS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qs(r,i,(o,s)=>gB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var _i=class extends Ks{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Cn=class extends Ks{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function vR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ZS(n,e,t){let r=new Map;Q(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,pB(s,a,t[i]))}return r}function JS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,fB(o,s,e))}return r}var Ii=class extends Ks{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},nc=class extends Ks{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&mB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Wu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=lR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=yR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&qs(this.mutations,e.mutations,(t,r)=>YS(t,r))&&qs(this.baseMutations,e.baseMutations,(t,r)=>YS(t,r))}},dw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Q(e.mutations.length===r.length);let i=function(){return lB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var ic=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,ge;function wR(n){switch(n){default:return H();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function _R(n){if(n===void 0)return Ge("GRPC error has no .code"),M.UNKNOWN;switch(n){case et.OK:return M.OK;case et.CANCELLED:return M.CANCELLED;case et.UNKNOWN:return M.UNKNOWN;case et.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case et.INTERNAL:return M.INTERNAL;case et.UNAVAILABLE:return M.UNAVAILABLE;case et.UNAUTHENTICATED:return M.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case et.NOT_FOUND:return M.NOT_FOUND;case et.ALREADY_EXISTS:return M.ALREADY_EXISTS;case et.PERMISSION_DENIED:return M.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case et.ABORTED:return M.ABORTED;case et.OUT_OF_RANGE:return M.OUT_OF_RANGE;case et.UNIMPLEMENTED:return M.UNIMPLEMENTED;case et.DATA_LOSS:return M.DATA_LOSS;default:return H()}}(ge=et||(et={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var XS=null;function IR(){return new TextEncoder}var vB=new si([4294967295,4294967295],0);function eA(n){let e=IR().encode(n),t=new Sv;return t.update(e),new Uint8Array(t.digest())}function tA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new si([t,r],0),new si([i,o],0)]}var fw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lo(`Invalid padding: ${t}`);if(r<0)throw new lo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new lo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=si.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(si.fromNumber(r)));return i.compare(vB)===1&&(i=new si([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=eA(e),[r,i]=tA(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=eA(e),[r,i]=tA(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},lo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var oc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,sc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(X.min(),i,new ke(re),qt(),se())}},sc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var $s=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Yh=class{constructor(e,t){this.targetId=e,this.me=t}},Zh=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Jh=class{constructor(){this.fe=0,this.ge=rA(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:H()}}),new sc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=rA()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},pw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=qt(),this.qe=nA(),this.Qe=new ke(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Wh(o))if(r===0){let s=new $(o.path);this.Ue(t,s,rt.newNoDocument(s,X.min()))}else Q(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}XS?.et(function(d,f,g,y,D){var C,b,F,U,P,G;let Z={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},K=f.unchangedNames;return K&&(Z.bloomFilter={applied:D===0,hashCount:(C=K?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(U=(F=(b=K?.bits)===null||b===void 0?void 0:b.bitmap)===null||F===void 0?void 0:F.length)!==null&&U!==void 0?U:0,padding:(G=(P=K?.bits)===null||P===void 0?void 0:P.padding)!==null&&G!==void 0?G:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),Z}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=gi(r).toUint8Array()}catch(u){if(u instanceof zh)return Dn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new fw(s,i,o)}catch(u){return Dn(u instanceof lo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Wh(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,rt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=se();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new oc(e,t,this.Qe,this.ke,r);return this.ke=qt(),this.qe=nA(),this.Qe=new ke(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Jh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Re(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Jh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function nA(){return new ke($.comparator)}function rA(){return new ke($.comparator)}var wB={asc:"ASCENDING",desc:"DESCENDING"},_B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IB={and:"AND",or:"OR"},gw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function mw(n,e){return n.useProto3Json||yc(e)?e:{value:e}}function Qs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ER(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EB(n,e){return Qs(n,e.toTimestamp())}function Ke(n){return Q(!!n),X.fromTimestamp(function(t){let r=Er(t);return new Ve(r.seconds,r.nanos)}(n))}function G_(n,e){return yw(n,e).canonicalString()}function yw(n,e){let t=function(i){return new me(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function DR(n){let e=me.fromString(n);return Q(PR(e)),e}function ac(n,e){return G_(n.databaseId,e.path)}function Bn(n,e){let t=DR(e);if(t.get(1)!==n.databaseId.projectId)throw new k(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(bR(t))}function TR(n,e){return G_(n.databaseId,e)}function CR(n){let e=DR(n);return e.length===4?me.emptyPath():bR(e)}function vw(n){return new me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bR(n){return Q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function iA(n,e,t){return{name:ac(n,e),fields:t.value.mapValue.fields}}function SR(n,e,t){let r=Bn(n,e.name),i=Ke(e.updateTime),o=e.createTime?Ke(e.createTime):X.min(),s=new Tt({mapValue:{fields:e.fields}}),a=rt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function DB(n,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=Bn(r,i.found.name),s=Ke(i.found.updateTime),a=i.found.createTime?Ke(i.found.createTime):X.min(),u=new Tt({mapValue:{fields:i.found.fields}});return rt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=Bn(r,i.missing),s=Ke(i.readTime);return rt.newNoDocument(o,s)}(n,e):H()}function TB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(Q(d===void 0||typeof d=="string"),Qe.fromBase64String(d||"")):(Q(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Qe.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?M.UNKNOWN:_R(l.code);return new k(d,l.message||"")}(s);t=new Zh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Bn(n,r.document.name),o=Ke(r.document.updateTime),s=r.document.createTime?Ke(r.document.createTime):X.min(),a=new Tt({mapValue:{fields:r.document.fields}}),u=rt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new $s(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Bn(n,r.document),o=r.readTime?Ke(r.readTime):X.min(),s=rt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new $s([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Bn(n,r.document),o=r.removedTargetIds||[];t=new $s([],o,i,null)}else{if(!("filter"in e))return H();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new hw(i,o),a=r.targetId;t=new Yh(a,s)}}return t}function uc(n,e){let t;if(e instanceof _i)t={update:iA(n,e.key,e.value)};else if(e instanceof Ii)t={delete:ac(n,e.key)};else if(e instanceof Cn)t={update:iA(n,e.key,e.data),updateMask:xB(e.fieldMask)};else{if(!(e instanceof nc))return H();t={verify:ac(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof vi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Tr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw H()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:EB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H()}(n,e.precondition)),t}function ww(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?qe.updateTime(Ke(o.updateTime)):o.exists!==void 0?qe.exists(o.exists):qe.none()}(e.currentDocument):qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),u=new vi;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new Dr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new Tr(d)}else"increment"in a?u=new wi(s,a.increment):H();let l=We.fromServerFormat(a.fieldPath);return new yo(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Bn(n,e.update.name),o=new Tt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Jt(l.map(d=>We.fromServerFormat(d)))}(e.updateMask);return new Cn(i,o,s,t,r)}return new _i(i,o,t,r)}if(e.delete){let i=Bn(n,e.delete);return new Ii(i,t)}if(e.verify){let i=Bn(n,e.verify);return new nc(i,t)}return H()}function CB(n,e){return n&&n.length>0?(Q(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ke(i.updateTime):Ke(o);return s.isEqual(X.min())&&(s=Ke(o)),new lw(s,i.transformResults||[])}(t,e))):[]}function AR(n,e){return{documents:[TR(n,e.path)]}}function RR(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=TR(n,i);let o=function(l){if(l.length!==0)return NR(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Fs(g.field),direction:SB(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=mw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function xR(n){let e=CR(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Q(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=MR(f);return g instanceof Te&&$_(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(D){return new go(Ls(D.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,yc(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new zn(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new zn(y,g)}(t.endAt)),iR(e,i,s,o,a,"F",u,l)}function bB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ls(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ls(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ls(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ls(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(Ls(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>MR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(t.compositeFilter.op))}(n):H()}function SB(n){return wB[n]}function AB(n){return _B[n]}function RB(n){return IB[n]}function Fs(n){return{fieldPath:n.canonicalString()}}function Ls(n){return We.fromServerFormat(n.fieldPath)}function NR(n){return n instanceof fe?function(t){if(t.op==="=="){if(BS(t.value))return{unaryFilter:{field:Fs(t.field),op:"IS_NAN"}};if(US(t.value))return{unaryFilter:{field:Fs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BS(t.value))return{unaryFilter:{field:Fs(t.field),op:"IS_NOT_NAN"}};if(US(t.value))return{unaryFilter:{field:Fs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(t.field),op:AB(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>NR(i));return r.length===1?r[0]:{compositeFilter:{op:RB(t.op),filters:r}}}(n):H()}function xB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ys=class n{constructor(e,t,r,i,o=X.min(),s=X.min(),a=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xh=class{constructor(e){this.ct=e}};function MB(n,e){let t;if(e.document)t=SR(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=wo(e.noDocument.readTime);t=rt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{let r=$.fromSegments(e.unknownDocument.path),i=wo(e.unknownDocument.version);t=rt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ve(i[0],i[1]);return X.fromTimestamp(o)}(e.readTime)),t}function oA(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ef(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:ac(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Qs(o,s.version.toTimestamp()),createTime:Qs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:vo(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:t.path.toArray(),version:vo(e.version)}}return r}function ef(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wo(n){let e=new Ve(n.seconds,n.nanoseconds);return X.fromTimestamp(e)}function ao(n,e){let t=(e.baseMutations||[]).map(o=>ww(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>ww(n.ct,o)),i=Ve.fromMillis(e.localWriteTimeMs);return new rc(e.batchId,i,t,r)}function zu(n){let e=wo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?wo(n.lastLimboFreeSnapshotVersion):X.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Q(o.documents.length===1),Vt(aa(CR(o.documents[0])))}(n.query):function(o){return Vt(xR(o))}(n.query),new Ys(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qe.fromBase64String(n.resumeToken))}function kR(n,e){let t=vo(e.snapshotVersion),r=vo(e.lastLimboFreeSnapshotVersion),i;i=Wh(e.target)?AR(n.ct,e.target):RR(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function W_(n){let e=xR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Qh(e,e.limit,"L"):e}function Pv(n,e){return new ic(e.largestBatchId,ww(n.ct,e.overlayMutation))}function sA(n,e){let t=e.path.lastSegment();return[n,Lt(e.path.popLast()),t]}function aA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:vo(r.readTime),documentKey:Lt(r.documentKey.path),largestBatchId:r.largestBatchId}}var _w=class{getBundleMetadata(e,t){return uA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:wo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return uA(e).put(function(i){return{bundleId:i.id,createTime:vo(Ke(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return cA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:W_(o.bundledQuery),readTime:wo(o.readTime)}}(r)})}saveNamedQuery(e,t){return cA(e).put(function(i){return{name:i.name,readTime:vo(Ke(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function uA(n){return at(n,"bundles")}function cA(n){return at(n,"namedQueries")}var tf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return ju(e).get(sA(this.userId,t)).next(r=>r?Pv(this.serializer,r):null)}getOverlays(e,t){let r=jn();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new ic(t,s);i.push(this.ht(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Lt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ju(e).j("collectionPathOverlayIndex",a))}),R.waitFor(o)}getOverlaysForCollection(e,t,r){let i=jn(),o=Lt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ju(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Pv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=jn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ju(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=Pv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return ju(e).put(function(i,o,s){let[a,u,l]=sA(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:uc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function ju(n){return at(n,"documentOverlays")}var Iw=class{Pt(e){return at(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var _r=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Zu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Er(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(gi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?YA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Lf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):H()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Fe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};_r.vt=new _r;function NB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function lA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=NB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Ew=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=lA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=lA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Dw=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Tw=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},uo=class{constructor(){this.jt=new Ew,this.Ht=new Dw(this.jt),this.Jt=new Tw(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var co=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ai(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=dA(n.arrayValue,e.arrayValue),t!==0?t:(t=dA(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function dA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var nf=class{constructor(e){this.Xt=new Re((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Hv(e);if(t!==void 0&&!this.sn(t))return!1;let r=oo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Re(We.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Us(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Us(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Us(r.field,r.dir==="asc"?0:1)));return new zs(zs.UNKNOWN_ID,this.collectionId,t,Yu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function OR(n){var e,t;if(Q(n instanceof fe||n instanceof Te),n instanceof fe){if(n instanceof Gh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>OR(i));return Te.create(r,n.op)}function PB(n){if(n.getFilters().length===0)return[];let e=Sw(OR(n));return Q(FR(e)),Cw(e)||bw(e)?[e]:e.getFilters()}function Cw(n){return n instanceof fe}function bw(n){return n instanceof Te&&$_(n)}function FR(n){return Cw(n)||bw(n)||function(t){if(t instanceof Te&&Xv(t)){for(let r of t.getFilters())if(!Cw(r)&&!bw(r))return!1;return!0}return!1}(n)}function Sw(n){if(Q(n instanceof fe||n instanceof Te),n instanceof fe)return n;if(n.filters.length===1)return Sw(n.filters[0]);let e=n.filters.map(r=>Sw(r)),t=Te.create(e,n.op);return t=rf(t),FR(t)?t:(Q(t instanceof Te),Q(Gs(t)),Q(t.filters.length>1),t.filters.reduce((r,i)=>K_(r,i)))}function K_(n,e){let t;return Q(n instanceof fe||n instanceof Te),Q(e instanceof fe||e instanceof Te),t=n instanceof fe?e instanceof fe?function(i,o){return Te.create([i,o],"and")}(n,e):hA(n,e):e instanceof fe?hA(e,n):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),Gs(i)&&Gs(o))return tR(i,o.getFilters());let s=Xv(i)?i:o,a=Xv(i)?o:i,u=s.filters.map(l=>K_(l,a));return Te.create(u,"or")}(n,e),rf(t)}function hA(n,e){if(Gs(e))return tR(e,n.getFilters());{let t=e.filters.map(r=>K_(n,r));return Te.create(t,"or")}}function rf(n){if(Q(n instanceof fe||n instanceof Te),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return rf(e[0]);if(XA(n))return n;let t=e.map(i=>rf(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var Aw=class{constructor(){this.un=new cc}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(ln.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(ln.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},cc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Re(me.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(me.comparator)).toArray()}};var Rh=new Uint8Array(0),Rw=class{constructor(e,t){this.databaseId=t,this.cn=new cc,this.ln=new Hn(r=>mo(r),(r,i)=>vc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Lt(i)};return fA(e).put(o)}return R.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[VA(t),""],!1,!0);return fA(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Vn(s.parent))}return r})}addFieldIndex(e,t){let r=Uu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Ns(e);return o.next(a=>{s.put(aA(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Uu(e),i=Ns(e),o=Ms(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Uu(e),r=Ms(e),i=Ns(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return R.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new nf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Ms(e),i=!0,o=new Map;return R.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=se(),a=[];return R.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`}(u)} to execute ${mo(t)}`);let d=function(P,G){let Z=Hv(G);if(Z===void 0)return null;for(let K of Kh(P,Z.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(l,u),f=function(P,G){let Z=new Map;for(let K of oo(G))for(let I of Kh(P,K.fieldPath))switch(I.op){case"==":case"in":Z.set(K.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Z.set(K.fieldPath.canonicalString(),I.value),Array.from(Z.values())}return null}(l,u),g=function(P,G){let Z=[],K=!0;for(let I of oo(G)){let v=I.kind===0?GS(P,I.fieldPath,P.startAt):WS(P,I.fieldPath,P.startAt);Z.push(v.value),K&&(K=v.inclusive)}return new zn(Z,K)}(l,u),y=function(P,G){let Z=[],K=!0;for(let I of oo(G)){let v=I.kind===0?WS(P,I.fieldPath,P.endAt):GS(P,I.fieldPath,P.endAt);Z.push(v.value),K&&(K=v.inclusive)}return new zn(Z,K)}(l,u),D=this.In(u,l,g),C=this.In(u,l,y),b=this.Tn(u,l,f),F=this.En(u.indexId,d,D,g.inclusive,C,y.inclusive,b);return R.forEach(F,U=>r.G(U,t.limit).next(P=>{P.forEach(G=>{let Z=$.fromSegments(G.documentKey);s.has(Z)||(s=s.add(Z),a.push(Z))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=PB(Te.create(e.filters,"and")).map(r=>uw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),d=[];for(let f=0;f<u;++f){let g=t?this.dn(t[f/l]):Rh,y=this.An(e,g,r[f%l],i),D=this.Rn(e,g,o[f%l],s),C=a.map(b=>this.An(e,g,b,!0));d.push(...this.createRange(y,D,C))}return d}An(e,t,r,i){let o=new co(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new co(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new nf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return R.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Re(We.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new uo;for(let i of oo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);_r.vt.It(o,s)}return r.zt()}dn(e){let t=new uo;return _r.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new uo;return _r.vt.It(po(this.databaseId,t),r.Yt(function(o){let s=oo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new uo);let o=0;for(let s of oo(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&tc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);_r.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new uo;u.seed(a.zt()),_r.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Uu(e),i=Ns(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return R.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new Yu(f.sequenceNumber,new ln(wo(f.readTime),new $(Vn(f.documentKey)),f.largestBatchId)):Yu.empty(),y=d.fields.map(([D,C])=>new Us(We.fromServerFormat(D),C));return new zs(d.indexId,d.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Uu(e),o=Ns(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>R.forEach(a,u=>o.put(aA(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return R.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?R.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,u=>this.wn(e,i,u).next(l=>{let d=this.Sn(o,u);return l.isEqual(d)?R.resolve():this.bn(e,o,u,l,d)}))))})}Dn(e,t,r,i){return Ms(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ms(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Ms(e),o=new Re(ai);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new co(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Re(ai),i=this.Vn(t,e);if(i==null)return r;let o=Hv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(tc(s))for(let a of s.arrayValue.values||[])r=r.add(new co(t.indexId,e.key,this.dn(a),i))}else r=r.add(new co(t.indexId,e.key,Rh,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,d,f,g){let y=u.getIterator(),D=l.getIterator(),C=xs(y),b=xs(D);for(;C||b;){let F=!1,U=!1;if(C&&b){let P=d(C,b);P<0?U=!0:P>0&&(F=!0)}else C!=null?U=!0:F=!0;F?(f(b),b=xs(D)):U?(g(C),C=xs(y)):(C=xs(y),b=xs(D))}}(i,o,ai,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),R.waitFor(s)}yn(e){let t=1;return Ns(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ai(s,a)).filter((s,a,u)=>!a||ai(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ai(s,e),u=ai(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Rh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Rh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return ai(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pA)}getMinOffset(e,t){return R.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||H())).next(pA)}};function fA(n){return at(n,"collectionParents")}function Ms(n){return at(n,"indexEntries")}function Uu(n){return at(n,"indexConfiguration")}function Ns(n){return at(n,"indexState")}function pA(n){Q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;V_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ln(e.readTime,e.documentKey,t)}var gA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function LR(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{Q(a===1)}));let l=[];for(let d of t.mutations){let f=zA(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return R.waitFor(o).next(()=>l)}function of(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw H();e=n.noDocument}return JSON.stringify(e).length}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(41943040,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);var sf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Vs(e),s=ui(e);return s.add({}).next(a=>{Q(typeof a=="number");let u=new rc(a,t,r,i),l=function(y,D,C){let b=C.baseMutations.map(U=>uc(y.ct,U)),F=C.mutations.map(U=>uc(y.ct,U));return{userId:D,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:b,mutations:F}}(this.serializer,this.userId,u),d=[],f=new Re((g,y)=>re(g.canonicalString(),y.canonicalString()));for(let g of i){let y=zA(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,jU))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),R.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return ui(e).get(t).next(r=>r?(Q(r.userId===this.userId),ao(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?R.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ui(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=ao(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ui(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).U("userMutationsIndex",t).next(r=>r.map(i=>ao(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Ph(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Vs(e).J({range:i},(s,a,u)=>{let[l,d,f]=s,g=Vn(d);if(l===this.userId&&t.path.isEqual(g))return ui(e).get(f).next(y=>{if(!y)throw H();Q(y.userId===this.userId),o.push(ao(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(re),i=[];return t.forEach(o=>{let s=Ph(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Vs(e).J({range:a},(l,d,f)=>{let[g,y,D]=l,C=Vn(y);g===this.userId&&o.path.isEqual(C)?r=r.add(D):f.done()});i.push(u)}),R.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Ph(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Re(re);return Vs(e).J({range:s},(u,l,d)=>{let[f,g,y]=u,D=Vn(g);f===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(ui(e).get(o).next(s=>{if(s===null)throw H();Q(s.userId===this.userId),r.push(ao(this.serializer,s))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return LR(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return R.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Vs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Vn(o[1]);i.push(u)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,t){return VR(e,this.userId,t)}Nn(e){return jR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function VR(n,e,t){let r=Ph(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Vs(n).J({range:o,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function ui(n){return at(n,"mutations")}function Vs(n){return at(n,"documentMutations")}function jR(n){return at(n,"mutationQueues")}var Zs=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var xw=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Zs(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>X.fromTimestamp(new Ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ps(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ps(e).J((s,a)=>{let u=zu(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>R.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ps(e).J((r,i)=>{let o=zu(i);t(o)})}qn(e){return mA(e).get("targetGlobalKey").next(t=>(Q(t!==null),t))}Qn(e,t){return mA(e).put("targetGlobalKey",t)}Kn(e,t){return Ps(e).put(kR(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=mo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ps(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=zu(a);vc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=ci(e);return t.forEach(s=>{let a=Lt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),R.waitFor(i)}removeMatchingKeys(e,t,r){let i=ci(e);return R.forEach(t,o=>{let s=Lt(o.path);return R.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=ci(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ci(e),o=se();return i.J({range:r,H:!0},(s,a,u)=>{let l=Vn(s[1]),d=new $(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=Lt(t.path),i=IDBKeyRange.bound([r],[VA(r)],!1,!0),o=0;return ci(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Ps(e).get(t).next(r=>r?zu(r):null)}};function Ps(n){return at(n,"targets")}function mA(n){return at(n,"targetGlobal")}function ci(n){return at(n,"targetDocuments")}function yA([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var Mw=class{constructor(e){this.Un=e,this.buffer=new Re(yA),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();yA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Nw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ti(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Di(t)}yield this.Hn(3e5)}))}},Pw=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return R.resolve(Zt.oe);let r=new Mw(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(gA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gA):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),ks()<=An.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function kB(n,e){return new Pw(n,e)}var kw=class{constructor(e,t){this.db=e,this.garbageCollector=kB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return xh(e,r)}removeReference(e,t,r){return xh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xh(e,t)}nr(e,t){return function(i,o){let s=!1;return jR(i).Y(a=>VR(i,a,o).next(u=>(u&&(s=!0),R.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,X.min()),ci(e).delete(function(f){return[0,Lt(f.path)]}(s))))});i.push(u)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xh(e,t)}tr(e,t){let r=ci(e),i,o=Zt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Zt.oe&&t(new $(Vn(i)),o),o=l,i=u):o=Zt.oe}).next(()=>{o!==Zt.oe&&t(new $(Vn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function xh(n,e){return ci(n).put(function(r,i){return{targetId:0,path:Lt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var af=class{constructor(){this.changes=new Hn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ow=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return io(e).put(r)}removeEntry(e,t,r){return io(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ef(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=rt.newInvalidDocument(t);return io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:rt.newInvalidDocument(t)};return io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bu(t))},(i,o)=>{r={document:this.ir(t,o),size:of(o)}}).next(()=>r)}getEntries(e,t){let r=qt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=qt(),i=new ke($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,of(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return R.resolve();let i=new Re(_A);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Bu(i.first()),Bu(i.last())),s=i.getIterator(),a=s.getNext();return io(e).J({index:"documentKeyIndex",range:o},(u,l,d)=>{let f=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&_A(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(Bu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),ef(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return io(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=qt();for(let f of l){let g=this.ir($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(_c(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=qt(),s=wA(t,r),a=wA(t,ln.max());return io(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new Fw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vA(e).get("remoteDocumentGlobalKey").next(t=>(Q(!!t),t))}rr(e,t){return vA(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=MB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(X.min())))return r}return rt.newInvalidDocument(e)}};function UR(n){return new Ow(n)}var Fw=class extends af{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Hn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Re((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=oA(this.cr.serializer,s);i=i.add(o.path.popLast());let l=of(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=oA(this.cr.serializer,s.convertToNoDocument(X.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),R.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function vA(n){return at(n,"remoteDocumentGlobal")}function io(n){return at(n,"remoteDocumentsV14")}function Bu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wA(n,e){let t=e.documentKey.path.toArray();return[n,ef(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _A(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var Lw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var uf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Wu(r.mutation,i,Jt.empty(),Ve.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=jn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=qu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=jn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=qt(),s=Gu(),a=function(){return Gu()}();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Cn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Wu(d.mutation,l,d.mutation.getFieldMask(),Ve.now())):s.set(l.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new Lw(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Gu(),i=new ke((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||Jt.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=lR();d.forEach(g=>{if(!o.has(g)){let y=yR(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return R.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):q_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):R.resolve(jn()),a=-1,u=o;return s.next(l=>R.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(d=>({batchId:a,changes:cR(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=qu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=qu();return this.indexManager.getCollectionParents(e,o).next(a=>R.forEach(a,u=>{let l=function(f,g){return new Tn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,rt.newInvalidDocument(d)))});let a=qu();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&Wu(d.mutation,l,Jt.empty(),Ve.now()),_c(t,l)&&(a=a.insert(u,l))}),a})}};var Vw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ke(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:W_(i.bundledQuery),readTime:Ke(i.readTime)}}(t)),R.resolve()}};var jw=class{constructor(){this.overlays=new ke($.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=jn();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=jn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ke((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=jn(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=jn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return R.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ic(t,r));let o=this.Ir.get(t);o===void 0&&(o=se(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Uw=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var lc=class{constructor(){this.Tr=new Re(tt.Er),this.dr=new Re(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new tt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new tt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new me([])),r=new tt(t,e),i=new tt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new me([])),r=new tt(t,e),i=new tt(t,e+1),o=se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new tt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Bw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Re(tt.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new rc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new tt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(re);return t.forEach(i=>{let o=new tt(i,0),s=new tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new tt(new $(o),0),a=new Re(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),R.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let o=new tt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new tt(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var $w=class{constructor(e){this.Mr=e,this.docs=function(){return new ke($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(t))}getEntries(e,t){let r=qt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():rt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=qt(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||V_(UA(d),r)<=0||(i.has(d.key)||_c(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,t,r,i){H()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qw(this)}getSize(e){return R.resolve(this.size)}},qw=class extends af{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var zw=class{constructor(e){this.persistence=e,this.Nr=new Hn(t=>mo(t),vc),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lc,this.targetCount=0,this.kr=Zs.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Zs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var cf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Zt(0),this.Kr=!1,this.Kr=!0,this.$r=new Uw,this.referenceDelegate=e(this),this.Ur=new zw(this),this.indexManager=new Aw,this.remoteDocumentCache=function(i){return new $w(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Xh(t),this.Gr=new Vw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Bw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new Hw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Hw=class extends Bh{constructor(e){super(),this.currentSequenceNumber=e}},lf=class n{constructor(e){this.persistence=e,this.Jr=new lc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Gw=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new $h("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FS,{unique:!0}),u.createObjectStore("documentMutations")}(e),IA(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=R.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),IA(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FS,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return R.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:ZU});l.createIndex("collectionPathOverlayIndex",JU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",XU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:UU});l.createIndex("documentKeyIndex",BU),l.createIndex("collectionGroupIndex",$U)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:WU}).createIndex("sequenceNumberIndex",KU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:QU}).createIndex("documentKeyIndex",YU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=of(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>R.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>R.forEach(a,u=>{Q(u.userId===o.userId);let l=ao(this.serializer,u);return LR(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new me(s),l=function(f){return[0,Lt(f)]}(u);o.push(t.get(l).next(d=>d?R.resolve():(f=>t.put({targetId:0,path:Lt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>R.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:GU});let r=t.store("collectionParents"),i=new cc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Lt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new me(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let d=Vn(a);return o(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=zu(i),s=kR(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new $(me.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):H()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>R.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=UR(this.serializer),o=new cf(lf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:se();ao(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),R.forEach(a,(u,l)=>{let d=new nt(l),f=tf.lt(this.serializer,d),g=o.getIndexManager(d),y=sf.lt(d,this.serializer,g,o.referenceDelegate);return new uf(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Ju(t,Zt.oe),u).next()})})}};function IA(n){n.createObjectStore("targetDocuments",{keyPath:zU}).createIndex("documentTargetsIndex",HU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qU,{unique:!0}),n.createObjectStore("targetGlobal")}var kv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ww=class n{constructor(e,t,r,i,o,s,a,u,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new k(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kw(this,i),this.Ai=t+"main",this.serializer=new Xh(u),this.Ri=new pi(this.Ai,this.hi,new Gw(this.serializer)),this.$r=new Iw,this.Ur=new xw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=UR(this.serializer),this.Gr=new _w,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(M.FAILED_PRECONDITION,kv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Zt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ti(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return $u(e).get("owner").next(t=>R.resolve(this.vi(t)))}Ci(e){return Mh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=at(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return R.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):$u(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(M.FAILED_PRECONDITION,kv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Ju(e,Zt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Mh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return sf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return tf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?nB:u===16?tB:u===15?U_:u===14?WA:u===13?GA:u===12?eB:u===11?HA:void H()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Ju(a,this.Qr?this.Qr.next():Zt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(M.FAILED_PRECONDITION,BA);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return $u(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(M.FAILED_PRECONDITION,kv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $u(e).put("owner",t)}static D(){return pi.D()}bi(e){let t=$u(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):R.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Cp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function $u(n){return at(n,"owner")}function Mh(n){return at(n,"clientMetadata")}function Q_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Kw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Qw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var df=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Cp()?8:$A(Oa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Qw;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ks()<=An.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Os(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(ks()<=An.DEBUG&&O("QueryEngine","Query:",Os(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ks()<=An.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Os(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vt(t))):R.resolve())}Yi(e,t){if(KS(t))return R.resolve(null);let r=Vt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Qh(t,null,"F"),r=Vt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Qh(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return KS(t)||i.isEqual(X.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?R.resolve(null):(ks()<=An.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Os(t)),this.rs(e,s,t,jA(i,-1)).next(a=>a))})}ts(e,t){let r=new Re(aR(e));return t.forEach((i,o)=>{_c(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ks()<=An.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Os(t)),this.Ji.getDocumentsMatchingQuery(e,t,ln.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Yw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ke(re),this._s=new Hn(o=>mo(o),vc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function BR(n,e,t,r){return new Yw(n,e,t,r)}function $R(n,e){return N(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=se();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function OB(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),y=R.resolve();return g.forEach(D=>{y=y.next(()=>d.getEntry(u,D)).next(C=>{let b=l.docVersions.get(D);Q(b!==null),C.version.compareTo(b)<0&&(f.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),d.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function qR(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function FB(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Qe.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(C,b,F){return C.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(o,y))});let u=qt(),l=se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(zR(o,s,e.documentUpdates).next(d=>{u=d.Ps,l=d.Is})),!r.isEqual(X.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return R.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function zR(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=qt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function LB(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Js(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,R.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Ys(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Xs(n,e,t){return N(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ti(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function hf(n,e,t){let r=B(n),i=X.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=B(u),g=f._s.get(d);return g!==void 0?R.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,Vt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:X.min(),t?o:se())).next(a=>(WR(r,sR(e),a),{documents:a,Ts:o})))}function HR(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function GR(n,e){let t=B(n),r=t.us.get(e)||X.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,jA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(WR(t,e,i),i))}function WR(n,e,t){let r=n.us.get(e)||X.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function VB(n,e,t,r){return N(this,null,function*(){let i=B(n),o=se(),s=qt();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Js(i,function(d){return Vt(aa(me.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>zR(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function jB(r,i){return N(this,arguments,function*(n,e,t=se()){let o=yield Js(n,Vt(W_(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ke(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Qe.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function EA(n,e){return`firestore_clients_${n}_${e}`}function DA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ov(n,e){return`firestore_targets_${n}_${e}`}var ff=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ge("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ku=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},pf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=z_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=qA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Zw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}},dc=class{constructor(){this.activeTargetIds=z_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Qu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ke(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=EA(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new dc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(EA(this.persistenceKey,r));if(i){let o=pf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Ov(this.persistenceKey,e));if(i){let o=Ku.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ov(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Zt.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){Ge("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Zt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new ff(this.currentUser,e,t,r),o=DA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=DA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Ov(this.persistenceKey,e),o=new Ku(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return pf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return ff.Rs(new nt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Ku.Rs(i,t)}Ls(e){return Zw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=z_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},gf=class{constructor(){this.so=new dc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Jw=class{_o(e){}shutdown(){}};var mf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nh=null;function Fv(){return Nh===null?Nh=function(){return 268435456+Math.round(2147483648*Math.random())}():Nh++,"0x"+Nh.toString(16)}var UB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Xw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Dt="WebChannelConnection",e_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Fv(),u=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(d=>(O("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Dn("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=UB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Fv();return new Promise((s,a)=>{let u=new Av;u.setWithCredentials(!0),u.listenOnce(Rv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vu.NO_ERROR:let d=u.getResponseJson();O(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Vu.TIMEOUT:O(Dt,`RPC '${e}' ${o} timed out`),a(new k(M.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:let f=u.getStatus();if(O(Dt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let D=function(b){let F=b.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(F)>=0?F:M.UNKNOWN}(y.status);a(new k(D,y.message))}else a(new k(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(M.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{O(Dt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(Dt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Fv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Nv(),a=Mv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=o.join("");O(Dt,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),g=!1,y=!1,D=new Xw({Io:b=>{y?O(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(g||(O(Dt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),O(Dt,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},To:()=>f.close()}),C=(b,F,U)=>{b.listen(F,P=>{try{U(P)}catch(G){setTimeout(()=>{throw G},0)}})};return C(f,Rs.EventType.OPEN,()=>{y||(O(Dt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),C(f,Rs.EventType.CLOSE,()=>{y||(y=!0,O(Dt,`RPC '${e}' stream ${i} transport closed`),D.So())}),C(f,Rs.EventType.ERROR,b=>{y||(y=!0,Dn(Dt,`RPC '${e}' stream ${i} transport errored:`,b),D.So(new k(M.UNAVAILABLE,"The operation could not be completed")))}),C(f,Rs.EventType.MESSAGE,b=>{var F;if(!y){let U=b.data[0];Q(!!U);let P=U,G=P.error||((F=P[0])===null||F===void 0?void 0:F.error);if(G){O(Dt,`RPC '${e}' stream ${i} received error:`,G);let Z=G.status,K=function(_){let E=et[_];if(E!==void 0)return _R(E)}(Z),I=G.message;K===void 0&&(K=M.INTERNAL,I="Unknown error status: "+Z+" with message "+G.message),y=!0,D.So(new k(K,I)),f.close()}else O(Dt,`RPC '${e}' stream ${i} received:`,U),D.bo(U)}}),C(a,xv.STAT_EVENT,b=>{b.stat===Ah.PROXY?O(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Ah.NOPROXY&&O(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function KR(){return typeof window<"u"?window:null}function Lh(){return typeof document<"u"?document:null}function Ic(n){return new gw(n,!0)}var hc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var yf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Ge(t.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},t_=class extends yf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=TB(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Ke(s.readTime):X.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=vw(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Wh(u)?{documents:AR(o,u)}:{query:RR(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=ER(o,s.resumeToken);let l=mw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=Qs(o,s.snapshotVersion.toTimestamp());let l=mw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=bB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=vw(this.serializer),t.removeTarget=e,this.a_(t)}},n_=class extends yf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=CB(e.writeResults,e.commitTime),r=Ke(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=vw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>uc(this.serializer,r))};this.a_(t)}};var r_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,yw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(M.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,yw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(M.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},i_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ge(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var o_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Ci(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=B(u);l.L_.add(4),yield ua(l),l.q_.set("Unknown"),l.L_.delete(4),yield Ec(l)})}(this))}))}),this.q_=new i_(r,i)}};function Ec(n){return N(this,null,function*(){if(Ci(n))for(let e of n.B_)yield e(!0)})}function ua(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Vf(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),J_(t)?Z_(t):la(t).r_()&&Y_(t,e))}function ea(n,e){let t=B(n),r=la(t);t.N_.delete(e),r.r_()&&QR(t,e),t.N_.size===0&&(r.r_()?r.o_():Ci(t)&&t.q_.set("Unknown"))}function Y_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}la(n).A_(e)}function QR(n,e){n.Q_.xe(e),la(n).R_(e)}function Z_(n){n.Q_=new pw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),la(n).start(),n.q_.v_()}function J_(n){return Ci(n)&&!la(n).n_()&&n.N_.size>0}function Ci(n){return B(n).L_.size===0}function YR(n){n.Q_=void 0}function BB(n){return N(this,null,function*(){n.q_.set("Online")})}function $B(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{Y_(n,e)})})}function qB(n,e){return N(this,null,function*(){YR(n),J_(n)?(n.q_.M_(e),Z_(n)):n.q_.set("Unknown")})}function zB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof Zh&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vf(n,r)}else if(e instanceof $s?n.Q_.Ke(e):e instanceof Yh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(X.min()))try{let r=yield qR(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(Qe.EMPTY_BYTE_STRING,d.snapshotVersion)),QR(o,u);let f=new Ys(d.target,u,l,d.sequenceNumber);Y_(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield vf(n,r)}})}function vf(n,e,t){return N(this,null,function*(){if(!Ti(e))throw e;n.L_.add(1),yield ua(n),n.q_.set("Offline"),t||(t=()=>qR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ec(n)}))})}function ZR(n,e){return e().catch(t=>vf(n,t,e))}function ca(n){return N(this,null,function*(){let e=B(n),t=Ei(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;HB(e);)try{let i=yield LB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,GB(e,i)}catch(i){yield vf(e,i)}JR(e)&&XR(e)})}function HB(n){return Ci(n)&&n.O_.length<10}function GB(n,e){n.O_.push(e);let t=Ei(n);t.r_()&&t.V_&&t.m_(e.mutations)}function JR(n){return Ci(n)&&!Ei(n).n_()&&n.O_.length>0}function XR(n){Ei(n).start()}function WB(n){return N(this,null,function*(){Ei(n).p_()})}function KB(n){return N(this,null,function*(){let e=Ei(n);for(let t of n.O_)e.m_(t.mutations)})}function QB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=dw.from(r,e,t);yield ZR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ca(n)})}function YB(n,e){return N(this,null,function*(){e&&Ei(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return wR(s)&&s!==M.ABORTED}(i.code)){let o=r.O_.shift();Ei(r).s_(),yield ZR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ca(r)}})}(n,e)),JR(n)&&XR(n)})}function TA(n,e){return N(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=Ci(t);t.L_.add(3),yield ua(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ec(t)})}function s_(n,e){return N(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield Ec(t)):e||(t.L_.add(2),yield ua(t),t.q_.set("Unknown"))})}function la(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new t_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:BB.bind(null,n),Ro:$B.bind(null,n),mo:qB.bind(null,n),d_:zB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),J_(n)?Z_(n):n.q_.set("Unknown")):(yield n.K_.stop(),YR(n))}))),n.K_}function Ei(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new n_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WB.bind(null,n),mo:YB.bind(null,n),f_:KB.bind(null,n),g_:QB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield ca(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var a_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new st,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function da(n,e){if(Ge("AsyncQueue",`${e}: ${n}`),Ti(n))return new k(M.UNAVAILABLE,`${e}: ${n}`);throw n}var wf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=qu(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var _f=class{constructor(){this.W_=new ke($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ta=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,wf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var u_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},c_=class{constructor(){this.queries=CA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=CA(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new k(M.ABORTED,"Firestore shutting down"))}};function CA(){return new Hn(n=>oR(n),wc)}function X_(n,e){return N(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new u_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=da(s,`Initialization of query '${Os(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&tI(t)})}function eI(n,e){return N(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ZB(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&tI(t)}function JB(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function tI(n){n.Y_.forEach(e=>{e.next()})}var l_,bA;(bA=l_||(l_={})).ea="default",bA.Cache="cache";var fc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ta(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==l_.Cache}};var d_=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var If=class{constructor(e){this.serializer=e}Es(e){return Bn(this.serializer,e)}ds(e){return e.metadata.exists?SR(this.serializer,e.document,!1):rt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ke(e)}},h_=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ex(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=me.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new If(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||se()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield VB(this.localStore,new If(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield jB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function ex(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Ef=class{constructor(e){this.key=e}},Df=class{constructor(e){this.key=e}},Tf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=aR(e),this.Ra=new wf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new _f,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=_c(this.query,f)?f:null,D=!!g&&this.mutatedKeys.has(g.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),b=!1;g&&y?g.data.isEqual(y.data)?D!==C&&(r.track({type:3,doc:y}),b=!0):this.ga(g,y)||(r.track({type:2,doc:y}),b=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),b=!0):g&&!y&&(r.track({type:1,doc:g}),b=!0,(u||l)&&(a=!0)),b&&(y?(s=s.add(y),o=C?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,D){let C=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return C(y)-C(D)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new ta(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _f,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Df(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ef(r))}),t}ba(e){this.Ta=e.Ts,this.da=se();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ta.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},f_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},p_=class{constructor(e){this.key=e,this.va=!1}},g_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Hn(a=>oR(a),wc),this.Ma=new Map,this.xa=new Set,this.Oa=new ke($.comparator),this.Na=new Map,this.La=new lc,this.Ba={},this.ka=new Map,this.qa=Zs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function XB(n,e,t=!0){return N(this,null,function*(){let r=jf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield tx(r,e,t,!0),i})}function e$(n,e){return N(this,null,function*(){let t=jf(n);yield tx(t,e,!0,!1)})}function tx(n,e,t,r){return N(this,null,function*(){let i=yield Js(n.localStore,Vt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield nI(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Vf(n.remoteStore,i),a})}function nI(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,g,y)=>function(C,b,F,U){return N(this,null,function*(){let P=b.view.ma(F);P.ns&&(P=yield hf(C.localStore,b.query,!1).then(({documents:I})=>b.view.ma(I,P)));let G=U&&U.targetChanges.get(b.targetId),Z=U&&U.targetMismatches.get(b.targetId)!=null,K=b.view.applyChanges(P,C.isPrimaryClient,G,Z);return m_(C,b.targetId,K.wa),K.snapshot})}(n,f,g,y);let o=yield hf(n.localStore,e,!0),s=new Tf(e,o.Ts),a=s.ma(o.documents),u=sc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);m_(n,t,l.wa);let d=new f_(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function t$(n,e,t){return N(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!wc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Xs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ea(r.remoteStore,i.targetId),na(r,i.targetId)}).catch(Di))):(na(r,i.targetId),yield Xs(r.localStore,i.targetId,!0))})}function n$(n,e){return N(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ea(t.remoteStore,r.targetId))})}function r$(n,e,t){return N(this,null,function*(){let r=sI(n);try{let i=yield function(s,a){let u=B(s),l=Ve.now(),d=a.reduce((y,D)=>y.add(D.key),se()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=qt(),C=se();return u.cs.getEntries(y,d).next(b=>{D=b,D.forEach((F,U)=>{U.isValidDocument()||(C=C.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(b=>{f=b;let F=[];for(let U of a){let P=yB(U,f.get(U.key).overlayedDocument);P!=null&&F.push(new Cn(U.key,P,JA(P.value.mapValue),qe.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(b=>{g=b;let F=b.applyToLocalDocumentSet(f,C);return u.documentOverlayCache.saveOverlays(y,b.batchId,F)})}).then(()=>({batchId:g.batchId,changes:cR(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new ke(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Sr(r,i.changes),yield ca(r.remoteStore)}catch(i){let o=da(i,"Failed to persist write");t.reject(o)}})}function nx(n,e){return N(this,null,function*(){let t=B(n);try{let r=yield FB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield Sr(t,r,e)}catch(r){yield Di(r)}})}function SA(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&tI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i$(n,e,t){return N(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new ke($.comparator);s=s.insert(o,rt.newNoDocument(o,X.min()));let a=se().add(o),u=new oc(X.min(),new Map,new ke(re),s,a);yield nx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),oI(r)}else yield Xs(r.localStore,e,!1).then(()=>na(r,e,t)).catch(Di)})}function o$(n,e){return N(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield OB(t.localStore,e);iI(t,r,null),rI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Sr(t,i)}catch(i){yield Di(i)}})}function s$(n,e,t){return N(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Q(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);iI(r,e,t),rI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Sr(r,i)}catch(i){yield Di(i)}})}function a$(n,e){return N(this,null,function*(){let t=B(n);Ci(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=da(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function rI(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function iI(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function na(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||rx(n,r)})}function rx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ea(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),oI(n))}function m_(n,e,t){for(let r of t)r instanceof Ef?(n.La.addReference(r.key,e),u$(n,r)):r instanceof Df?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||rx(n,r.key)):H()}function u$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),oI(n))}function oI(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(me.fromString(e)),r=n.qa.next();n.Na.set(r,new p_(t)),n.Oa=n.Oa.insert(t,r),Vf(n.remoteStore,new Ys(Vt(aa(t.path)),r,"TargetPurposeLimboResolution",Zt.oe))}}function Sr(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Kw.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let d=B(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(l,g=>R.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>R.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Ti(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),D=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(D);d.os=d.os.insert(g,C)}}})}(r.localStore,o))})}function c$(n,e){return N(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield $R(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new k(M.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Sr(t,r.hs)}})}function l$(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function d$(n,e){return N(this,null,function*(){let t=B(n),r=yield hf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&m_(t,e.targetId,i.wa),i})}function h$(n,e){return N(this,null,function*(){let t=B(n);return GR(t.localStore,e).then(r=>Sr(t,r))})}function f$(n,e,t,r){return N(this,null,function*(){let i=B(n),o=yield function(a,u){let l=B(a),d=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):R.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ca(i.remoteStore):t==="acknowledged"||t==="rejected"?(iI(i,e,r||null),rI(i,e),function(a,u){B(B(a).mutationQueue).On(u)}(i.localStore,e)):H(),yield Sr(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function p$(n,e){return N(this,null,function*(){let t=B(n);if(jf(t),sI(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield AA(t,r.toArray());t.Qa=!0,yield s_(t.remoteStore,!0);for(let o of i)Vf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(na(t,s),Xs(t.localStore,s,!0))),ea(t.remoteStore,s)}),yield i,yield AA(t,r),function(s){let a=B(s);a.Na.forEach((u,l)=>{ea(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new ke($.comparator)}(t),t.Qa=!1,yield s_(t.remoteStore,!1)}})}function AA(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Js(r.localStore,Vt(u[0]));for(let l of u){let d=r.Fa.get(l),f=yield d$(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield HR(r.localStore,s);a=yield Js(r.localStore,l),yield nI(r,ix(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function ix(n){return iR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g$(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function m$(n,e,t,r){return N(this,null,function*(){let i=B(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield GR(i.localStore,sR(o[0])),a=oc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Qe.EMPTY_BYTE_STRING);yield Sr(i,s,a);break}case"rejected":yield Xs(i.localStore,e,!0),na(i,e,r);break;default:H()}})}function y$(n,e,t){return N(this,null,function*(){let r=jf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield HR(r.localStore,i),s=yield Js(r.localStore,o);yield nI(r,ix(o),s.targetId,!1,s.resumeToken),Vf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Xs(r.localStore,i,!1).then(()=>{ea(r.remoteStore,i),na(r,i)}).catch(Di))}})}function jf(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i$.bind(null,e),e.Ca.d_=ZB.bind(null,e.eventManager),e.Ca.$a=JB.bind(null,e.eventManager),e}function sI(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s$.bind(null,e),e}function v$(n,e,t){let r=B(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,D){let C=B(y),b=Ke(D.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",F=>C.Gr.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(b)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(ex(u));let l=new h_(u,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield Sr(o,f.Ia,void 0),yield function(y,D){let C=B(y);return C.persistence.runTransaction("Save bundle","readwrite",b=>C.Gr.saveBundleMetadata(b,D))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return Dn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var y_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Ic(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return BR(this.persistence,new df,t.initialUser,this.serializer)}Ga(t){return new cf(lf.Zr,this.serializer)}Wa(t){return new gf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Cf=class n extends y_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Dp(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield sI(this.Ja.syncEngine),yield ca(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return BR(this.persistence,new df,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Nw(r,e.asyncQueue,t)}Ha(e,t){let r=new Qv(t,this.persistence);return new Kv(e.asyncQueue,r)}Ga(e){let t=Q_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Ww(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,KR(),Lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new gf}},v_=class n extends Cf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Dp(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Qu&&(this.sharedClientState.syncEngine={no:f$.bind(null,t),ro:m$.bind(null,t),io:y$.bind(null,t),Qi:g$.bind(null,t),eo:h$.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield p$(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=KR();if(!Qu.D(t))throw new k(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Q_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},aI=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=c$.bind(null,this.syncEngine),yield s_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new c_}()}createDatastore(t){let r=Ic(t.databaseInfo.databaseId),i=function(s){return new e_(s)}(t.databaseInfo);return function(s,a,u,l){return new r_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new o_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>SA(this.syncEngine,r,0),function(){return mf.D()?new mf:new Jw}())}createSyncEngine(t,r){return function(o,s,a,u,l,d,f){let g=new g_(o,s,a,u,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=B(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ua(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function RA(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ra=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var w_=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new st,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new d_(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var __=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=B(i),a={documents:o.map(f=>ac(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,me.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=DB(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());Q(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ii(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new nc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=B(r),s={writes:i.map(a=>uc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,me.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw H();t=X.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(X.min())?qe.exists(!1):qe.updateTime(t):qe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(X.min()))throw new k(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qe.updateTime(t)}return qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var I_=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new hc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new __(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!yc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!wR(t)}return!1}};var E_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=nt.UNAUTHENTICATED,this.clientId=jh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new st;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=da(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Lv(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield $R(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function xA(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield uI(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>TA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>TA(e.remoteStore,i)),n._onlineComponents=e})}function uI(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Lv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Dn("Error using user provided cache. Falling back to memory cache: "+t),yield Lv(n,new y_)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Lv(n,new y_);return n._offlineComponents})}function Uf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield xA(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield xA(n,new aI))),n._onlineComponents})}function ox(n){return uI(n).then(e=>e.persistence)}function cI(n){return uI(n).then(e=>e.localStore)}function sx(n){return Uf(n).then(e=>e.remoteStore)}function lI(n){return Uf(n).then(e=>e.syncEngine)}function w$(n){return Uf(n).then(e=>e.datastore)}function ia(n){return N(this,null,function*(){let e=yield Uf(n),t=e.eventManager;return t.onListen=XB.bind(null,e.syncEngine),t.onUnlisten=t$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=e$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=n$.bind(null,e.syncEngine),t})}function _$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield ox(n),t=yield sx(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),Ec(o)}(t)}))}function I$(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield ox(n),t=yield sx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=B(i);o.L_.add(0),yield ua(o),o.q_.set("Offline")})}(t)}))}function E$(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,d){let f=B(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=da(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield cI(n),e,t)})),t.promise}function ax(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new ra({next:g=>{d.Za(),s.enqueueAndForget(()=>eI(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new k(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new fc(aa(a.path),d,{includeMetadataChanges:!0,_a:!0});return X_(o,f)}(yield ia(n),n.asyncQueue,e,t,r)})),r.promise}function D$(n,e){let t=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield hf(i,o,!0),u=new Tf(o,a.Ts),l=u.ma(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=da(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield cI(n),e,t)})),t.promise}function ux(n,e,t={}){let r=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new ra({next:g=>{d.Za(),s.enqueueAndForget(()=>eI(o,f)),g.fromCache&&u.source==="server"?l.reject(new k(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new fc(a,d,{includeMetadataChanges:!0,_a:!0});return X_(o,f)}(yield ia(n),n.asyncQueue,e,t,r)})),r.promise}function T$(n,e){let t=new ra(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield ia(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield ia(n),t)}))}}function C$(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?IR().encode(s):s,function(d,f){return new w_(d,f)}(function(d,f){if(d instanceof Uint8Array)return RA(d,f);if(d instanceof ArrayBuffer)return RA(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Ic(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){v$(yield lI(n),i,r)}))}function b$(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield cI(n),e)}))}function cx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var MA=new Map;function dI(n,e,t){if(!t)throw new k(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hI(n,e,t,r){if(e===!0&&r===!0)throw new k(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NA(n){if(!$.isDocumentKey(n))throw new k(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PA(n){if($.isDocumentKey(n))throw new k(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H()}function we(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Bf(n);throw new k(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lx(n,e){if(e<=0)throw new k(M.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var bf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_o=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Vv;switch(r.type){case"firstParty":return new $v(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=MA.get(t);r&&(O("ComponentProvider","Removing Datastore"),MA.delete(t),r.terminate())}(this),Promise.resolve()}};function dx(n,e,t,r={}){var i;let o=(n=we(n,_o))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Dn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=nt.MOCK_USER;else{a=jE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nt(l)}n._authCredentials=new jv(new Vh(a,u))}}var ht=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},$n=class n extends ht{constructor(e,t,r){super(e,t,aa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function fI(n,e,...t){if(n=Le(n),dI("collection","path",e),n instanceof _o){let r=me.fromString(e,...t);return PA(r),new $n(n,null,r)}{if(!(n instanceof Me||n instanceof $n))throw new k(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return PA(r),new $n(n.firestore,null,r)}}function hx(n,e){if(n=we(n,_o),dI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ht(n,null,function(r){return new Tn(me.emptyPath(),r)}(e))}function Dc(n,e,...t){if(n=Le(n),arguments.length===1&&(e=jh.newId()),dI("doc","path",e),n instanceof _o){let r=me.fromString(e,...t);return NA(r),new Me(n,null,new $(r))}{if(!(n instanceof Me||n instanceof $n))throw new k(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return NA(r),new Me(n.firestore,n instanceof $n?n.converter:null,new $(r))}}function pI(n,e){return n=Le(n),e=Le(e),(n instanceof Me||n instanceof $n)&&(e instanceof Me||e instanceof $n)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gI(n,e){return n=Le(n),e=Le(e),n instanceof ht&&e instanceof ht&&n.firestore===e.firestore&&wc(n._query,e._query)&&n.converter===e.converter}var Sf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hc(this,"async_queue_retry"),this.Vu=()=>{let r=Lh();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new st;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ti(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=a_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&H()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function D_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var T_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new st,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var fx=-1,je=class extends _o{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Sf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Sf(e),this._firestoreClient=void 0,yield e}})}};function ft(n){if(n._terminated)throw new k(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||px(n),n._firestoreClient}function px(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,d){return new Yv(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,cx(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new E_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function gx(n,e){Dn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return yx(n,aI.provider,{build:r=>new Cf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function mx(n){return N(this,null,function*(){Dn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();yx(n,aI.provider,{build:t=>new v_(t,e.cacheSizeBytes)})})}function yx(n,e,t){if((n=we(n,je))._firestoreClient||n._terminated)throw new k(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(M.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},px(n)}function vx(n){if(n._initialized&&!n._terminated)throw new k(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new st;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!pi.D())return Promise.resolve();let i=r+"main";yield pi.delete(i)})}(Q_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function wx(n){return function(t){let r=new st;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return a$(yield lI(t),r)})),r.promise}(ft(n=we(n,je)))}function _x(n){return _$(ft(n=we(n,je)))}function Ix(n){return I$(ft(n=we(n,je)))}function Ex(n,e){let t=ft(n=we(n,je)),r=new T_;return C$(t,n._databaseId,e,r),r}function Dx(n,e){return b$(ft(n=we(n,je)),e).then(t=>t?new ht(n,null,t.query):null)}var Gn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new k(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var bn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Cr=class{constructor(e){this._methodName=e}};var Io=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var pc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var S$=/^__.*__$/,C_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Cn(e,this.data,this.fieldMask,t,this.fieldTransforms):new _i(e,this.data,t,this.fieldTransforms)}},Af=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Tx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var Rf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Tx(this.Cu)&&S$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},b_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ic(e)}Qu(e,t,r,i=!1){return new Rf({Cu:e,methodName:t,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Co(n){let e=n._freezeSettings(),t=Ic(n._databaseId);return new b_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $f(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);vI("Data must be an object, but it was:",s,r);let a=Sx(r,s),u,l;if(o.merge)u=new Jt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=M_(e,f,t);if(!s.contains(g))throw new k(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Rx(d,g)||d.push(g)}u=new Jt(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new C_(new Tt(a),u,l)}var gc=class n extends Cr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Cx(n,e,t){return new Rf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var S_=class n extends Cr{_toFieldTransform(e){return new yo(e.path,new vi)}isEqual(e){return e instanceof n}},A_=class n extends Cr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Cx(this,e,!0),r=this.Ku.map(o=>bo(o,t)),i=new Dr(r);return new yo(e.path,i)}isEqual(e){return e instanceof n&&bp(this.Ku,e.Ku)}},R_=class n extends Cr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Cx(this,e,!0),r=this.Ku.map(o=>bo(o,t)),i=new Tr(r);return new yo(e.path,i)}isEqual(e){return e instanceof n&&bp(this.Ku,e.Ku)}},x_=class n extends Cr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new wi(e.serializer,hR(e.serializer,this.$u));return new yo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function mI(n,e,t,r){let i=n.Qu(1,e,t);vI("Data must be an object, but it was:",i,r);let o=[],s=Tt.empty();To(r,(u,l)=>{let d=wI(e,u,t);l=Le(l);let f=i.Nu(d);if(l instanceof gc)o.push(d);else{let g=bo(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Jt(o);return new Af(s,a,i.fieldTransforms)}function yI(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[M_(e,r,t)],u=[i];if(o.length%2!=0)throw new k(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(M_(e,o[g])),u.push(o[g+1]);let l=[],d=Tt.empty();for(let g=a.length-1;g>=0;--g)if(!Rx(l,a[g])){let y=a[g],D=u[g];D=Le(D);let C=s.Nu(y);if(D instanceof gc)l.push(y);else{let b=bo(D,C);b!=null&&(l.push(y),d.set(y,b))}}let f=new Jt(l);return new Af(d,f,s.fieldTransforms)}function bx(n,e,t,r=!1){return bo(t,n.Qu(r?4:3,e))}function bo(n,e){if(Ax(n=Le(n)))return vI("Unsupported field value:",e,n),Sx(n,e);if(n instanceof Cr)return function(r,i){if(!Tx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=bo(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ve.fromDate(r);return{timestampValue:Qs(i.serializer,o)}}if(r instanceof Ve){let o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qs(i.serializer,o)}}if(r instanceof Io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gn)return{bytesValue:ER(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:G_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return H_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Bf(r)}`)}(n,e)}function Sx(n,e){let t={};return KA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(n,(r,i)=>{let o=bo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Ax(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof Io||n instanceof Gn||n instanceof Me||n instanceof Cr||n instanceof pc)}function vI(n,e,t){if(!Ax(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Bf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function M_(n,e,t){if((e=Le(e))instanceof bn)return e._internalPath;if(typeof e=="string")return wI(n,e);throw xf("Field path arguments must be of type string or ",n,!1,void 0,t)}var A$=new RegExp("[~\\*/\\[\\]]");function wI(n,e,t){if(e.search(A$)>=0)throw xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bn(...e.split("."))._internalPath}catch{throw xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(M.INVALID_ARGUMENT,a+n+u)}function Rx(n,e){return n.some(t=>t.isEqual(e))}var Eo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new N_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(qf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},N_=class extends Eo{data(){return super.data()}};function qf(n,e){return typeof e=="string"?wI(n,e):e instanceof bn?e._internalPath:e._delegate._internalPath}function xx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mc=class{},Do=class extends mc{};function Ar(n,e,...t){let r=[];e instanceof mc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof P_).length,a=o.filter(u=>u instanceof Mf).length;if(s>1||s>0&&a>0)throw new k(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Mf=class n extends Do{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ux(e._query,t),new ht(e.firestore,e.converter,cw(e._query,t))}_parse(e){let t=Co(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){OA(f,d);let y=[];for(let D of f)y.push(kA(u,o,D));g={arrayValue:{values:y}}}else g=kA(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||OA(f,d),g=bx(a,s,f,d==="in"||d==="not-in");return fe.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Mx(n,e,t){let r=e,i=qf("where",n);return Mf._create(i,r,t)}var P_=class n extends mc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Ux(s,u),s=cw(s,u)}(e._query,t),new ht(e.firestore,e.converter,cw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var k_=class n extends Do{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new go(o,s)}(e._query,this._field,this._direction);return new ht(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Tn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Nx(n,e="asc"){let t=e,r=qf("orderBy",n);return k_._create(r,t)}var Nf=class n extends Do{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ht(e.firestore,e.converter,Qh(e._query,this._limit,this._limitType))}};function Px(n){return lx("limit",n),Nf._create("limit",n,"F")}function kx(n){return lx("limitToLast",n),Nf._create("limitToLast",n,"L")}var Pf=class n extends Do{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=jx(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new Tn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Ox(...n){return Pf._create("startAt",n,!0)}function Fx(...n){return Pf._create("startAfter",n,!1)}var kf=class n extends Do{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=jx(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new Tn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Lx(...n){return kf._create("endBefore",n,!1)}function Vx(...n){return kf._create("endAt",n,!0)}function jx(n,e,t,r){if(t[0]=Le(t[0]),t[0]instanceof Eo)return function(o,s,a,u,l){if(!u)throw new k(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Bs(o))if(f.field.isKeyField())d.push(po(s,u.key));else{let g=u.data.field(f.field);if(Ff(g))throw new k(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new k(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new zn(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Co(n.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(M.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<d.length;D++){let C=d[D];if(g[D].field.isKeyField()){if(typeof C!="string")throw new k(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!q_(s)&&C.indexOf("/")!==-1)throw new k(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);let b=s.path.child(me.fromString(C));if(!$.isDocumentKey(b))throw new k(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);let F=new $(b);y.push(po(a,F))}else{let b=bx(u,l,C);y.push(b)}}return new zn(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function kA(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new k(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!q_(e)&&t.indexOf("/")!==-1)throw new k(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(me.fromString(t));if(!$.isDocumentKey(r))throw new k(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return po(n,new $(r))}if(t instanceof Me)return po(n,t._key);throw new k(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bf(t)}.`)}function OA(n,e){if(!Array.isArray(n)||n.length===0)throw new k(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ux(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var oa=class{convertValue(e,t="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return To(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new pc(o)}convertGeoPoint(e){return new Io(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=B_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){let t=Er(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=me.fromString(e);Q(PR(r));let i=new mi(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ge(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function zf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var O_=class extends oa{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var Ir=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dn=class extends Eo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new hi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(qf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},hi=class extends dn{data(e={}){return super.data(e)}},Sn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ir(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hi(this._firestore,this._userDataWriter,r.key,r,new Ir(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new hi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new hi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:R$(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function R$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function _I(n,e){return n instanceof dn&&e instanceof dn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sn&&e instanceof Sn&&n._firestore===e._firestore&&gI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Bx(n){n=we(n,Me);let e=we(n.firestore,je);return ax(ft(e),n._key).then(t=>TI(e,n,t))}var br=class extends oa{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function $x(n){n=we(n,Me);let e=we(n.firestore,je),t=ft(e),r=new br(e);return E$(t,n._key).then(i=>new dn(e,r,n._key,i,new Ir(i!==null&&i.hasLocalMutations,!0),n.converter))}function qx(n){n=we(n,Me);let e=we(n.firestore,je);return ax(ft(e),n._key,{source:"server"}).then(t=>TI(e,n,t))}function zx(n){n=we(n,ht);let e=we(n.firestore,je),t=ft(e),r=new br(e);return xx(n._query),ux(t,n._query).then(i=>new Sn(e,r,n,i))}function Hx(n){n=we(n,ht);let e=we(n.firestore,je),t=ft(e),r=new br(e);return D$(t,n._query).then(i=>new Sn(e,r,n,i))}function Gx(n){n=we(n,ht);let e=we(n.firestore,je),t=ft(e),r=new br(e);return ux(t,n._query,{source:"server"}).then(i=>new Sn(e,r,n,i))}function II(n,e,t){n=we(n,Me);let r=we(n.firestore,je),i=zf(n.converter,e,t);return ha(r,[$f(Co(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qe.none())])}function EI(n,e,t,...r){n=we(n,Me);let i=we(n.firestore,je),o=Co(i),s;return s=typeof(e=Le(e))=="string"||e instanceof bn?yI(o,"updateDoc",n._key,e,t,r):mI(o,"updateDoc",n._key,e),ha(i,[s.toMutation(n._key,qe.exists(!0))])}function Wx(n){return ha(we(n.firestore,je),[new Ii(n._key,qe.none())])}function Kx(n,e){let t=we(n.firestore,je),r=Dc(n),i=zf(n.converter,e);return ha(t,[$f(Co(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function DI(n,...e){var t,r,i;n=Le(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||D_(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(D_(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(n instanceof Me)l=we(n.firestore,je),d=aa(n._key.path),u={next:f=>{e[s]&&e[s](TI(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=we(n,ht);l=we(f.firestore,je),d=f._query;let g=new br(l);u={next:y=>{e[s]&&e[s](new Sn(l,g,f,y))},error:e[s+1],complete:e[s+2]},xx(n._query)}return function(g,y,D,C){let b=new ra(C),F=new fc(y,b,D);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return X_(yield ia(g),F)})),()=>{b.Za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return eI(yield ia(g),F)}))}}(ft(l),d,a,u)}function Qx(n,e){return T$(ft(n=we(n,je)),D_(e)?e:{next:e})}function ha(n,e){return function(r,i){let o=new st;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return r$(yield lI(r),i,o)})),o.promise}(ft(n),e)}function TI(n,e,t){let r=t.docs.get(e._key),i=new br(n);return new dn(n,i,e._key,r,new Ir(t.hasPendingWrites,t.fromCache),e.converter)}var x$={maxAttempts:5};var Of=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Co(e)}set(e,t,r){this._verifyNotCommitted();let i=li(e,this._firestore),o=zf(i.converter,t,r),s=$f(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=li(e,this._firestore),s;return s=typeof(t=Le(t))=="string"||t instanceof bn?yI(this._dataReader,"WriteBatch.update",o._key,t,r,i):mI(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=li(e,this._firestore);return this._mutations=this._mutations.concat(new Ii(t._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function li(n,e){if((n=Le(n)).firestore!==e)throw new k(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var F_=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Co(t)}get(t){let r=li(t,this._firestore),i=new O_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return H();let s=o[0];if(s.isFoundDocument())return new Eo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Eo(this._firestore,i,r._key,null,r.converter);throw H()})}set(t,r,i){let o=li(t,this._firestore),s=zf(o.converter,r,i),a=$f(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=li(t,this._firestore),a;return a=typeof(r=Le(r))=="string"||r instanceof bn?yI(this._dataReader,"Transaction.update",s._key,r,i,o):mI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=li(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=li(e,this._firestore),r=new br(this._firestore);return super.get(e).then(i=>new dn(this._firestore,r,t._key,i._document,new Ir(!1,!1),t.converter))}};function Yx(n,e,t){n=we(n,je);let r=Object.assign(Object.assign({},x$),t);return function(o){if(o.maxAttempts<1)throw new k(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new st;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield w$(o);new I_(o.asyncQueue,l,a,s,u).au()})),u.promise}(ft(n),i=>e(new F_(n,i)),r)}function Zx(){return new gc("deleteField")}function Jx(){return new S_("serverTimestamp")}function Xx(...n){return new A_("arrayUnion",n)}function eM(...n){return new R_("arrayRemove",n)}function tM(n){return new x_("increment",n)}(function(e,t=!0){(function(i){sa=i})($E),Fa(new xi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new je(new Uv(r.getProvider("auth-internal")),new zv(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mi(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Pr(PS,"4.7.3",e),Pr(PS,"4.7.3","esm2017")})();var M$="@firebase/firestore-compat",N$="0.3.38";function xI(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function nM(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function rM(){if(!QA())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Hf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return rM(),new n(Gn.fromBase64String(e))}static fromUint8Array(e){return nM(),new n(Gn.fromUint8Array(e))}toBase64(){return rM(),this._delegate.toBase64()}toUint8Array(){return nM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function CI(n){return P$(n,["next","error","complete"])}function P$(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var bI=class{enableIndexedDbPersistence(e,t){return gx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return mx(e._delegate)}clearIndexedDbPersistence(e){return vx(e._delegate)}},Gf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof mi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Dn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){dx(this._delegate,e,t,r)}enableNetwork(){return _x(this._delegate)}disableNetwork(){return Ix(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return wx(this._delegate)}onSnapshotsInSync(e){return Qx(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ga(this,fI(this._delegate,e))}catch(t){throw jt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wn(this,Dc(this._delegate,e))}catch(t){throw jt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xo(this,hx(this._delegate,e))}catch(t){throw jt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Yx(this._delegate,t=>e(new Wf(this,t)))}batch(){return ft(this._delegate),new Kf(new Of(this._delegate,e=>ha(this._delegate,e)))}loadBundle(e){return Ex(this._delegate,e)}namedQuery(e){return Dx(this._delegate,e).then(t=>t?new xo(this,t):null)}},fa=class extends oa{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hf(new Gn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Wn.forKey(t,this.firestore,null)}};function k$(n){FA(n)}var Wf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fa(e)}get(e){let t=So(e);return this._delegate.get(t).then(r=>new Ao(this._firestore,new dn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=So(e);return r?(xI("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=So(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=So(e);return this._delegate.delete(t),this}},Kf=class{constructor(e){this._delegate=e}set(e,t,r){let i=So(e);return r?(xI("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=So(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=So(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},pa=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new hi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ro(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new fa(e),t),i.set(t,o)),o}};pa.INSTANCES=new WeakMap;var Wn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fa(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ga(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ga(this.firestore,fI(this._delegate,e))}catch(t){throw jt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Le(e),e instanceof Me?pI(this._delegate,e):!1}set(e,t){t=xI("DocumentReference.set",t);try{return t?II(this._delegate,e,t):II(this._delegate,e)}catch(r){throw jt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?EI(this._delegate,e):EI(this._delegate,e,t,...r)}catch(i){throw jt(i,"updateDoc()","DocumentReference.update()")}}delete(){return Wx(this._delegate)}onSnapshot(...e){let t=iM(e),r=oM(e,i=>new Ao(this.firestore,new dn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return DI(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=$x(this._delegate):e?.source==="server"?t=qx(this._delegate):t=Bx(this._delegate),t.then(r=>new Ao(this.firestore,new dn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(pa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function jt(n,e,t){return n.message=n.message.replace(e,t),n}function iM(n){for(let e of n)if(typeof e=="object"&&!CI(e))return e;return{}}function oM(n,e){var t,r;let i;return CI(n[0])?i=n[0]:CI(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ao=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _I(this._delegate,e._delegate)}},Ro=class extends Ao{data(e){let t=this._delegate.data(e);return this._delegate._converter||LA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},xo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fa(e)}where(e,t,r){try{return new n(this.firestore,Ar(this._delegate,Mx(e,t,r)))}catch(i){throw jt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Ar(this._delegate,Nx(e,t)))}catch(r){throw jt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Ar(this._delegate,Px(e)))}catch(t){throw jt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Ar(this._delegate,kx(e)))}catch(t){throw jt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Ar(this._delegate,Ox(...e)))}catch(t){throw jt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Ar(this._delegate,Fx(...e)))}catch(t){throw jt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Ar(this._delegate,Lx(...e)))}catch(t){throw jt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Ar(this._delegate,Vx(...e)))}catch(t){throw jt(t,"endAt()","Query.endAt()")}}isEqual(e){return gI(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Hx(this._delegate):e?.source==="server"?t=Gx(this._delegate):t=zx(this._delegate),t.then(r=>new Tc(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=iM(e),r=oM(e,i=>new Tc(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return DI(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(pa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},SI=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ro(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Tc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ro(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new SI(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ro(this._firestore,r))})}isEqual(e){return _I(this._delegate,e._delegate)}},ga=class n extends xo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Wn(this.firestore,e):null}doc(e){try{return e===void 0?new Wn(this.firestore,Dc(this._delegate)):new Wn(this.firestore,Dc(this._delegate,e))}catch(t){throw jt(t,"doc()","CollectionReference.doc()")}}add(e){return Kx(this._delegate,e).then(t=>new Wn(this.firestore,t))}isEqual(e){return pI(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(pa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function So(n){return we(n,Me)}var AI=class n{constructor(...e){this._delegate=new bn(...e)}static documentId(){return new n(We.keyField().canonicalString())}isEqual(e){return e=Le(e),e instanceof bn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var RI=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Jx();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Zx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=Xx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=eM(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=tM(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var O$={Firestore:Gf,GeoPoint:Io,Timestamp:Ve,Blob:Hf,Transaction:Wf,WriteBatch:Kf,DocumentReference:Wn,DocumentSnapshot:Ao,Query:xo,QueryDocumentSnapshot:Ro,QuerySnapshot:Tc,CollectionReference:ga,FieldPath:AI,FieldValue:RI,setLogLevel:k$,CACHE_SIZE_UNLIMITED:fx};function F$(n,e){n.INTERNAL.registerComponent(new xi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},O$)))}function L$(n){F$(n,(e,t)=>new Gf(e,t,new bI)),n.registerVersion(M$,N$)}L$(St);function V$(n,e=ki){return new ce(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function sM(n,e){return V$(n,e)}function j$(n,e){return sM(n,e).pipe(Fi(void 0),qa(),ee(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function PI(n,e){return sM(n,e).pipe(ee(t=>({payload:t,type:"query"})))}var Qf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=dM(r,t);return new Zf(i,o,this.afs)}snapshotChanges(){return j$(this.ref,this.afs.schedulers.outsideAngular).pipe($t)}valueChanges(e={}){return this.snapshotChanges().pipe(ee(({payload:t})=>e.idField?Ce(z({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return ve(this.ref.get(e)).pipe($t)}};function Yf(n,e){return PI(n,e).pipe(Fi(void 0),qa(),ee(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function aM(n,e,t){return Yf(n,t).pipe(Oi((r,i)=>U$(r,i.map(o=>o.payload),e),[]),Kp(),ee(r=>r.map(i=>({type:i.type,payload:i}))))}function U$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=B$(n,r))}),n}function MI(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function B$(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return MI(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return MI(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return MI(n,e.oldIndex,1);break}return n}function uM(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Zf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Yf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ee(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Fi(void 0),qa(),ot(([r,i])=>i.length>0||!r),ee(([,r])=>r),$t)}auditTrail(e){return this.stateChanges(e).pipe(Oi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=uM(e);return aM(this.query,t,this.afs.schedulers.outsideAngular).pipe($t)}valueChanges(e={}){return PI(this.query,this.afs.schedulers.outsideAngular).pipe(ee(t=>t.payload.docs.map(r=>e.idField?Ce(z({},r.data()),{[e.idField]:r.id}):r.data())),$t)}get(e){return ve(this.query.get(e)).pipe($t)}add(e){return this.ref.add(e)}doc(e){return new Qf(this.ref.doc(e),this.afs)}},NI=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Yf(this.query,this.afs.schedulers.outsideAngular).pipe($t):Yf(this.query,this.afs.schedulers.outsideAngular).pipe(ee(t=>t.filter(r=>e.indexOf(r.type)>-1)),ot(t=>t.length>0),$t)}auditTrail(e){return this.stateChanges(e).pipe(Oi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=uM(e);return aM(this.query,t,this.afs.schedulers.outsideAngular).pipe($t)}valueChanges(e={}){return PI(this.query,this.afs.schedulers.outsideAngular).pipe(ee(r=>r.payload.docs.map(i=>e.idField?z({[e.idField]:i.id},i.data()):i.data())),$t)}get(e){return ve(this.query.get(e)).pipe($t)}},cM=new q("angularfire2.enableFirestorePersistence"),lM=new q("angularfire2.firestore.persistenceSettings"),$$=new q("angularfire2.firestore.settings"),q$=new q("angularfire2.firestore.use-emulator");function dM(n,e=t=>t){return{query:e(n),ref:n}}var z$=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,d,f,g,y,D,C,b,F,U){this.schedulers=u;let P=Fu(t,a,r),G=d;f&&Cv(P,a,g,D,C,b,y,F),[this.firestore,this.persistenceEnabled$]=Ch(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let Z=a.runOutsideAngular(()=>P.firestore());if(o&&Z.settings(o),G&&Z.useEmulator(...G),i&&!Jr(s)){let K=()=>{try{return ve(Z.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),J(!1)}};return[Z,a.runOutsideAngular(K)]}else return[Z,J(!1)]},[o,G,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=dM(i,r),a=this.schedulers.ngZone.run(()=>o);return new Zf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new NI(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Qf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(V(Ss),V(As,8),V(cM,8),V($$,8),V(It),V(he),V(Dh),V(lM,8),V(q$,8),V(bv,8),V(wv,8),V(_v,8),V(Iv,8),V(Ev,8),V(Dv,8),V(Tv,8),V(no,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),SW=(()=>{class n{constructor(){St.registerVersion("angularfire",ro.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:cM,useValue:!0},{provide:lM,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ot({type:n});static \u0275inj=kt({providers:[z$]})}return n})();export{ce as a,$e as b,ve as c,J as d,ee as e,vN as f,wN as g,tr as h,Lr as i,Oe as j,Y as k,pT as l,W as m,kt as n,q as o,V as p,RT as q,Ot as r,Qi as s,tu as t,q3 as u,z3 as v,Dm as w,vt as x,he as y,lr as z,It as A,Pk as B,H3 as C,G3 as D,ze as E,iu as F,Y3 as G,V1 as H,Z1 as I,Qm as J,hF as K,fF as L,_b as M,Ib as N,Ym as O,SF as P,AF as Q,Z3 as R,Zm as S,J3 as T,X3 as U,LF as V,VF as W,e8 as X,t8 as Y,BF as Z,Db as _,$F as $,qF as aa,zF as ba,n8 as ca,HF as da,r8 as ea,i8 as fa,o8 as ga,s8 as ha,a8 as ia,u8 as ja,su as ka,au as la,uu as ma,c8 as na,EL as oa,Zi as pa,N8 as qa,P8 as ra,k8 as sa,O8 as ta,F8 as ua,t0 as va,Y8 as wa,y6 as xa,v6 as ya,Ln as za,to as Aa,Tj as Ba,ri as Ca,L6 as Da,V6 as Ea,ro as Fa,no as Ga,Dh as Ha,Q6 as Ia,$t as Ja,Ss as Ka,As as La,Fu as Ma,i5 as Na,Ch as Oa,bv as Pa,$5 as Qa,Ve as Ra,z$ as Sa,SW as Ta};
