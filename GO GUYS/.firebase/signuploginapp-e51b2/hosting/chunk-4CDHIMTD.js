import{b as xe,c as X,d as Oe,f as ve}from"./chunk-4WP7XK4S.js";import"./chunk-MWZA336I.js";import"./chunk-4QDLAN45.js";import{a as v,c as w,d as he,e as _e,f as D,g as ye,j as P,k as I,l as T,m as Ce,o as Se,p as Ee,r as K,s as be}from"./chunk-2YXRKEKG.js";import{$ as z,B as re,D as l,E,Ea as R,I as S,K as y,M as e,N as t,O as N,P as le,Q as se,R as B,Ra as Me,S as C,Sa as F,T as M,U as de,V as me,W as ce,X as ne,Y as i,Z as f,_ as q,aa as pe,ba as c,ca as p,da as g,e as oe,fa as ge,ga as Y,i as ae,ia as J,m as j,n as Q,p as H,q as b,qa as fe,r as U,ra as x,sa as O,u,ua as G,v as h,va as ue}from"./chunk-IP4MSLQ3.js";import{a as A,b as W,d as te}from"./chunk-U3NIYLHF.js";var Be=(r,_)=>({success:r,failed:_});function Re(r,_){if(r&1&&(e(0,"tr")(1,"td"),i(2),Y(3,"date"),t(),e(4,"td"),i(5),t(),e(6,"td"),i(7),t(),e(8,"td"),i(9),t(),e(10,"td",18),i(11),t()()),r&2){let n=_.$implicit;l(2),f(J(3,6,n.timestamp==null?null:n.timestamp.toDate(),"yyyy-MM-dd HH:mm:ss")),l(3),f(n.email),l(2),f(n.action),l(2),f(n.details),l(),y("ngClass",ge(9,Be,n.status==="Successful",n.status==="Failed")),l(),q(" ",n.status," ")}}function Ve(r,_){r&1&&(e(0,"tr")(1,"td",19),i(2,"No logs found."),t()())}var we=(()=>{class r{constructor(n){this.auditLogService=n,this.logs=[],this.filteredLogs=[],this.searchQuery="",this.actionFilter="",this.fromDate="",this.toDate=""}ngOnInit(){this.fetchLogs()}fetchLogs(){this.auditLogService.getAuditLogs().subscribe(n=>{this.logs=n,this.filteredLogs=[...this.logs]})}filterLogs(){let n=this.searchQuery.toLowerCase().trim(),a=this.actionFilter.trim().toLowerCase(),o=this.fromDate?new Date(this.fromDate).setHours(0,0,0,0):null,d=this.toDate?new Date(this.toDate).setHours(23,59,59,999):null;this.filteredLogs=this.logs.filter(s=>{let m=s.email.toLowerCase().includes(n),Le=a?s.action.toLowerCase().includes(a):!0,V=s.timestamp?.toDate(),k=!0;return o&&d?k=V>=new Date(o)&&V<=new Date(d):o?k=V>=new Date(o):d&&(k=V<=new Date(d)),m&&Le&&k})}static{this.\u0275fac=function(a){return new(a||r)(E(K))}}static{this.\u0275cmp=b({type:r,selectors:[["app-audit-logs"]],decls:45,vars:6,consts:[[1,"content"],[1,"search-container"],["type","text","placeholder","Search by Email...",1,"search-box",3,"ngModelChange","input","ngModel"],[1,"search-box",3,"ngModelChange","change","ngModel"],["value",""],["value","Onboard"],["value","Update"],["value","Offboard"],["value","Missing"],["value","onboard_employee_failed"],[1,"date-filter"],["for","fromDate"],["id","fromDate","type","date",1,"date-search",3,"ngModelChange","change","ngModel"],["for","toDate"],["id","toDate","type","date",1,"date-search",3,"ngModelChange","change","ngModel"],[1,"table-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],["colspan","5",1,"no-data"]],template:function(a,o){a&1&&(e(0,"div",0)(1,"h1"),i(2,"Audit Logs Report"),t(),e(3,"div",1)(4,"input",2),g("ngModelChange",function(s){return p(o.searchQuery,s)||(o.searchQuery=s),s}),C("input",function(){return o.filterLogs()}),t(),e(5,"select",3),g("ngModelChange",function(s){return p(o.actionFilter,s)||(o.actionFilter=s),s}),C("change",function(){return o.filterLogs()}),e(6,"option",4),i(7,"All Action"),t(),e(8,"option",5),i(9,"Onboard"),t(),e(10,"option",6),i(11,"Update"),t(),e(12,"option",7),i(13,"Offboard"),t(),e(14,"option",8),i(15,"Missing Documents"),t(),e(16,"option",9),i(17,"Onboard Failed"),t()(),e(18,"div",10)(19,"label",11)(20,"strong"),i(21,"From:"),t()(),e(22,"input",12),g("ngModelChange",function(s){return p(o.fromDate,s)||(o.fromDate=s),s}),C("change",function(){return o.filterLogs()}),t()(),e(23,"div",10)(24,"label",13)(25,"strong"),i(26,"To:"),t()(),e(27,"input",14),g("ngModelChange",function(s){return p(o.toDate,s)||(o.toDate=s),s}),C("change",function(){return o.filterLogs()}),t()()(),e(28,"div",15)(29,"table")(30,"thead")(31,"tr")(32,"th"),i(33,"Timestamp"),t(),e(34,"th"),i(35,"Email"),t(),e(36,"th"),i(37,"Action"),t(),e(38,"th"),i(39,"Details"),t(),e(40,"th"),i(41,"Status"),t()()(),e(42,"tbody"),S(43,Re,12,12,"tr",16)(44,Ve,3,0,"tr",17),t()()()()),a&2&&(l(4),c("ngModel",o.searchQuery),l(),c("ngModel",o.actionFilter),l(17),c("ngModel",o.fromDate),l(5),c("ngModel",o.toDate),l(16),y("ngForOf",o.filteredLogs),l(),y("ngIf",o.filteredLogs.length===0))},dependencies:[fe,x,O,I,T,v,P,w,D,G],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#f9f9f9}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100%;width:250px;background:linear-gradient(to bottom,#800020,#cca43b);color:#fff;padding:20px 10px;box-shadow:2px 0 6px #0003;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-bottom:20px;font-size:1.5em}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-decoration:none;padding:10px;border-radius:4px;margin:5px 0;transition:background .3s,transform .3s}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#ffffff4d;transform:scale(1.05)}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after{content:"\\25bc";float:right;margin-right:10px}.dropdown-content[_ngcontent-%COMP%]{display:none;background-color:#fff3;margin-left:10px;padding-left:20px}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.9em;padding:5px}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.content[_ngcontent-%COMP%]{margin-left:260px;padding:20px;background-color:#fff;min-height:100vh}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px;font-size:2em}.table-container[_ngcontent-%COMP%]{overflow-x:auto;box-shadow:0 2px 4px #0000001a}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#800020;color:#fff;font-size:1em}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.hamburger[_ngcontent-%COMP%]{display:none;position:fixed;top:10px;left:10px;background-color:#ff5722;color:#fff;border:none;padding:10px;cursor:pointer;z-index:1000}.hamburger[_ngcontent-%COMP%]:focus{outline:none}.logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;border-radius:50%;box-shadow:0 4px 8px #0003}.none[_ngcontent-%COMP%]{cursor:none}.success[_ngcontent-%COMP%]{color:green;font-weight:700}.failed[_ngcontent-%COMP%]{color:red;font-weight:700}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:15px}.search-box[_ngcontent-%COMP%], .filter-dropdown[_ngcontent-%COMP%]{padding:8px;width:300px;border:1px solid #ddd;border-radius:4px;background-color:#fff;font-size:16px}.search-box[_ngcontent-%COMP%], .date-search[_ngcontent-%COMP%]{padding:8px;width:220px;border:1px solid #ddd;border-radius:4px}.date-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.date-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.search-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:220px}']})}}return r})();var ee=(()=>{class r{constructor(n){this.firestore=n}getEmployees(){return this.firestore.collection("employees").valueChanges()}removeEmployee(n){return this.firestore.collection("employees").doc(n).delete()}static{this.\u0275fac=function(a){return new(a||r)(H(F))}}static{this.\u0275prov=j({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function ke(r,_){r&1&&(e(0,"div",7)(1,"div",8)(2,"span",9),i(3,"Loading..."),t()()())}function je(r,_){if(r&1){let n=B();e(0,"tr")(1,"td")(2,"strong"),i(3),t()(),e(4,"td")(5,"button",12),C("click",function(){let o=u(n).$implicit,d=M(2);return h(d.openModal(o))}),i(6,"Evaluate"),t()()()}if(r&2){let n=_.$implicit;l(3),z("",n.firstname," ",n.lastname,"")}}function Qe(r,_){if(r&1&&(e(0,"table",10)(1,"thead")(2,"tr")(3,"th"),i(4,"Name"),t(),e(5,"th"),i(6,"Action"),t()()(),e(7,"tbody"),S(8,je,7,2,"tr",11),t()()),r&2){let n=M();l(8),y("ngForOf",n.filteredEmployees)}}function He(r,_){if(r&1&&(e(0,"tr")(1,"td"),i(2),Y(3,"date"),t(),e(4,"td"),i(5),t()()),r&2){let n=_.$implicit;l(2),f(J(3,2,n.date,"medium")),l(3),f(n.totalPoints)}}function Ue(r,_){if(r&1&&(e(0,"div",27)(1,"h5"),i(2,"Previous Evaluations"),t(),e(3,"div",28)(4,"table",29)(5,"thead")(6,"tr")(7,"th"),i(8,"Date"),t(),e(9,"th"),i(10,"Total Points"),t()()(),e(11,"tbody"),S(12,He,6,5,"tr",11),t()()()()),r&2){let n=M(2);l(12),y("ngForOf",n.evaluationHistory)}}function qe(r,_){if(r&1&&(e(0,"tr")(1,"td",37)(2,"h6",38),i(3),t()()()),r&2){let n=M().$implicit;l(3),f(n.category)}}function ze(r,_){if(r&1){let n=B();le(0),S(1,qe,4,1,"tr",30),e(2,"tr")(3,"td"),i(4),t(),e(5,"td")(6,"select",31),C("change",function(o){let d=u(n).$implicit,s=M(2);return h(s.onRatingChange(d,o))}),g("ngModelChange",function(o){let d=u(n).$implicit;return p(d.rating,o)||(d.rating=o),h(o)}),e(7,"option",32),i(8,"0 - Not Applicable"),t(),e(9,"option",33),i(10,"4 - Very Satisfied"),t(),e(11,"option",34),i(12,"3 - Satisfied"),t(),e(13,"option",35),i(14,"2 - Dissatisfied"),t(),e(15,"option",36),i(16,"1 - Very Dissatisfied"),t()()(),e(17,"td"),i(18),t()(),se()}if(r&2){let n=_.$implicit,a=_.index,o=M(2);l(),y("ngIf",a===0||n.category!==o.evaluationCriteria[a-1].category),l(3),f(n.description),l(2),c("ngModel",n.rating),l(12),f(n.points)}}function Ye(r,_){r&1&&N(0,"span",39)}function Je(r,_){if(r&1){let n=B();e(0,"div",13)(1,"div",14)(2,"div",15)(3,"h1",7),i(4,"Employee Performance Evaluation"),t(),e(5,"span",16),C("click",function(){u(n);let o=M();return h(o.closeModal())}),i(6,"\xD7"),t()(),e(7,"div",17)(8,"div",18)(9,"div",19)(10,"label"),i(11,"Name: "),e(12,"span"),i(13),t()()(),S(14,Ue,13,1,"div",20),e(15,"div",21)(16,"p",22),i(17,"Evaluation Rating"),t(),e(18,"table",10)(19,"thead")(20,"tr")(21,"th"),i(22,"Description"),t(),e(23,"th"),i(24,"Rating Type"),t(),e(25,"th"),i(26,"Points"),t()()(),e(27,"tbody"),S(28,ze,19,4,"ng-container",11),e(29,"tr")(30,"td",23)(31,"strong"),i(32,"Total Points:"),t()(),e(33,"td")(34,"strong"),i(35),t()()()()()(),e(36,"div",24)(37,"button",25),C("click",function(){u(n);let o=M();return h(o.submitEvaluation())}),S(38,Ye,1,0,"span",26),i(39),t()()()()()()}if(r&2){let n=M();l(13),f(n.selectedEmployee.name),l(),y("ngIf",n.evaluationHistory.length>0),l(14),y("ngForOf",n.evaluationCriteria),l(7),f(n.calculateTotalPoints()),l(2),y("disabled",n.loading),l(),y("ngIf",n.loading),l(),q(" ",n.loading?"Saving...":"Done"," ")}}var Pe=(()=>{class r{constructor(n,a){this.onboardingReportService=n,this.evaluationService=a,this.employees=[],this.filteredEmployees=[],this.selectedEmployee=null,this.evaluationHistory=[],this.evaluatedEmployees=new Set,this.loading=!1,this.searchQuery="",this.evaluationCriteria=[{description:"Possesses necessary credentials and certifications",category:"QUALIFICATIONS & COMPETENCE",rating:0,points:0},{description:"Demonstrates subject expertise",category:"QUALIFICATIONS & COMPETENCE",rating:0,points:0},{description:"Aligns lesson plans with the curriculum",category:"QUALIFICATIONS & COMPETENCE",rating:0,points:0},{description:"Integrates technology into teaching",category:"QUALIFICATIONS & COMPETENCE",rating:0,points:0},{description:"Participates in professional development",category:"QUALIFICATIONS & COMPETENCE",rating:0,points:0},{description:"Engages students effectively",category:"TEACHING EFFECTIVENESS",rating:0,points:0},{description:"Maintains structured classroom management",category:"TEACHING EFFECTIVENESS",rating:0,points:0},{description:"Adapts methods to diverse learning needs",category:"TEACHING EFFECTIVENESS",rating:0,points:0},{description:"Uses appropriate assessments and feedback",category:"TEACHING EFFECTIVENESS",rating:0,points:0},{description:"Handles discipline fairly and professionally",category:"TEACHING EFFECTIVENESS",rating:0,points:0},{description:"Communicates effectively with all stakeholders",category:"COMMUNICATION & COLLABORATION",rating:0,points:0},{description:"Builds strong interpersonal relationships",category:"COMMUNICATION & COLLABORATION",rating:0,points:0},{description:"Provides constructive feedback to students",category:"COMMUNICATION & COLLABORATION",rating:0,points:0},{description:"Participates actively in school activities",category:"COMMUNICATION & COLLABORATION",rating:0,points:0},{description:"Resolves conflicts professionally",category:"COMMUNICATION & COLLABORATION",rating:0,points:0},{description:"Meets deadlines and responsibilities",category:"WORK ETHICS & PROFESSIONALISM",rating:0,points:0},{description:"Maintains reliability and punctuality",category:"WORK ETHICS & PROFESSIONALISM",rating:0,points:0},{description:"Follows ethical practices and policies",category:"WORK ETHICS & PROFESSIONALISM",rating:0,points:0},{description:"Responds well to constructive criticism",category:"WORK ETHICS & PROFESSIONALISM",rating:0,points:0},{description:"Recommended for continued employment or promotion",category:"WORK ETHICS & PROFESSIONALISM",rating:0,points:0}]}ngOnInit(){this.onboardingReportService.getEmployees().subscribe(n=>{this.employees=n,this.filteredEmployees=[...this.employees]}),this.loadEvaluatedEmployees()}filterEmployees(){let n=this.searchQuery?.toLowerCase().trim()||"";this.filteredEmployees=this.employees.filter(a=>a.lastname?.toLowerCase().startsWith(n))}openModal(n){if(!n?.id){alert("Employee ID is missing. Please try again.");return}this.selectedEmployee=W(A({},n),{name:`${n.firstname} ${n.lastname}`}),this.loadEvaluationHistory(n.id)}closeModal(){this.selectedEmployee=null,this.resetForm()}loadEvaluationHistory(n){n&&(this.loading=!0,this.evaluationService.getEvaluations(n).subscribe(a=>{this.evaluationHistory=a.map(o=>W(A({},o),{date:o.date instanceof Me?o.date.toDate():new Date(o.date)})),this.loading=!1},()=>this.loading=!1))}onRatingChange(n,a){let o=+a.target.value;n.rating=o,n.points=o}validateForm(){return this.evaluationCriteria.every(n=>n.rating>0)}submitEvaluation(){if(!this.selectedEmployee?.id)return;if(this.evaluatedEmployees.has(this.selectedEmployee.id)){alert("You have already evaluated this employee.");return}if(!this.validateForm()){alert("Please answer all evaluation questions before submitting.");return}let n={employeeId:this.selectedEmployee.id,employeeName:`${this.selectedEmployee.firstname} ${this.selectedEmployee.lastname}`,criteria:this.evaluationCriteria.map(a=>({description:a.description,rating:a.rating,points:a.points,category:a.category})),totalPoints:this.calculateTotalPoints(),date:new Date};this.loading=!0,this.evaluationService.saveEvaluation(n).then(()=>{alert("Evaluation saved successfully!"),this.evaluatedEmployees.add(this.selectedEmployee.id),this.closeModal()}).catch(()=>alert("Failed to save evaluation.")).finally(()=>this.loading=!1)}calculateTotalPoints(){return this.evaluationCriteria.reduce((n,a)=>n+a.points,0)}resetForm(){this.evaluationCriteria.forEach(n=>{n.rating=0,n.points=0})}loadEvaluatedEmployees(){this.evaluationService.getUserEvaluatedEmployees().subscribe(n=>{this.evaluatedEmployees=new Set(n)})}static{this.\u0275fac=function(a){return new(a||r)(E(ee),E(X))}}static{this.\u0275cmp=b({type:r,selectors:[["app-evaluation"]],decls:8,vars:4,consts:[[1,"content"],[1,"m-3"],[1,"search-container","mb-3"],["type","text","placeholder","Search employees...",1,"form-control",3,"ngModelChange","input","ngModel"],["class","text-center",4,"ngIf"],["class","table-container",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"table-container"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-dark",3,"click"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"modal-details"],[1,"info-group"],["class","mb-4",4,"ngIf"],[1,""],[1,"text-danger"],["colspan","2",1,"text-end"],[1,"modal-footer"],[1,"button",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"mb-4"],[1,"table-responsive"],[1,"table","table-sm"],[4,"ngIf"],[1,"form-select",3,"change","ngModelChange","ngModel"],["value","0"],["value","4"],["value","3"],["value","2"],["value","1"],["colspan","3"],[1,"ms-3","my-1"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(a,o){a&1&&(e(0,"div",0)(1,"h1",1),i(2,"Evaluation"),t(),e(3,"div",2)(4,"input",3),g("ngModelChange",function(s){return p(o.searchQuery,s)||(o.searchQuery=s),s}),C("input",function(){return o.filterEmployees()}),t()(),S(5,ke,4,0,"div",4)(6,Qe,9,1,"table",5)(7,Je,40,7,"div",6),t()),a&2&&(l(4),c("ngModel",o.searchQuery),l(),y("ngIf",o.loading),l(),y("ngIf",!o.loading),l(),y("ngIf",o.selectedEmployee))},dependencies:[x,O,I,T,v,P,w,D,G],styles:[".content[_ngcontent-%COMP%]{margin-left:260px;padding:20px}.search-container[_ngcontent-%COMP%]{max-width:300px;margin:0 auto 20px}.table-container[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px;background-color:#fff;box-shadow:0 2px 4px #0000001a}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px;text-align:left;border:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:maroon;color:#fff;font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;width:90%;max-width:800px;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.close-btn[_ngcontent-%COMP%]{font-size:24px;color:#dc3545;cursor:pointer;padding:5px}.modal-body[_ngcontent-%COMP%]{margin-bottom:20px}.info-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px}.button[_ngcontent-%COMP%]{background-color:maroon;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.button[_ngcontent-%COMP%]:hover{background-color:#4d0000}.button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.spinner-border[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.2em}"]})}}return r})();var Ie=(()=>{class r{constructor(n){this.firestore=n}getEmployees(){return this.firestore.collection("offboarding").snapshotChanges().pipe(oe(n=>n.map(a=>{let o=a.payload.doc.data(),d=a.payload.doc.id;return A({id:d},o)})))}static{this.\u0275fac=function(a){return new(a||r)(H(F))}}static{this.\u0275prov=j({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Ke(r,_){if(r&1&&(e(0,"tr")(1,"td")(2,"strong"),i(3),t()(),e(4,"td")(5,"strong"),i(6),t()(),e(7,"td")(8,"strong"),i(9),t()(),e(10,"td")(11,"strong"),i(12),t()(),e(13,"td")(14,"strong"),i(15),t()(),e(16,"td")(17,"strong"),i(18),t()(),e(19,"td")(20,"strong"),i(21),t()(),e(22,"td")(23,"strong"),i(24),t()(),e(25,"td")(26,"strong"),i(27),t()(),e(28,"td")(29,"strong"),i(30),t()()()),r&2){let n=_.$implicit;l(3),f(n.employeeId||"N/A"),l(3),z("",n.firstname," ",n.middleName,""),l(3),f(n.department||"N/A"),l(3),f(n.offboardingReason||"N/A"),l(3),f(n.effectiveDate||"N/A"),l(3),f(n.exitInterview||"N/A"),l(3),f(n.clearanceStatus||"N/A"),l(3),f(n.certificationStatus||"N/A"),l(3),f(n.recommendation||"N/A"),l(3),f(n.recommendationComment||"N/A")}}function Xe(r,_){r&1&&(e(0,"tr")(1,"td",21),i(2,"No employees found."),t()())}var Te=(()=>{class r{constructor(n){this.offboardingReportService=n,this.searchQuery="",this.selectedDepartment="",this.fromDate="",this.toDate="",this.employees=[],this.filteredEmployees=[]}ngOnInit(){this.fetchOffboardingEmployees()}fetchOffboardingEmployees(){this.offboardingReportService.getEmployees().subscribe(n=>{console.log("\u{1F50D} Raw Firestore Data:",n),this.employees=n.filter(a=>a.status==="Offboarded").map(a=>W(A({},a),{firstname:a.employeeName?.split(" ")[0]||"Unknown",middleName:a.employeeName?.split(" ")[1]||"",lastname:a.employeeName?.split(" ")[2]||a.employeeName?.split(" ")[1]||"",fullName:a.employeeName||"Unknown",department:a.department||"N/A",offboardingReason:a.offboardingReason||"N/A",effectiveDate:a.effectiveDate||""})),console.log("\u2705 Processed Employees:",this.employees),this.filteredEmployees=[...this.employees]},n=>{console.error("\u274C Error fetching offboarding records:",n)})}searchEmployee(){let n=this.searchQuery.toLowerCase().trim();this.filteredEmployees=this.employees.filter(a=>{let o=a.lastname?.toLowerCase().startsWith(n),d=a.employeeId?.toString().includes(n);return o||d}),console.log("\u{1F50D} Filtered Employees:",this.filteredEmployees)}filterByDepartment(){this.filteredEmployees=this.selectedDepartment?this.employees.filter(n=>n.department===this.selectedDepartment):[...this.employees],console.log("\u{1F3DB}\uFE0F Filtered by Department:",this.filteredEmployees)}filterByDate(){if(!this.fromDate||!this.toDate){this.filteredEmployees=[...this.employees];return}let n=new Date(this.fromDate),a=new Date(this.toDate);a.setHours(23,59,59,999),this.filteredEmployees=this.employees.filter(o=>{let d=new Date(o.effectiveDate);return d>=n&&d<=a}),console.log("\u{1F4C5} Filtered by Date Range:",this.filteredEmployees)}static{this.\u0275fac=function(a){return new(a||r)(E(Ie))}}static{this.\u0275cmp=b({type:r,selectors:[["app-offboarding-report"]],decls:59,vars:6,consts:[[1,"content"],[1,"search-container"],["type","text","placeholder","Search by Last Name or Employee ID",1,"search-box",3,"ngModelChange","input","ngModel"],["for","departmentDropdown"],["id","departmentDropdown",1,"department-dropdown",3,"ngModelChange","change","ngModel"],["value",""],["value","SOC"],["value","SBA"],["value","SEA"],["value","SAS"],["value","SHTM"],["value","SED"],["value","SNAMS"],["value","CCJEF"],["for","fromDate"],["type","date","id","fromDate",1,"date-search",3,"ngModelChange","change","ngModel"],["for","toDate"],["type","date","id","toDate",1,"date-search",3,"ngModelChange","change","ngModel"],[1,"table-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","10",1,"no-data"]],template:function(a,o){a&1&&(e(0,"div",0)(1,"h1"),i(2,"Offboarding Report"),t(),e(3,"div",1)(4,"input",2),g("ngModelChange",function(s){return p(o.searchQuery,s)||(o.searchQuery=s),s}),C("input",function(){return o.searchEmployee()}),t(),N(5,"label",3),e(6,"select",4),g("ngModelChange",function(s){return p(o.selectedDepartment,s)||(o.selectedDepartment=s),s}),C("change",function(){return o.filterByDepartment()}),e(7,"option",5),i(8,"All Schools"),t(),e(9,"option",6),i(10,"School of Computing (SOC)"),t(),e(11,"option",7),i(12,"School of Business and Accountancy (SBA)"),t(),e(13,"option",8),i(14,"School of Engineering and Architecture (SEA)"),t(),e(15,"option",9),i(16,"School of Arts and Sciences (SAS)"),t(),e(17,"option",10),i(18,"School of Hospitality and Tourism Management (SHTM)"),t(),e(19,"option",11),i(20,"School of Education (SED)"),t(),e(21,"option",12),i(22,"School of Nursing and Allied Medical Sciences (SNAMS)"),t(),e(23,"option",13),i(24,"College of Criminal Justice Education and Forensics (CCJEF)"),t()(),e(25,"label",14)(26,"strong"),i(27,"From:"),t()(),e(28,"input",15),g("ngModelChange",function(s){return p(o.fromDate,s)||(o.fromDate=s),s}),C("change",function(){return o.filterByDate()}),t(),e(29,"label",16)(30,"strong"),i(31,"To:"),t()(),e(32,"input",17),g("ngModelChange",function(s){return p(o.toDate,s)||(o.toDate=s),s}),C("change",function(){return o.filterByDate()}),t()(),e(33,"table",18)(34,"thead")(35,"tr")(36,"th"),i(37,"Employee ID"),t(),e(38,"th"),i(39,"Employee's Name"),t(),e(40,"th"),i(41,"Department"),t(),e(42,"th"),i(43,"Reason for Offboarding"),t(),e(44,"th"),i(45,"Effective Offboarding Date"),t(),e(46,"th"),i(47,"Exit Interview Status"),t(),e(48,"th"),i(49,"Clearance Status"),t(),e(50,"th"),i(51,"Certification"),t(),e(52,"th"),i(53,"Recommendation"),t(),e(54,"th"),i(55,"Comments"),t()()(),e(56,"tbody"),S(57,Ke,31,11,"tr",19)(58,Xe,3,0,"tr",20),t()()()),a&2&&(l(4),c("ngModel",o.searchQuery),l(2),c("ngModel",o.selectedDepartment),l(22),c("ngModel",o.fromDate),l(4),c("ngModel",o.toDate),l(25),y("ngForOf",o.filteredEmployees),l(),y("ngIf",o.filteredEmployees.length===0))},dependencies:[x,O,I,T,v,P,w,D],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#f9f9f9}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100%;width:250px;background:linear-gradient(to bottom,#800020,#cca43b);color:#fff;padding:20px 10px;box-shadow:2px 0 6px #0003;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-bottom:20px;font-size:1.5em}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-decoration:none;padding:10px;border-radius:4px;margin:5px 0;transition:background .3s,transform .3s}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#ffffff4d;transform:scale(1.05)}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after{content:"\\25bc";float:right;margin-right:10px}.dropdown-content[_ngcontent-%COMP%]{display:none;background-color:#fff3;margin-left:10px;padding-left:20px}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.9em;padding:5px}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.content[_ngcontent-%COMP%]{margin-left:260px;padding:20px;background-color:#fff;min-height:100vh}.none[_ngcontent-%COMP%]{cursor:none}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px;font-size:2em}.table-container[_ngcontent-%COMP%]{overflow-x:auto;box-shadow:0 2px 4px #0000001a}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:maroon;color:#fff;font-size:1em}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.hamburger[_ngcontent-%COMP%]{display:none;position:fixed;top:10px;left:10px;background-color:#ff5722;color:#fff;border:none;padding:10px;cursor:pointer;z-index:1000}.hamburger[_ngcontent-%COMP%]:focus{outline:none}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:200px;transform:translate(-100%);transition:transform .3s ease}.sidebar.show[_ngcontent-%COMP%]{transform:translate(0)}.content[_ngcontent-%COMP%]{margin-left:0}.hamburger[_ngcontent-%COMP%]{display:block}}.logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;border-radius:50%;box-shadow:0 4px 8px #0003}.search-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px;align-items:center}.search-box[_ngcontent-%COMP%], .department-dropdown[_ngcontent-%COMP%], .date-search[_ngcontent-%COMP%]{padding:8px;width:250px;border:1px solid #ddd;border-radius:4px}label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}']})}}return r})();var Ze=["fileInput"];function $e(r,_){if(r&1&&(e(0,"option",43),i(1),t()),r&2){let n=_.$implicit;y("value",n),l(),f(n)}}function et(r,_){if(r&1){let n=B();e(0,"div",9)(1,"label"),i(2,"Major"),t(),e(3,"select",41),g("ngModelChange",function(o){u(n);let d=M();return p(d.formData.major,o)||(d.formData.major=o),h(o)}),e(4,"option",17),i(5,"Select"),t(),S(6,$e,2,2,"option",42),t()()}if(r&2){let n=M();l(3),c("ngModel",n.formData.major),l(3),y("ngForOf",n.availableMajors)}}var Ae=(()=>{class r{constructor(n,a,o){this.firestore=n,this.storage=a,this.auditLogService=o,this.profileImage="picpro.jpg",this.employees=[],this.availableMajors=[],this.formData={id:"",lastname:"",firstname:"",middlename:"",email:"",employmentDate:"",employmentType:"",department:"",major:"",profileImageUrl:"",onboardingseminar:"",schoolcredentials:"",trainingcertificate:"",certificateofemployment:"",research:"",nbiclearance:"",medicalcertificate:"",timestamp:new Date().toISOString(),status:"Successful"},this.fetchEmployees()}fetchEmployees(){this.firestore.collection("employees",n=>n.orderBy("timestamp")).valueChanges().subscribe(n=>{this.employees=n},n=>{console.error("Error fetching employees:",n)})}updateMajors(){let n={SOC:["Bachelor of Science in Information Technology","Bachelor of Science in Computer Science","Bachelor of Science in Cybersecurity","Master in Information Technology"],SBA:["Bachelor of Science in Business Administration","Bachelor of Science in Accountancy","Master of Business Administration"],SEA:["Bachelor of Science in Architecture","Bachelor of Science in Civil Engineering","Bachelor of Science in Mechanical Engineering"],SHTM:["Bachelor of Science in Hospitality Management","Bachelor of Science in Tourism Management"],SNAMS:["Bachelor of Science in Nursing","Bachelor of Science in Medical Technology"],CCJEF:["Bachelor of Science in Criminology","Bachelor of Forensic Science"],SED:["Bachelor in Elementary Education","Bachelor of Secondary Education Major in English"],SAS:["Bachelor of Arts in Communication","Bachelor of Science in Psychology"]};this.availableMajors=n[this.formData.department]||[]}uploadImage(n){let a=n.target.files[0];if(a){let o=`profile-images/${new Date().getTime()}_${a.name}`,d=this.storage.ref(o);this.storage.upload(o,a).snapshotChanges().pipe(ae(()=>{d.getDownloadURL().subscribe(m=>{this.profileImage=m,this.formData.profileImageUrl=m})})).subscribe()}}onSubmit(n){return te(this,null,function*(){if(!n.valid){alert("\u26A0\uFE0F Please fill out all required fields.");return}try{if(this.formData.onboardingseminar!=="Yes"){yield this.auditLogService.logAction("ONBOARD_EMPLOYEE_FAILED",`Employee ${this.formData.firstname} ${this.formData.lastname} did not attend the onboarding seminar.`,"Failed"),alert("\u274C Employee cannot be onboarded as they have not attended the onboarding seminar.");return}let a=[];this.formData.schoolcredentials!=="Yes"&&a.push("School Credentials"),this.formData.trainingcertificate!=="Yes"&&a.push("Training Certificate"),this.formData.certificateofemployment!=="Yes"&&a.push("Certificate of Employment"),this.formData.research!=="Yes"&&a.push("Research"),this.formData.nbiclearance!=="Yes"&&a.push("NBI Clearance"),this.formData.medicalcertificate!=="Yes"&&a.push("Medical Certificate"),this.formData.status="Successful",yield this.firestore.collection("employees").doc(this.formData.id).set(W(A({},this.formData),{timestamp:new Date().toISOString()})),yield this.auditLogService.logAction("ONBOARD_EMPLOYEE",`Employee ${this.formData.firstname} ${this.formData.lastname} was onboarded.`,"Successful"),a.length>0&&(yield this.auditLogService.logAction("MISSING_DOCUMENTS",`Employee ${this.formData.firstname} ${this.formData.lastname} is missing: ${a.join(", ")}.`,"Failed"),yield this.sendMissingDocumentsEmail(this.formData.email,this.formData.firstname,a)),alert("\u2705 Employee onboarded successfully!"),n.resetForm(),this.profileImage="picpro.jpg",this.fetchEmployees()}catch(a){console.error("\u274C Error:",a),alert("\u274C Error saving employee data.")}})}sendMissingDocumentsEmail(n,a,o){return te(this,null,function*(){try{let d=yield fetch("https://us-central1-signuploginapp-e51b2.cloudfunctions.net/sendEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,firstname:a,missingDocuments:o}),mode:"cors"});if(!d.ok){let m=yield d.text();throw new Error(`HTTP error! Status: ${d.status}, Response: ${m}`)}let s=yield d.json();s?.success?console.log(`\u{1F4E7} Email sent to ${n}`):console.error("\u274C Email not sent:",s?.error)}catch(d){console.error("\u274C Error sending email:",d)}})}static{this.\u0275fac=function(a){return new(a||r)(E(F),E(Oe),E(K))}}static{this.\u0275cmp=b({type:r,selectors:[["app-onboard"]],viewQuery:function(a,o){if(a&1&&de(Ze,5),a&2){let d;me(d=ce())&&(o.fileInput=d.first)}},decls:144,vars:17,consts:[["onboardingForm","ngForm"],["fileInput",""],[1,"onboarding-container"],[1,"onboard-container",3,"ngSubmit"],[1,"onboarding-form","w-100"],[1,"profile-container","mx-auto",3,"click"],["alt","Profile Picture",1,"w-25",3,"src"],[1,"upload-text"],["type","file","accept","image/*","hidden","",3,"change"],[1,"form-group"],["type","text","name","employeeId","placeholder","Enter Employee ID","required","",3,"ngModelChange","ngModel"],["type","text","name","lastname","placeholder","Enter Last Name","required","",3,"ngModelChange","ngModel"],["type","text","name","firstname","placeholder","Enter First Name","required","",3,"ngModelChange","ngModel"],["type","text","name","middlename","placeholder","Enter Middle Name","required","",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Enter Email","required","",3,"ngModelChange","ngModel"],["type","date","name","employmentDate","required","",3,"ngModelChange","ngModel"],["name","employmentType","required","",3,"ngModelChange","ngModel"],["value",""],["value","Full-time"],["value","Part-time"],["value","Probation"],["name","department","required","",3,"ngModelChange","change","ngModel"],["value","SOC"],["value","SBA"],["value","SEA"],["value","SAS"],["value","SHTM"],["value","SED"],["value","SNAMS"],["value","CCJEF"],["class","form-group",4,"ngIf"],["name","onboardingseminar","required","",3,"ngModelChange","ngModel"],["value","Yes"],["value","No"],["name","schoolcredentials","required","",3,"ngModelChange","ngModel"],["name","trainingcertificate","required","",3,"ngModelChange","ngModel"],["name","certificateofemployment","required","",3,"ngModelChange","ngModel"],["name","research","required","",3,"ngModelChange","ngModel"],["name","nbiclearance","required","",3,"ngModelChange","ngModel"],["name","medicalcertificate","required","",3,"ngModelChange","ngModel"],["type","submit",1,"add-new-employee"],["name","major","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(a,o){if(a&1){let d=B();e(0,"div",2)(1,"header")(2,"h4"),i(3,"Onboarding"),t()(),e(4,"form",3,0),C("ngSubmit",function(){u(d);let m=ne(5);return h(o.onSubmit(m))}),e(6,"div",4)(7,"div",5),C("click",function(){u(d);let m=ne(12);return h(m.click())}),N(8,"img",6),e(9,"span",7),i(10,"Upload Image"),t(),e(11,"input",8,1),C("change",function(m){return u(d),h(o.uploadImage(m))}),t()()(),e(13,"div",9)(14,"label"),i(15,"Employee ID"),t(),e(16,"input",10),g("ngModelChange",function(m){return u(d),p(o.formData.id,m)||(o.formData.id=m),h(m)}),t()(),e(17,"div",9)(18,"label"),i(19,"Last Name"),t(),e(20,"input",11),g("ngModelChange",function(m){return u(d),p(o.formData.lastname,m)||(o.formData.lastname=m),h(m)}),t()(),e(21,"div",9)(22,"label"),i(23,"First Name"),t(),e(24,"input",12),g("ngModelChange",function(m){return u(d),p(o.formData.firstname,m)||(o.formData.firstname=m),h(m)}),t()(),e(25,"div",9)(26,"label"),i(27,"Middle Name"),t(),e(28,"input",13),g("ngModelChange",function(m){return u(d),p(o.formData.middlename,m)||(o.formData.middlename=m),h(m)}),t()(),e(29,"div",9)(30,"label"),i(31,"Employee Email"),t(),e(32,"input",14),g("ngModelChange",function(m){return u(d),p(o.formData.email,m)||(o.formData.email=m),h(m)}),t()(),e(33,"div",9)(34,"label"),i(35,"Employment Date"),t(),e(36,"input",15),g("ngModelChange",function(m){return u(d),p(o.formData.employmentDate,m)||(o.formData.employmentDate=m),h(m)}),t()(),e(37,"div",9)(38,"label"),i(39,"Employment Type"),t(),e(40,"select",16),g("ngModelChange",function(m){return u(d),p(o.formData.employmentType,m)||(o.formData.employmentType=m),h(m)}),e(41,"option",17),i(42,"Select"),t(),e(43,"option",18),i(44,"Full-time"),t(),e(45,"option",19),i(46,"Part-time"),t(),e(47,"option",20),i(48,"Probation"),t()()(),e(49,"div",9)(50,"label"),i(51,"Department"),t(),e(52,"select",21),g("ngModelChange",function(m){return u(d),p(o.formData.department,m)||(o.formData.department=m),h(m)}),C("change",function(){return u(d),h(o.updateMajors())}),e(53,"option",17),i(54,"Select"),t(),e(55,"option",22),i(56,"School Of Computing (SOC)"),t(),e(57,"option",23),i(58,"School Of Business and Accountancy (SBA)"),t(),e(59,"option",24),i(60,"School Of Engineering and Architecture (SEA)"),t(),e(61,"option",25),i(62,"School Of Arts and Sciences (SAS)"),t(),e(63,"option",26),i(64,"School Of Hospitality and Tourism Management (SHTM)"),t(),e(65,"option",27),i(66,"School Of Education (SED)"),t(),e(67,"option",28),i(68,"School Of Nursing and Allied Medical Sciences (SNAMS)"),t(),e(69,"option",29),i(70,"College of Criminal Justice Education and Forensics (CCJEF)"),t()()(),S(71,et,7,2,"div",30),e(72,"div",9)(73,"label"),i(74,"Onboarding Seminar"),t(),e(75,"select",31),g("ngModelChange",function(m){return u(d),p(o.formData.onboardingseminar,m)||(o.formData.onboardingseminar=m),h(m)}),e(76,"option",17),i(77,"Select"),t(),e(78,"option",32),i(79,"Yes"),t(),e(80,"option",33),i(81,"No"),t()()(),e(82,"div",9)(83,"label"),i(84,"School Credentials"),t(),e(85,"select",34),g("ngModelChange",function(m){return u(d),p(o.formData.schoolcredentials,m)||(o.formData.schoolcredentials=m),h(m)}),e(86,"option",17),i(87,"Select"),t(),e(88,"option",32),i(89,"Yes"),t(),e(90,"option",33),i(91,"No"),t()()(),e(92,"div",9)(93,"label"),i(94,"Training Certificate"),t(),e(95,"select",35),g("ngModelChange",function(m){return u(d),p(o.formData.trainingcertificate,m)||(o.formData.trainingcertificate=m),h(m)}),e(96,"option",17),i(97,"Select"),t(),e(98,"option",32),i(99,"Yes"),t(),e(100,"option",33),i(101,"No"),t()()(),e(102,"div",9)(103,"label"),i(104,"Certificate of Employment"),t(),e(105,"select",36),g("ngModelChange",function(m){return u(d),p(o.formData.certificateofemployment,m)||(o.formData.certificateofemployment=m),h(m)}),e(106,"option",17),i(107,"Select"),t(),e(108,"option",32),i(109,"Yes"),t(),e(110,"option",33),i(111,"No"),t()()(),e(112,"div",9)(113,"label"),i(114,"Research"),t(),e(115,"select",37),g("ngModelChange",function(m){return u(d),p(o.formData.research,m)||(o.formData.research=m),h(m)}),e(116,"option",17),i(117,"Select"),t(),e(118,"option",32),i(119,"Yes"),t(),e(120,"option",33),i(121,"No"),t()()(),e(122,"div",9)(123,"label"),i(124,"NBI Clearance"),t(),e(125,"select",38),g("ngModelChange",function(m){return u(d),p(o.formData.nbiclearance,m)||(o.formData.nbiclearance=m),h(m)}),e(126,"option",17),i(127,"Select"),t(),e(128,"option",32),i(129,"Yes"),t(),e(130,"option",33),i(131,"No"),t()()(),e(132,"div",9)(133,"label"),i(134,"Medical Certificate"),t(),e(135,"select",39),g("ngModelChange",function(m){return u(d),p(o.formData.medicalcertificate,m)||(o.formData.medicalcertificate=m),h(m)}),e(136,"option",17),i(137,"Select"),t(),e(138,"option",32),i(139,"Yes"),t(),e(140,"option",33),i(141,"No"),t()()(),e(142,"button",40),i(143,"Add This Employee"),t()()()}a&2&&(l(8),y("src",o.profileImage,re),l(8),c("ngModel",o.formData.id),l(4),c("ngModel",o.formData.lastname),l(4),c("ngModel",o.formData.firstname),l(4),c("ngModel",o.formData.middlename),l(4),c("ngModel",o.formData.email),l(4),c("ngModel",o.formData.employmentDate),l(4),c("ngModel",o.formData.employmentType),l(12),c("ngModel",o.formData.department),l(19),y("ngIf",o.availableMajors.length>0),l(4),c("ngModel",o.formData.onboardingseminar),l(10),c("ngModel",o.formData.schoolcredentials),l(10),c("ngModel",o.formData.trainingcertificate),l(10),c("ngModel",o.formData.certificateofemployment),l(10),c("ngModel",o.formData.research),l(10),c("ngModel",o.formData.nbiclearance),l(10),c("ngModel",o.formData.medicalcertificate))},dependencies:[x,O,ye,I,T,v,P,w,he,Ce,D,_e],styles:["h1[_ngcontent-%COMP%]{margin:50px;font-weight:700}.none[_ngcontent-%COMP%]{cursor:none}.onboard-container[_ngcontent-%COMP%]{box-shadow:0 4px 10px #0000001a;padding:10px 30px}.onboarding-form[_ngcontent-%COMP%]{display:inline-flex;margin-top:1rem}.onboarding-container[_ngcontent-%COMP%]{margin-left:250px;padding:40px 20px 20px;box-sizing:border-box;overflow-y:auto}.add-new-employee[_ngcontent-%COMP%]{background:#ff5722;color:#fff;border:none;padding:10px 15px;font-size:16px;cursor:pointer;border-radius:5px;display:block;margin:0 auto 20px}.profile-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;cursor:pointer;margin-bottom:15px}.profile-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10rem}.upload-text[_ngcontent-%COMP%]{background:#444;color:#fff;padding:5px 10px;font-size:12px;border-radius:5px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:15px;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px;width:100%}.add-new-employee[_ngcontent-%COMP%]{background-color:#800020}h4[_ngcontent-%COMP%]{border-bottom:2px solid #ddd;padding-bottom:35px;font-size:45px;font-weight:700}"]})}}return r})();function tt(r,_){if(r&1&&(e(0,"tr")(1,"td")(2,"strong"),i(3),t()(),e(4,"td")(5,"strong"),i(6),t()(),e(7,"td")(8,"strong"),i(9),t()(),e(10,"td")(11,"strong"),i(12),t()(),e(13,"td")(14,"strong"),i(15),t()(),e(16,"td")(17,"strong"),i(18),t()()()),r&2){let n=_.$implicit;l(3),f(n.id),l(3),pe("",n.firstname," ",n.middleName||""," ",n.lastname,""),l(3),f(n.department),l(3),f(n.major),l(3),f(n.employmentType),l(3),f(n.employmentDate)}}function nt(r,_){r&1&&(e(0,"tr")(1,"td",21),i(2,"No employees found."),t()())}var Ne=(()=>{class r{constructor(n,a){this.onboardingReportService=n,this.firestore=a,this.searchQuery="",this.selectedDepartment="",this.fromDate="",this.toDate="",this.employees=[],this.filteredEmployees=[]}ngOnInit(){this.fetchEmployees()}fetchEmployees(){this.onboardingReportService.getEmployees().subscribe(n=>{this.employees=n.filter(a=>a.status!=="Offboarded"),this.filteredEmployees=[...this.employees]})}searchEmployee(){let n=this.searchQuery.toLowerCase().trim();this.filteredEmployees=this.employees.filter(a=>a.lastname?.toLowerCase().startsWith(n)||a.id?.toLowerCase().includes(n)),this.applyFilters()}filterByDepartment(){this.applyFilters()}filterByDate(){this.applyFilters()}applyFilters(){this.filteredEmployees=this.employees.filter(n=>{let a=this.selectedDepartment?n.department===this.selectedDepartment:!0,o=this.searchQuery.toLowerCase().trim(),d=!this.searchQuery||n.lastname?.toLowerCase().startsWith(o)||n.id?.toLowerCase().includes(o),s=!0;if(this.fromDate||this.toDate){let m=new Date(n.employmentDate).toISOString().split("T")[0];this.fromDate&&m<this.fromDate&&(s=!1),this.toDate&&m>this.toDate&&(s=!1)}return a&&d&&s})}static{this.\u0275fac=function(a){return new(a||r)(E(ee),E(F))}}static{this.\u0275cmp=b({type:r,selectors:[["app-onboarding-report"]],decls:51,vars:6,consts:[[1,"content"],[1,"search-container"],["type","text","placeholder","Search by Last Name or Employee ID",1,"search-box",3,"ngModelChange","input","ngModel"],["for","departmentDropdown"],["id","departmentDropdown",1,"department-dropdown",3,"ngModelChange","change","ngModel"],["value",""],["value","SOC"],["value","SBA"],["value","SEA"],["value","SAS"],["value","SHTM"],["value","SED"],["value","SNAMS"],["value","CCJEF"],["for","fromDate"],["type","date","id","fromDate",1,"date-search",3,"ngModelChange","change","ngModel"],["for","toDate"],["type","date","id","toDate",1,"date-search",3,"ngModelChange","change","ngModel"],[1,"table-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","6",1,"no-data"]],template:function(a,o){a&1&&(e(0,"div",0)(1,"h1"),i(2,"Onboarding Report"),t(),e(3,"div",1)(4,"input",2),g("ngModelChange",function(s){return p(o.searchQuery,s)||(o.searchQuery=s),s}),C("input",function(){return o.searchEmployee()}),t(),N(5,"label",3),e(6,"select",4),g("ngModelChange",function(s){return p(o.selectedDepartment,s)||(o.selectedDepartment=s),s}),C("change",function(){return o.filterByDepartment()}),e(7,"option",5),i(8,"All Schools"),t(),e(9,"option",6),i(10,"School of Computing (SOC)"),t(),e(11,"option",7),i(12,"School of Business and Accountancy (SBA)"),t(),e(13,"option",8),i(14,"School of Engineering and Architecture (SEA)"),t(),e(15,"option",9),i(16,"School of Arts and Sciences (SAS)"),t(),e(17,"option",10),i(18,"School of Hospitality and Tourism Management (SHTM)"),t(),e(19,"option",11),i(20,"School of Education (SED)"),t(),e(21,"option",12),i(22,"School of Nursing and Allied Medical Sciences (SNAMS)"),t(),e(23,"option",13),i(24,"College of Criminal Justice Education and Forensics (CCJEF)"),t()(),e(25,"label",14)(26,"strong"),i(27,"From:"),t()(),e(28,"input",15),g("ngModelChange",function(s){return p(o.fromDate,s)||(o.fromDate=s),s}),C("change",function(){return o.filterByDate()}),t(),e(29,"label",16)(30,"strong"),i(31,"To:"),t()(),e(32,"input",17),g("ngModelChange",function(s){return p(o.toDate,s)||(o.toDate=s),s}),C("change",function(){return o.filterByDate()}),t()(),e(33,"table",18)(34,"thead")(35,"tr")(36,"th"),i(37,"Employee ID"),t(),e(38,"th"),i(39,"Employee's Name"),t(),e(40,"th"),i(41,"Department"),t(),e(42,"th"),i(43,"Major"),t(),e(44,"th"),i(45,"Employment Type"),t(),e(46,"th"),i(47,"Employment Date"),t()()(),e(48,"tbody"),S(49,tt,19,8,"tr",19)(50,nt,3,0,"tr",20),t()()()),a&2&&(l(4),c("ngModel",o.searchQuery),l(2),c("ngModel",o.selectedDepartment),l(22),c("ngModel",o.fromDate),l(4),c("ngModel",o.toDate),l(17),y("ngForOf",o.filteredEmployees),l(),y("ngIf",(o.filteredEmployees==null?null:o.filteredEmployees.length)===0))},dependencies:[x,O,I,T,v,P,w,D],styles:['@charset "UTF-8";.content[_ngcontent-%COMP%]{margin-left:260px}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px;font-size:2em}.table-container[_ngcontent-%COMP%]{overflow-x:auto;box-shadow:0 2px 4px #0000001a}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:maroon;color:#fff;font-size:1em}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.search-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px;align-items:center}.search-box[_ngcontent-%COMP%], .department-dropdown[_ngcontent-%COMP%], .date-search[_ngcontent-%COMP%]{padding:8px;width:250px;border:1px solid #ddd;border-radius:4px}label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}']})}}return r})();var it=[{path:"",redirectTo:"employee-info",pathMatch:"full"},{path:"onboard",component:Ae},{path:"offboard",component:xe},{path:"employee-info",component:be},{path:"onboarding-report",component:Ne},{path:"offboarding-report",component:Te},{path:"audit-logs",component:we},{path:"evaluation",component:Pe},{path:"distribution",loadChildren:()=>import("./chunk-YS7LUO42.js").then(r=>r.DistributionModule)}],Fe=(()=>{class r{static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275mod=U({type:r})}static{this.\u0275inj=Q({imports:[R.forChild(it),R]})}}return r})();var $t=(()=>{class r{static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275mod=U({type:r})}static{this.\u0275inj=Q({providers:[X,ve],imports:[ue,Fe,Se,Ee,R]})}}return r})();export{$t as DashboardModule};
